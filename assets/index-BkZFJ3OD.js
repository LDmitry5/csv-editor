var Kr=Object.defineProperty;var Qr=(n,t,e)=>t in n?Kr(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var J=(n,t,e)=>Qr(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function Zr(n){const t=document.querySelector("csv-editor");t.style.display="block"}document.querySelector("#app").innerHTML=`
  <div class="container">
    <div>
      <button class="btn-custom" id="loadCsv">Загрузить</button>
      <button class="btn-custom" id="saveCsv">Сохранить</button>
    </div>
    <div class="custom-table" id="table"></div>
    <div>
      <canvas id="myChart"></canvas>
    </div>
    <csv-editor class="display-none"></csv-editor>
  </div>
`;const Jr=document.querySelector("#loadCsv");Jr.addEventListener("click",n=>Zr());/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ke(n){return n+.5|0}const Jt=(n,t,e)=>Math.max(Math.min(n,e),t);function Re(n){return Jt(Ke(n*2.55),0,255)}function ie(n){return Jt(Ke(n*255),0,255)}function qt(n){return Jt(Ke(n/2.55)/100,0,1)}function Oi(n){return Jt(Ke(n*100),0,100)}const Ft={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qn=[..."0123456789ABCDEF"],to=n=>Qn[n&15],eo=n=>Qn[(n&240)>>4]+Qn[n&15],Ze=n=>(n&240)>>4===(n&15),no=n=>Ze(n.r)&&Ze(n.g)&&Ze(n.b)&&Ze(n.a);function io(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ft[n[1]]*17,g:255&Ft[n[2]]*17,b:255&Ft[n[3]]*17,a:t===5?Ft[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ft[n[1]]<<4|Ft[n[2]],g:Ft[n[3]]<<4|Ft[n[4]],b:Ft[n[5]]<<4|Ft[n[6]],a:t===9?Ft[n[7]]<<4|Ft[n[8]]:255})),e}const so=(n,t)=>n<255?t(n):"";function ro(n){var t=no(n)?to:eo;return n?"#"+t(n.r)+t(n.g)+t(n.b)+so(n.a,t):void 0}const oo=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Js(n,t,e){const i=t*Math.min(e,1-e),s=(r,o=(r+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function ao(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function lo(n,t,e){const i=Js(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function co(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function di(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2;let c,l,u;return r!==o&&(u=r-o,l=a>.5?u/(2-r-o):u/(r+o),c=co(e,i,s,u,r),c=c*60+.5),[c|0,l||0,a]}function pi(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ie)}function gi(n,t,e){return pi(Js,n,t,e)}function uo(n,t,e){return pi(lo,n,t,e)}function ho(n,t,e){return pi(ao,n,t,e)}function tr(n){return(n%360+360)%360}function fo(n){const t=oo.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Re(+t[5]):ie(+t[5]));const s=tr(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=uo(s,r,o):t[1]==="hsv"?i=ho(s,r,o):i=gi(s,r,o),{r:i[0],g:i[1],b:i[2],a:e}}function po(n,t){var e=di(n);e[0]=tr(e[0]+t),e=gi(e),n.r=e[0],n.g=e[1],n.b=e[2]}function go(n){if(!n)return;const t=di(n),e=t[0],i=Oi(t[1]),s=Oi(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${qt(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const Ri={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ai={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mo(){const n={},t=Object.keys(Ai),e=Object.keys(Ri);let i,s,r,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],s=0;s<e.length;s++)r=e[s],a=a.replace(r,Ri[r]);r=parseInt(Ai[o],16),n[a]=[r>>16&255,r>>8&255,r&255]}return n}let Je;function _o(n){Je||(Je=mo(),Je.transparent=[0,0,0,0]);const t=Je[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const bo=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yo(n){const t=bo.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const o=+t[7];e=t[8]?Re(o):Jt(o*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Re(i):Jt(i,0,255)),s=255&(t[4]?Re(s):Jt(s,0,255)),r=255&(t[6]?Re(r):Jt(r,0,255)),{r:i,g:s,b:r,a:e}}}function vo(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${qt(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const In=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ve=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xo(n,t,e){const i=ve(qt(n.r)),s=ve(qt(n.g)),r=ve(qt(n.b));return{r:ie(In(i+e*(ve(qt(t.r))-i))),g:ie(In(s+e*(ve(qt(t.g))-s))),b:ie(In(r+e*(ve(qt(t.b))-r))),a:n.a+e*(t.a-n.a)}}function tn(n,t,e){if(n){let i=di(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=gi(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function er(n,t){return n&&Object.assign(t||{},n)}function Li(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ie(n[3]))):(t=er(n,{r:0,g:0,b:0,a:1}),t.a=ie(t.a)),t}function wo(n){return n.charAt(0)==="r"?yo(n):fo(n)}class He{constructor(t){if(t instanceof He)return t;const e=typeof t;let i;e==="object"?i=Li(t):e==="string"&&(i=io(t)||_o(t)||wo(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=er(this._rgb);return t&&(t.a=qt(t.a)),t}set rgb(t){this._rgb=Li(t)}rgbString(){return this._valid?vo(this._rgb):void 0}hexString(){return this._valid?ro(this._rgb):void 0}hslString(){return this._valid?go(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,c=i.a-s.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-l,i.r=255&l*i.r+r*s.r+.5,i.g=255&l*i.g+r*s.g+.5,i.b=255&l*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=xo(this._rgb,t._rgb,e)),this}clone(){return new He(this.rgb)}alpha(t){return this._rgb.a=ie(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ke(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return tn(this._rgb,2,t),this}darken(t){return tn(this._rgb,2,-t),this}saturate(t){return tn(this._rgb,1,t),this}desaturate(t){return tn(this._rgb,1,-t),this}rotate(t){return po(this._rgb,t),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ut(){}const ko=(()=>{let n=0;return()=>n++})();function lt(n){return n==null}function yt(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ct(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function xt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function At(n,t){return xt(n)?n:t}function ot(n,t){return typeof n>"u"?t:n}const So=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,nr=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function pt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ft(n,t,e,i){let s,r,o;if(yt(n))for(r=n.length,s=0;s<r;s++)t.call(e,n[s],s);else if(ct(n))for(o=Object.keys(n),r=o.length,s=0;s<r;s++)t.call(e,n[o[s]],o[s])}function wn(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function kn(n){if(yt(n))return n.map(kn);if(ct(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=kn(n[e[s]]);return t}return n}function ir(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Co(n,t,e,i){if(!ir(n))return;const s=t[n],r=e[n];ct(s)&&ct(r)?We(s,r,i):t[n]=kn(r)}function We(n,t,e){const i=yt(t)?t:[t],s=i.length;if(!ct(n))return n;e=e||{};const r=e.merger||Co;let o;for(let a=0;a<s;++a){if(o=i[a],!ct(o))continue;const c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)r(c[l],n,o,e)}return n}function Ie(n,t){return We(n,t,{merger:Mo})}function Mo(n,t,e){if(!ir(n))return;const i=t[n],s=e[n];ct(i)&&ct(s)?Ie(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=kn(s))}const Di={"":n=>n,x:n=>n.x,y:n=>n.y};function Po(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Eo(n){const t=Po(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function se(n,t){return(Di[t]||(Di[t]=Eo(t)))(n)}function mi(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ue=n=>typeof n<"u",re=n=>typeof n=="function",Fi=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function To(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const mt=Math.PI,gt=2*mt,Oo=gt+mt,Sn=Number.POSITIVE_INFINITY,Ro=mt/180,wt=mt/2,le=mt/4,ji=mt*2/3,te=Math.log10,Wt=Math.sign;function Be(n,t,e){return Math.abs(n-t)<e}function Ii(n){const t=Math.round(n);n=Be(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(te(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Ao(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function Lo(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ke(n){return!Lo(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Do(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function sr(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function It(n){return n*(mt/180)}function _i(n){return n*(180/mt)}function Bi(n){if(!xt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function rr(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*mt&&(r+=gt),{angle:r,distance:s}}function Zn(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Fo(n,t){return(n-t+Oo)%gt-mt}function Lt(n){return(n%gt+gt)%gt}function $e(n,t,e,i){const s=Lt(n),r=Lt(t),o=Lt(e),a=Lt(r-s),c=Lt(o-s),l=Lt(s-r),u=Lt(s-o);return s===r||s===o||i&&r===o||a>c&&l<u}function Ct(n,t,e){return Math.max(t,Math.min(e,n))}function jo(n){return Ct(n,-32768,32767)}function Gt(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function bi(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const Kt=(n,t,e,i)=>bi(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),Io=(n,t,e)=>bi(n,e,i=>n[i][t]>=e);function Bo(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const or=["push","pop","shift","splice","unshift"];function No(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),or.forEach(e=>{const i="_onData"+mi(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Ni(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(or.forEach(r=>{delete n[r]}),delete n._chartjs)}function ar(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const lr=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function cr(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,lr.call(window,()=>{i=!1,n.apply(t,e)}))}}function zo(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const yi=n=>n==="start"?"left":n==="end"?"right":"center",Pt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Vo=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function ur(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(s=Math.min(Kt(c,u,h).lo,e?i:Kt(t,u,o.getPixelForValue(h)).lo),l){const d=c.slice(0,s+1).reverse().findIndex(b=>!lt(b[a.axis]));s-=Math.max(0,d)}s=Ct(s,0,i-1)}if(p){let d=Math.max(Kt(c,o.axis,f,!0).hi+1,e?0:Kt(t,u,o.getPixelForValue(f),!0).hi+1);if(l){const b=c.slice(d-1).findIndex(g=>!lt(g[a.axis]));d+=Math.max(0,b)}r=Ct(d,s,i)-s}else r=i-s}return{start:s,count:r}}function hr(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}const en=n=>n===0||n===1,zi=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*gt/e)),Vi=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*gt/e)+1,Ne={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*wt)+1,easeOutSine:n=>Math.sin(n*wt),easeInOutSine:n=>-.5*(Math.cos(mt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>en(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>en(n)?n:zi(n,.075,.3),easeOutElastic:n=>en(n)?n:Vi(n,.075,.3),easeInOutElastic(n){return en(n)?n:n<.5?.5*zi(n*2,.1125,.45):.5+.5*Vi(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Ne.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ne.easeInBounce(n*2)*.5:Ne.easeOutBounce(n*2-1)*.5+.5};function vi(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Hi(n){return vi(n)?n:new He(n)}function Bn(n){return vi(n)?n:new He(n).saturate(.5).darken(.1).hexString()}const Ho=["x","y","borderWidth","radius","tension"],Wo=["color","borderColor","backgroundColor"];function Uo(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Wo},numbers:{type:"number",properties:Ho}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function $o(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Wi=new Map;function Yo(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Wi.get(e);return i||(i=new Intl.NumberFormat(n,t),Wi.set(e,i)),i}function Qe(n,t,e){return Yo(t,e).format(n)}const fr={values(n){return yt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(s="scientific"),r=qo(n,e)}const o=te(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Qe(n,i,c)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(te(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?fr.numeric.call(this,n,t,e):""}};function qo(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var On={formatters:fr};function Xo(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:On.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const _e=Object.create(null),Jn=Object.create(null);function ze(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function Nn(n,t,e){return typeof t=="string"?We(ze(n,t),e):We(ze(n,""),t)}class Go{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Bn(s.backgroundColor),this.hoverBorderColor=(i,s)=>Bn(s.borderColor),this.hoverColor=(i,s)=>Bn(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Nn(this,t,e)}get(t){return ze(this,t)}describe(t,e){return Nn(Jn,t,e)}override(t,e){return Nn(_e,t,e)}route(t,e,i,s){const r=ze(this,t),o=ze(this,i),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[a],l=o[s];return ct(c)?Object.assign({},l,c):ot(c,l)},set(c){this[a]=c}}})}apply(t){t.forEach(e=>e(this))}}var vt=new Go({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Uo,$o,Xo]);function Ko(n){return!n||lt(n.size)||lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Cn(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function Qo(n,t,e,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},r=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0;const a=e.length;let c,l,u,h,f;for(c=0;c<a;c++)if(h=e[c],h!=null&&!yt(h))o=Cn(n,s,r,o,h);else if(yt(h))for(l=0,u=h.length;l<u;l++)f=h[l],f!=null&&!yt(f)&&(o=Cn(n,s,r,o,f));n.restore();const m=r.length/2;if(m>e.length){for(c=0;c<m;c++)delete s[r[c]];r.splice(0,m)}return o}function ce(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Ui(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function ti(n,t,e,i){dr(n,t,e,i,null)}function dr(n,t,e,i,s){let r,o,a,c,l,u,h,f;const m=t.pointStyle,p=t.rotation,d=t.radius;let b=(p||0)*Ro;if(m&&typeof m=="object"&&(r=m.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(b),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(d)||d<=0)){switch(n.beginPath(),m){default:s?n.ellipse(e,i,s/2,d,0,0,gt):n.arc(e,i,d,0,gt),n.closePath();break;case"triangle":u=s?s/2:d,n.moveTo(e+Math.sin(b)*u,i-Math.cos(b)*d),b+=ji,n.lineTo(e+Math.sin(b)*u,i-Math.cos(b)*d),b+=ji,n.lineTo(e+Math.sin(b)*u,i-Math.cos(b)*d),n.closePath();break;case"rectRounded":l=d*.516,c=d-l,o=Math.cos(b+le)*c,h=Math.cos(b+le)*(s?s/2-l:c),a=Math.sin(b+le)*c,f=Math.sin(b+le)*(s?s/2-l:c),n.arc(e-h,i-a,l,b-mt,b-wt),n.arc(e+f,i-o,l,b-wt,b),n.arc(e+h,i+a,l,b,b+wt),n.arc(e-f,i+o,l,b+wt,b+mt),n.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*d,u=s?s/2:c,n.rect(e-u,i-c,2*u,2*c);break}b+=le;case"rectRot":h=Math.cos(b)*(s?s/2:d),o=Math.cos(b)*d,a=Math.sin(b)*d,f=Math.sin(b)*(s?s/2:d),n.moveTo(e-h,i-a),n.lineTo(e+f,i-o),n.lineTo(e+h,i+a),n.lineTo(e-f,i+o),n.closePath();break;case"crossRot":b+=le;case"cross":h=Math.cos(b)*(s?s/2:d),o=Math.cos(b)*d,a=Math.sin(b)*d,f=Math.sin(b)*(s?s/2:d),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+f,i-o),n.lineTo(e-f,i+o);break;case"star":h=Math.cos(b)*(s?s/2:d),o=Math.cos(b)*d,a=Math.sin(b)*d,f=Math.sin(b)*(s?s/2:d),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+f,i-o),n.lineTo(e-f,i+o),b+=le,h=Math.cos(b)*(s?s/2:d),o=Math.cos(b)*d,a=Math.sin(b)*d,f=Math.sin(b)*(s?s/2:d),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+f,i-o),n.lineTo(e-f,i+o);break;case"line":o=s?s/2:Math.cos(b)*d,a=Math.sin(b)*d,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(b)*(s?s/2:d),i+Math.sin(b)*d);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Qt(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Rn(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function An(n){n.restore()}function Zo(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Jo(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function ta(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),lt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function ea(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,c=e-r.actualBoundingBoxAscent,l=e+r.actualBoundingBoxDescent,u=s.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function na(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function be(n,t,e,i,s,r={}){const o=yt(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let c,l;for(n.save(),n.font=s.string,ta(n,r),c=0;c<o.length;++c)l=o[c],r.backdrop&&na(n,r.backdrop),a&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),lt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(l,e,i,r.maxWidth)),n.fillText(l,e,i,r.maxWidth),ea(n,e,i,l,r),i+=Number(s.lineHeight);n.restore()}function Ye(n,t){const{x:e,y:i,w:s,h:r,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*mt,mt,!0),n.lineTo(e,i+r-o.bottomLeft),n.arc(e+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,mt,wt,!0),n.lineTo(e+s-o.bottomRight,i+r),n.arc(e+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,wt,0,!0),n.lineTo(e+s,i+o.topRight),n.arc(e+s-o.topRight,i+o.topRight,o.topRight,0,-wt,!0),n.lineTo(e+o.topLeft,i)}const ia=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sa=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ra(n,t){const e=(""+n).match(ia);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const oa=n=>+n||0;function xi(n,t){const e={},i=ct(t),s=i?Object.keys(t):t,r=ct(n)?i?o=>ot(n[o],n[t[o]]):o=>n[o]:()=>n;for(const o of s)e[o]=oa(r(o));return e}function pr(n){return xi(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ge(n){return xi(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Tt(n){const t=pr(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function St(n,t){n=n||{},t=t||vt.font;let e=ot(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=ot(n.style,t.style);i&&!(""+i).match(sa)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ot(n.family,t.family),lineHeight:ra(ot(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ot(n.weight,t.weight),string:""};return s.string=Ko(s),s}function Ae(n,t,e,i){let s,r,o;for(s=0,r=n.length;s<r;++s)if(o=n[s],o!==void 0&&o!==void 0)return o}function aa(n,t,e){const{min:i,max:s}=n,r=nr(t,(s-i)/2),o=(a,c)=>e&&a===0?0:a+c;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function oe(n,t){return Object.assign(Object.create(n),t)}function wi(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=br("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>wi([a,...n],t,r,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return mr(a,c,()=>ga(c,t,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return Yi(a).includes(c)},ownKeys(a){return Yi(a)},set(a,c,l){const u=a._storage||(a._storage=s());return a[c]=u[c]=l,delete a._keys,!0}})}function Se(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:gr(n,i),setContext:r=>Se(n,r,e,i),override:r=>Se(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,a){return mr(r,o,()=>ca(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,a){return n[o]=a,delete r[o],!0}})}function gr(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:re(e)?e:()=>e,isIndexable:re(i)?i:()=>i}}const la=(n,t)=>n?n+mi(t):t,ki=(n,t)=>ct(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function mr(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function ca(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=n;let a=i[t];return re(a)&&o.isScriptable(t)&&(a=ua(t,a,n,e)),yt(a)&&a.length&&(a=ha(t,a,n,o.isIndexable)),ki(t,a)&&(a=Se(a,s,r&&r[t],o)),a}function ua(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=t(r,o||i);return a.delete(n),ki(n,c)&&(c=Si(s._scopes,s,n,c)),c}function ha(n,t,e,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(ct(t[0])){const c=t,l=s._scopes.filter(u=>u!==c);t=[];for(const u of c){const h=Si(l,s,n,u);t.push(Se(h,r,o&&o[n],a))}}return t}function _r(n,t,e){return re(n)?n(t,e):n}const fa=(n,t)=>n===!0?t:typeof n=="string"?se(t,n):void 0;function da(n,t,e,i,s){for(const r of t){const o=fa(e,r);if(o){n.add(o);const a=_r(o._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Si(n,t,e,i){const s=t._rootScopes,r=_r(t._fallback,e,i),o=[...n,...s],a=new Set;a.add(i);let c=$i(a,o,e,r||e,i);return c===null||typeof r<"u"&&r!==e&&(c=$i(a,o,r,c,i),c===null)?!1:wi(Array.from(a),[""],s,r,()=>pa(t,e,i))}function $i(n,t,e,i,s){for(;e;)e=da(n,t,e,i,s);return e}function pa(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return yt(s)&&ct(e)?e:s||{}}function ga(n,t,e,i){let s;for(const r of t)if(s=br(la(r,n),e),typeof s<"u")return ki(n,s)?Si(e,i,n,s):s}function br(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Yi(n){let t=n._keys;return t||(t=n._keys=ma(n._scopes)),t}function ma(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function yr(n,t,e,i){const{iScale:s}=n,{key:r="r"}=this._parsing,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+e,u=t[l],o[a]={r:s.parse(se(u,r),l)};return o}const _a=Number.EPSILON||1e-14,Ce=(n,t)=>t<n.length&&!n[t].skip&&n[t],vr=n=>n==="x"?"y":"x";function ba(n,t,e,i){const s=n.skip?t:n,r=t,o=e.skip?t:e,a=Zn(r,s),c=Zn(o,r);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=i*l,f=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+f*(o.x-s.x),y:r.y+f*(o.y-s.y)}}}function ya(n,t,e){const i=n.length;let s,r,o,a,c,l=Ce(n,0);for(let u=0;u<i-1;++u)if(c=l,l=Ce(n,u+1),!(!c||!l)){if(Be(t[u],0,_a)){e[u]=e[u+1]=0;continue}s=e[u]/t[u],r=e[u+1]/t[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=s*o*t[u],e[u+1]=r*o*t[u])}}function va(n,t,e="x"){const i=vr(e),s=n.length;let r,o,a,c=Ce(n,0);for(let l=0;l<s;++l){if(o=a,a=c,c=Ce(n,l+1),!a)continue;const u=a[e],h=a[i];o&&(r=(u-o[e])/3,a[`cp1${e}`]=u-r,a[`cp1${i}`]=h-r*t[l]),c&&(r=(c[e]-u)/3,a[`cp2${e}`]=u+r,a[`cp2${i}`]=h+r*t[l])}}function xa(n,t="x"){const e=vr(t),i=n.length,s=Array(i).fill(0),r=Array(i);let o,a,c,l=Ce(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=Ce(n,o+1),!!c){if(l){const u=l[t]-c[t];s[o]=u!==0?(l[e]-c[e])/u:0}r[o]=a?l?Wt(s[o-1])!==Wt(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}ya(n,s,r),va(n,r,t)}function nn(n,t,e){return Math.max(Math.min(n,e),t)}function wa(n,t){let e,i,s,r,o,a=Qt(n[0],t);for(e=0,i=n.length;e<i;++e)o=r,r=a,a=e<i-1&&Qt(n[e+1],t),r&&(s=n[e],o&&(s.cp1x=nn(s.cp1x,t.left,t.right),s.cp1y=nn(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=nn(s.cp2x,t.left,t.right),s.cp2y=nn(s.cp2y,t.top,t.bottom)))}function ka(n,t,e,i,s){let r,o,a,c;if(t.spanGaps&&(n=n.filter(l=>!l.skip)),t.cubicInterpolationMode==="monotone")xa(n,s);else{let l=i?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)a=n[r],c=ba(l,a,n[Math.min(r+1,o-(i?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}t.capBezierPoints&&wa(n,e)}function Ci(){return typeof window<"u"&&typeof document<"u"}function Mi(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Mn(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Ln=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Sa(n,t){return Ln(n).getPropertyValue(t)}const Ca=["top","right","bottom","left"];function me(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=Ca[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Ma=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Pa(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let o=!1,a,c;if(Ma(s,r,n.target))a=s,c=r;else{const l=t.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function fe(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=Ln(e),r=s.boxSizing==="border-box",o=me(s,"padding"),a=me(s,"border","width"),{x:c,y:l,box:u}=Pa(n,e),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:m,height:p}=t;return r&&(m-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/m*e.width/i),y:Math.round((l-f)/p*e.height/i)}}function Ea(n,t,e){let i,s;if(t===void 0||e===void 0){const r=n&&Mi(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const o=r.getBoundingClientRect(),a=Ln(r),c=me(a,"border","width"),l=me(a,"padding");t=o.width-l.width-c.width,e=o.height-l.height-c.height,i=Mn(a.maxWidth,r,"clientWidth"),s=Mn(a.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||Sn,maxHeight:s||Sn}}const sn=n=>Math.round(n*10)/10;function Ta(n,t,e,i){const s=Ln(n),r=me(s,"margin"),o=Mn(s.maxWidth,n,"clientWidth")||Sn,a=Mn(s.maxHeight,n,"clientHeight")||Sn,c=Ea(n,t,e);let{width:l,height:u}=c;if(s.boxSizing==="content-box"){const f=me(s,"border","width"),m=me(s,"padding");l-=m.width+f.width,u-=m.height+f.height}return l=Math.max(0,l-r.width),u=Math.max(0,i?l/i:u-r.height),l=sn(Math.min(l,o,c.maxWidth)),u=sn(Math.min(u,a,c.maxHeight)),l&&!u&&(u=sn(l/2)),(t!==void 0||e!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=sn(Math.floor(u*i))),{width:l,height:u}}function qi(n,t,e){const i=t||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(n.currentDevicePixelRatio=i,o.height=s,o.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Oa=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Ci()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Xi(n,t){const e=Sa(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function de(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Ra(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function Aa(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},o=de(n,s,e),a=de(s,r,e),c=de(r,t,e),l=de(o,a,e),u=de(a,c,e);return de(l,u,e)}const La=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Da=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function we(n,t,e){return n?La(t,e):Da()}function xr(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function wr(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function kr(n){return n==="angle"?{between:$e,compare:Fo,normalize:Lt}:{between:Gt,compare:(t,e)=>t-e,normalize:t=>t}}function Gi({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function Fa(n,t,e){const{property:i,start:s,end:r}=e,{between:o,normalize:a}=kr(i),c=t.length;let{start:l,end:u,loop:h}=n,f,m;if(h){for(l+=c,u+=c,f=0,m=c;f<m&&o(a(t[l%c][i]),s,r);++f)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:n.style}}function Sr(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,o=t.length,{compare:a,between:c,normalize:l}=kr(i),{start:u,end:h,loop:f,style:m}=Fa(n,t,e),p=[];let d=!1,b=null,g,y,x;const w=()=>c(s,x,g)&&a(s,x)!==0,C=()=>a(r,g)===0||c(r,x,g),S=()=>d||w(),E=()=>!d||C();for(let T=u,I=u;T<=h;++T)y=t[T%o],!y.skip&&(g=l(y[i]),g!==x&&(d=c(g,s,r),b===null&&S()&&(b=a(g,s)===0?T:I),b!==null&&E()&&(p.push(Gi({start:b,end:T,loop:f,count:o,style:m})),b=null),I=T,x=g));return b!==null&&p.push(Gi({start:b,end:h,loop:f,count:o,style:m})),p}function Cr(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=Sr(i[s],n.points,t);r.length&&e.push(...r)}return e}function ja(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function Ia(n,t,e,i){const s=n.length,r=[];let o=t,a=n[t],c;for(c=t+1;c<=e;++c){const l=n[c%s];l.skip||l.stop?a.skip||(i=!1,r.push({start:t%s,end:(c-1)%s,loop:i}),t=o=l.stop?c:null):(o=c,a.skip&&(t=c)),a=l}return o!==null&&r.push({start:t%s,end:o%s,loop:i}),r}function Ba(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:o,end:a}=ja(e,s,r,i);if(i===!0)return Ki(n,[{start:o,end:a,loop:r}],e,t);const c=a<o?a+s:a,l=!!n._fullLoop&&o===0&&a===s-1;return Ki(n,Ia(e,o,c,l),e,t)}function Ki(n,t,e,i){return!i||!i.setContext||!e?t:Na(n,t,e,i)}function Na(n,t,e,i){const s=n._chart.getContext(),r=Qi(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=e.length,l=[];let u=r,h=t[0].start,f=h;function m(p,d,b,g){const y=a?-1:1;if(p!==d){for(p+=c;e[p%c].skip;)p-=y;for(;e[d%c].skip;)d+=y;p%c!==d%c&&(l.push({start:p%c,end:d%c,loop:b,style:g}),u=g,h=d%c)}}for(const p of t){h=a?h:p.start;let d=e[h%c],b;for(f=h+1;f<=p.end;f++){const g=e[f%c];b=Qi(i.setContext(oe(s,{type:"segment",p0:d,p1:g,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),za(b,u)&&m(h,f-1,p.loop,u),d=g,u=b}h<f-1&&m(h,f-1,p.loop,u)}return l}function Qi(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function za(n,t){if(!t)return!1;const e=[],i=function(s,r){return vi(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function rn(n,t,e){return n.options.clip?n[e]:t[e]}function Va(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:rn(e,t,"left"),right:rn(e,t,"right"),top:rn(i,t,"top"),bottom:rn(i,t,"bottom")}:t}function Mr(n,t){const e=t._clip;if(e.disabled)return!1;const i=Va(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Ha{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],o=e.duration;r.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var $t=new Ha;const Zi="transparent",Wa={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Hi(n||Zi),s=i.valid&&Hi(t||Zi);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Ua{constructor(t,e,i,s){const r=e[i];s=Ae([t.to,s,r,t.from]);const o=Ae([t.from,r,s]);this._active=!0,this._fn=t.fn||Wa[t.type||typeof o],this._easing=Ne[t.easing]||Ne.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ae([t.to,e,s,t.from]),this._from=Ae([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let c;if(this._active=r!==a&&(o||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=r;return}c=e/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,a,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Pr{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ct(t))return;const e=Object.keys(vt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!ct(r))return;const o={};for(const a of e)o[a]=r[a];(yt(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){const i=e.options,s=Ya(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&$a(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){s.push(...this._animateOptions(t,e));continue}const u=e[l];let h=r[l];const f=i.get(l);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){t[l]=u;continue}r[l]=h=new Ua(f,t,l,u),s.push(h)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return $t.add(this._chart,i),!0}}function $a(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function Ya(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Ji(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function qa(n,t,e){if(e===!1)return!1;const i=Ji(n,e),s=Ji(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Xa(n){let t,e,i,s;return ct(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Er(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function ts(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let o,a,c,l;if(t===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===e){if(u=!0,i.all)continue;break}l=n.values[c],xt(l)&&(r||t===0||Wt(t)===Wt(l))&&(t+=l)}return!u&&!i.all?0:t}function Ga(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length);let c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[s]:u,[r]:n[u]};return a}function zn(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Ka(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Qa(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function Za(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function es(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function ns(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:a}=i,c=r.axis,l=o.axis,u=Ka(r,o,i),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:d,[l]:b}=p,g=p._stacks||(p._stacks={});f=g[l]=Za(s,u,d),f[a]=b,f._top=es(f,o,!0,i.type),f._bottom=es(f,o,!1,i.type);const y=f._visualValues||(f._visualValues={});y[a]=b}}function Vn(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Ja(n,t){return oe(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function tl(n,t,e){return oe(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Me(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const Hn=n=>n==="reset"||n==="none",is=(n,t)=>t?n:Object.assign({},n),el=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Er(e,!0),values:null};class Bt{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=zn(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Me(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,r=e.xAxisID=ot(i.xAxisID,Vn(t,"x")),o=e.yAxisID=ot(i.yAxisID,Vn(t,"y")),a=e.rAxisID=ot(i.rAxisID,Vn(t,"r")),c=e.indexAxis,l=e.iAxisID=s(c,r,o,a),u=e.vAxisID=s(c,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ni(this._data,this),t._stacked&&Me(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(ct(e)){const s=this._cachedMeta;this._data=Ga(e,s)}else if(i!==e){if(i){Ni(i,this);const s=this._cachedMeta;Me(s),s._parsed=[]}e&&Object.isExtensible(e)&&No(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=zn(e.vScale,e),e.stack!==i.stack&&(s=!0,Me(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&(ns(this,e._parsed),e._stacked=zn(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let c=t===0&&e===s.length?!0:i._sorted,l=t>0&&i._parsed[t-1],u,h,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{yt(s[t])?f=this.parseArrayData(i,s,t,e):ct(s[t])?f=this.parseObjectData(i,s,t,e):f=this.parsePrimitiveData(i,s,t,e);const m=()=>h[a]===null||l&&h[a]<l[a];for(u=0;u<e;++u)i._parsed[u+t]=h=f[u],c&&(m()&&(c=!1),l=h);i._sorted=c}o&&ns(this,f)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:o}=t,a=r.axis,c=o.axis,l=r.getLabels(),u=r===o,h=new Array(s);let f,m,p;for(f=0,m=s;f<m;++f)p=f+i,h[f]={[a]:u||r.parse(l[p],p),[c]:o.parse(e[p],p)};return h}parseArrayData(t,e,i,s){const{xScale:r,yScale:o}=t,a=new Array(s);let c,l,u,h;for(c=0,l=s;c<l;++c)u=c+i,h=e[u],a[c]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,e,i,s){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=new Array(s);let u,h,f,m;for(u=0,h=s;u<h;++u)f=u+i,m=e[f],l[u]={x:r.parse(se(m,a),f),y:o.parse(se(m,c),f)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,o=e[t.axis],a={keys:Er(s,!0),values:e._stacks[t.axis]._visualValues};return ts(a,o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let o=r===null?NaN:r;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=ts(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),c=el(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Qa(a);let f,m;function p(){m=s[f];const d=m[a.axis];return!xt(m[t.axis])||u>d||h<d}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(l,t,m,c),r));++f);if(r){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(l,t,m,c);break}}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],xt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Xa(ot(this.options.clip,qa(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(t,r,a,c),u=a;u<a+c;++u){const h=s[u];h.hidden||(h.active&&l?o.push(h):h.draw(t,r))}for(u=0;u<o.length;++u)o[u].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=tl(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Ja(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,a=r[o],c=this.enableOptionSharing&&Ue(i);if(a)return is(a,c);const l=this.chart.config,u=l.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=l.getOptionScopes(this.getDataset(),u),m=Object.keys(vt.elements[t]),p=()=>this.getContext(i,s,e),d=l.resolveNamedOptions(f,m,p,h);return d.$shared&&(d.$shared=c,r[o]=Object.freeze(is(d,c))),d}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let c;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(t,i,e))}const l=new Pr(s,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Hn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,s){Hn(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Hn(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,c,l]of this._syncList)this[a](c,l);this._syncList=[];const s=i.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,o=t+e;let a;const c=l=>{for(l.length+=e,a=l.length-1;a>=o;a--)l[a]=l[a-e]};for(c(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Me(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(Bt,"defaults",{}),J(Bt,"datasetElementType",null),J(Bt,"dataElementType",null);function nl(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,r=e.length;s<r;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=ar(i.sort((s,r)=>s-r))}return n._cache.$bar}function il(n){const t=n.iScale,e=nl(t,n.type);let i=t._length,s,r,o,a;const c=()=>{o===32767||o===-32768||(Ue(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=e.length;s<r;++s)o=t.getPixelForValue(e[s]),c();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),c();return i}function sl(n,t,e,i){const s=e.barThickness;let r,o;return lt(s)?(r=t.min*e.categoryPercentage,o=e.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:t.pixels[n]-r/2}}function rl(n,t,e,i){const s=t.pixels,r=s[n];let o=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const c=e.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const l=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:e.barPercentage,start:l}}function ol(n,t,e,i){const s=e.parse(n[0],i),r=e.parse(n[1],i),o=Math.min(s,r),a=Math.max(s,r);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),t[e.axis]=l,t._custom={barStart:c,barEnd:l,start:s,end:r,min:o,max:a}}function Tr(n,t,e,i){return yt(n)?ol(n,t,e,i):t[e.axis]=e.parse(n,i),t}function ss(n,t,e,i){const s=n.iScale,r=n.vScale,o=s.getLabels(),a=s===r,c=[];let l,u,h,f;for(l=e,u=e+i;l<u;++l)f=t[l],h={},h[s.axis]=a||s.parse(o[l],l),c.push(Tr(f,h,r,l));return c}function Wn(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function al(n,t,e){return n!==0?Wt(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function ll(n){let t,e,i,s,r;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:i,reverse:t,top:s,bottom:r}}function cl(n,t,e,i){let s=t.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:c,top:l,bottom:u}=ll(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=l:(e._bottom||0)===i?s=u:(r[rs(u,o,a,c)]=!0,s=l)),r[rs(s,o,a,c)]=!0,n.borderSkipped=r}function rs(n,t,e,i){return i?(n=ul(n,t,e),n=os(n,e,t)):n=os(n,t,e),n}function ul(n,t,e){return n===t?e:n===e?t:n}function os(n,t,e){return n==="start"?t:n==="end"?e:n}function hl(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class dn extends Bt{parsePrimitiveData(t,e,i,s){return ss(t,e,i,s)}parseArrayData(t,e,i,s){return ss(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,l=r.axis==="x"?a:c,u=o.axis==="x"?a:c,h=[];let f,m,p,d;for(f=i,m=i+s;f<m;++f)d=e[f],p={},p[r.axis]=r.parse(se(d,l),f),h.push(Tr(se(d,u),p,o,f));return h}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,r=this.getParsed(t),o=r._custom,a=Wn(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),l=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,s);for(let m=e;m<e+i;m++){const p=this.getParsed(m),d=r||lt(p[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,u),g=(p._stacks||{})[a.axis],y={horizontal:l,base:d.base,enableBorderRadius:!g||Wn(p._custom)||o===g._top||o===g._bottom,x:l?d.head:b.center,y:l?b.center:d.head,height:l?b.size:Math.abs(d.size),width:l?Math.abs(d.size):b.size};f&&(y.options=h||this.resolveDataElementOptions(m,t[m].active?"active":s));const x=y.options||t[m].options;cl(y,x,g,o),hl(y,x,u.ratio),this.updateElement(t[m],m,y,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),c=a&&a[i.axis],l=u=>{const h=u._parsed.find(m=>m[i.axis]===c),f=h&&h[u.vScale.axis];if(lt(f)||isNaN(f))return!0};for(const u of s)if(!(e!==void 0&&l(u))&&((r===!1||o.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let r,o;for(r=0,o=e.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=t.barThickness;return{min:a||il(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,c=this.getParsed(t),l=c._custom,u=Wn(l);let h=c[e.axis],f=0,m=i?this.applyStack(e,c,i):h,p,d;m!==h&&(f=m-h,m=h),u&&(h=l.barStart,m=l.barEnd-l.barStart,h!==0&&Wt(h)!==Wt(l.barEnd)&&(f=0),f+=h);const b=!lt(r)&&!u?r:f;let g=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(f+m):p=g,d=p-g,Math.abs(d)<o){d=al(d,e,a)*o,h===a&&(g-=d/2);const y=e.getPixelForDecimal(0),x=e.getPixelForDecimal(1),w=Math.min(y,x),C=Math.max(y,x);g=Math.max(Math.min(g,C),w),p=g+d,i&&!u&&(c._stacks[e.axis]._visualValues[s]=e.getValueForPixel(p)-e.getValueForPixel(g))}if(g===e.getPixelForValue(a)){const y=Wt(d)*e.getLineWidthForValue(a)/2;g+=y,d-=y}return{size:d,base:g,head:p,center:p+d/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,r=s.skipNull,o=ot(s.maxBarThickness,1/0);let a,c;if(e.grouped){const l=r?this._getStackCount(t):e.stackCount,u=s.barThickness==="flex"?rl(t,e,s,l):sl(t,e,s,l),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=u.start+u.chunk*h+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(o,e.min*e.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}J(dn,"id","bar"),J(dn,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J(dn,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class pn extends Bt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const r=super.parsePrimitiveData(t,e,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(t,e,i,s){const r=super.parseArrayData(t,e,i,s);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=ot(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(t,e,i,s){const r=super.parseObjectData(t,e,i,s);for(let o=0;o<r.length;o++){const a=e[i+o];r[o]._custom=ot(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y),l=o._custom;return{label:i[t]||"",value:"("+a+", "+c+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:c,includeOptions:l}=this._getSharedOptions(e,s),u=o.axis,h=a.axis;for(let f=e;f<e+i;f++){const m=t[f],p=!r&&this.getParsed(f),d={},b=d[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),g=d[h]=r?a.getBasePixel():a.getPixelForValue(p[h]);d.skip=isNaN(b)||isNaN(g),l&&(d.options=c||this.resolveDataElementOptions(f,m.active?"active":s),r&&(d.options.radius=0)),this.updateElement(m,f,d,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return e!=="active"&&(s.radius=0),s.radius+=ot(i&&i._custom,r),s}}J(pn,"id","bubble"),J(pn,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),J(pn,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function fl(n,t,e){let i=1,s=1,r=0,o=0;if(t<gt){const a=n,c=a+t,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),f=Math.sin(c),m=(x,w,C)=>$e(x,a,c,!0)?1:Math.max(w,w*e,C,C*e),p=(x,w,C)=>$e(x,a,c,!0)?-1:Math.min(w,w*e,C,C*e),d=m(0,l,h),b=m(wt,u,f),g=p(mt,l,h),y=p(mt+wt,u,f);i=(d-g)/2,s=(b-y)/2,r=-(d+g)/2,o=-(b+y)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class pe extends Bt{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=c=>+i[c];if(ct(i[t])){const{key:c="value"}=this._parsing;r=l=>+se(i[l],c)}let o,a;for(o=t,a=t+e;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return It(this.options.rotation-90)}_getCircumference(){return It(this.options.circumference)}_getRotationExtents(){let t=gt,e=-gt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),c=Math.min(So(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:d}=fl(h,u,c),b=(i.width-o)/f,g=(i.height-o)/m,y=Math.max(Math.min(b,g)/2,0),x=nr(this.options.radius,y),w=Math.max(x*c,0),C=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=d*x,s.total=this.calculateTotal(),this.outerRadius=x-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*l,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/gt)}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,l=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=r&&l.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:d,includeOptions:b}=this._getSharedOptions(e,s);let g=this._getRotation(),y;for(y=0;y<e;++y)g+=this._circumference(y,r);for(y=e;y<e+i;++y){const x=this._circumference(y,r),w=t[y],C={x:u+this.offsetX,y:h+this.offsetY,startAngle:g,endAngle:g+x,circumference:x,outerRadius:p,innerRadius:m};b&&(C.options=d||this.resolveDataElementOptions(y,w.active?"active":s)),g+=x,this.updateElement(w,y,C,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?gt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qe(e._parsed[t],i.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,r,o,a,c;if(!t){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)c=a.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(ot(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}J(pe,"id","doughnut"),J(pe,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),J(pe,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),J(pe,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class gn extends Bt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:c}=ur(e,s,o);this._drawStart=a,this._drawCount=c,hr(e)&&(a=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},t),this.updateElements(s,a,c,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,s),f=o.axis,m=a.axis,{spanGaps:p,segment:d}=this.options,b=ke(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||s==="none",y=e+i,x=t.length;let w=e>0&&this.getParsed(e-1);for(let C=0;C<x;++C){const S=t[C],E=g?S:{};if(C<e||C>=y){E.skip=!0;continue}const T=this.getParsed(C),I=lt(T[m]),P=E[f]=o.getPixelForValue(T[f],C),R=E[m]=r||I?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,T,c):T[m],C);E.skip=isNaN(P)||isNaN(R)||I,E.stop=C>0&&Math.abs(T[f]-w[f])>b,d&&(E.parsed=T,E.raw=l.data[C]),h&&(E.options=u||this.resolveDataElementOptions(C,S.active?"active":s)),g||this.updateElement(S,C,E,s),w=T}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}J(gn,"id","line"),J(gn,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),J(gn,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ve extends Bt{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Qe(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:r}}parseObjectData(t,e,i,s){return yr.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){const r=s==="reset",o=this.chart,c=o.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,h=l.yCenter,f=l.getIndexAngle(0)-.5*mt;let m=f,p;const d=360/this.countVisibleElements();for(p=0;p<e;++p)m+=this._computeAngle(p,s,d);for(p=e;p<e+i;p++){const b=t[p];let g=m,y=m+this._computeAngle(p,s,d),x=o.getDataVisibility(p)?l.getDistanceFromCenterForValue(this.getParsed(p).r):0;m=y,r&&(c.animateScale&&(x=0),c.animateRotate&&(g=y=f));const w={x:u,y:h,innerRadius:0,outerRadius:x,startAngle:g,endAngle:y,options:this.resolveDataElementOptions(p,b.active?"active":s)};this.updateElement(b,p,w,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?It(this.resolveDataElementOptions(t,e).angle||i):0}}J(Ve,"id","polarArea"),J(Ve,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),J(Ve,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((r,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class ei extends pe{}J(ei,"id","pie"),J(ei,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class mn extends Bt{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return yr.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],r=e.iScale.getLabels();if(i.points=s,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=e;a<e+i;a++){const c=t[a],l=this.resolveDataElementOptions(a,c.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),h=o?r.xCenter:u.x,f=o?r.yCenter:u.y,m={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:l};this.updateElement(c,a,m,s)}}}J(mn,"id","radar"),J(mn,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),J(mn,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class _n extends Bt{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=e,o=this.getParsed(t),a=s.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+c+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:r,count:o}=ur(e,i,s);if(this._drawStart=r,this._drawCount=o,hr(e)&&(r=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:c}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!c._decimated,a.points=i;const l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:l},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(e,s),h=this.getSharedOptions(u),f=this.includeOptions(s,h),m=o.axis,p=a.axis,{spanGaps:d,segment:b}=this.options,g=ke(d)?d:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none";let x=e>0&&this.getParsed(e-1);for(let w=e;w<e+i;++w){const C=t[w],S=this.getParsed(w),E=y?C:{},T=lt(S[p]),I=E[m]=o.getPixelForValue(S[m],w),P=E[p]=r||T?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,S,c):S[p],w);E.skip=isNaN(I)||isNaN(P)||T,E.stop=w>0&&Math.abs(S[m]-x[m])>g,b&&(E.parsed=S,E.raw=l.data[w]),f&&(E.options=h||this.resolveDataElementOptions(w,C.active?"active":s)),y||this.updateElement(C,w,E,s),x=S}this.updateSharedOptions(h,s,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let c=e.length-1;c>=0;--c)a=Math.max(a,e[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,r,o)/2}}J(_n,"id","scatter"),J(_n,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),J(_n,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var dl=Object.freeze({__proto__:null,BarController:dn,BubbleController:pn,DoughnutController:pe,LineController:gn,PieController:ei,PolarAreaController:Ve,RadarController:mn,ScatterController:_n});function ue(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Pi{constructor(t){J(this,"options");this.options=t||{}}static override(t){Object.assign(Pi.prototype,t)}init(){}formats(){return ue()}parse(){return ue()}format(){return ue()}add(){return ue()}diff(){return ue()}startOf(){return ue()}endOf(){return ue()}}var pl={_date:Pi};function gl(n,t,e,i){const{controller:s,data:r,_sorted:o}=n,a=s._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const l=a._reversePixels?Io:Kt;if(i){if(s._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){const f=l(r,t,e-h),m=l(r,t,e+h);return{lo:f.lo,hi:m.hi}}}}else{const u=l(r,t,e);if(c){const{vScale:h}=s._cachedMeta,{_parsed:f}=n,m=f.slice(0,u.lo+1).reverse().findIndex(d=>!lt(d[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(d=>!lt(d[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function Dn(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,c=r.length;a<c;++a){const{index:l,data:u}=r[a],{lo:h,hi:f}=gl(r[a],t,o,s);for(let m=h;m<=f;++m){const p=u[m];p.skip||i(p,l,m)}}}function ml(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,o=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Un(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||Dn(n,e,t,function(a,c,l){!s&&!Qt(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&r.push({element:a,datasetIndex:c,index:l})},!0),r}function _l(n,t,e,i){let s=[];function r(o,a,c){const{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=rr(o,{x:t.x,y:t.y});$e(h,l,u)&&s.push({element:o,datasetIndex:a,index:c})}return Dn(n,e,t,r),s}function bl(n,t,e,i,s,r){let o=[];const a=ml(e);let c=Number.POSITIVE_INFINITY;function l(u,h,f){const m=u.inRange(t.x,t.y,s);if(i&&!m)return;const p=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(p))&&!m)return;const b=a(t,p);b<c?(o=[{element:u,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:u,datasetIndex:h,index:f})}return Dn(n,e,t,l),o}function $n(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?_l(n,t,e,s):bl(n,t,e,i,s,r)}function as(n,t,e,i,s){const r=[],o=e==="x"?"inXRange":"inYRange";let a=!1;return Dn(n,e,t,(c,l,u)=>{c[o]&&c[o](t[e],s)&&(r.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(t.x,t.y,s))}),i&&!a?[]:r}var yl={modes:{index(n,t,e,i){const s=fe(t,n),r=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Un(n,s,r,i,o):$n(n,s,r,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{const u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(n,t,e,i){const s=fe(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;let a=e.intersect?Un(n,s,r,i,o):$n(n,s,r,!1,i,o);if(a.length>0){const c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,t,e,i){const s=fe(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return Un(n,s,r,i,o)},nearest(n,t,e,i){const s=fe(t,n),r=e.axis||"xy",o=e.includeInvisible||!1;return $n(n,s,r,e.intersect,i,o)},x(n,t,e,i){const s=fe(t,n);return as(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=fe(t,n);return as(n,s,"y",e.intersect,i)}}};const Or=["left","top","right","bottom"];function Pe(n,t){return n.filter(e=>e.pos===t)}function ls(n,t){return n.filter(e=>Or.indexOf(e.pos)===-1&&e.box.axis===t)}function Ee(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function vl(n){const t=[];let e,i,s,r,o,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function xl(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!Or.includes(s))continue;const o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function wl(n,t){const e=xl(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,o,a;for(r=0,o=n.length;r<o;++r){a=n[r];const{fullSize:c}=a.box,l=e[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&t.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:c&&t.availableHeight)}return e}function kl(n){const t=vl(n),e=Ee(t.filter(l=>l.box.fullSize),!0),i=Ee(Pe(t,"left"),!0),s=Ee(Pe(t,"right")),r=Ee(Pe(t,"top"),!0),o=Ee(Pe(t,"bottom")),a=ls(t,"x"),c=ls(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:Pe(t,"chartArea"),vertical:i.concat(s).concat(c),horizontal:r.concat(o).concat(a)}}function cs(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Rr(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Sl(n,t,e,i){const{pos:s,box:r}=e,o=n.maxPadding;if(!ct(s)){e.size&&(n[s]-=e.size);const h=i[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?r.height:r.width),e.size=h.size/h.count,n[s]+=e.size}r.getPadding&&Rr(o,r.getPadding());const a=Math.max(0,t.outerWidth-cs(o,n,"left","right")),c=Math.max(0,t.outerHeight-cs(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,e.horizontal?{same:l,other:u}:{same:u,other:l}}function Cl(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Ml(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return i(n?["left","right"]:["top","bottom"])}function Le(n,t,e,i){const s=[];let r,o,a,c,l,u;for(r=0,o=n.length,l=0;r<o;++r){a=n[r],c=a.box,c.update(a.width||t.w,a.height||t.h,Ml(a.horizontal,t));const{same:h,other:f}=Sl(t,e,a,i);l|=h&&s.length,u=u||f,c.fullSize||s.push(a)}return l&&Le(s,t,e,i)||u}function on(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function us(n,t,e,i){const s=e.padding;let{x:r,y:o}=t;for(const a of n){const c=a.box,l=i[a.stack]||{placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){const h=t.w*u,f=l.size||c.height;Ue(l.start)&&(o=l.start),c.fullSize?on(c,s.left,o,e.outerWidth-s.right-s.left,f):on(c,t.left+l.placed,o,h,f),l.start=o,l.placed+=h,o=c.bottom}else{const h=t.h*u,f=l.size||c.width;Ue(l.start)&&(r=l.start),c.fullSize?on(c,r,s.top,f,e.outerHeight-s.bottom-s.top):on(c,r,t.top+l.placed,f,h),l.start=r,l.placed+=h,r=c.right}}t.x=r,t.y=o}var Et={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Tt(n.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),a=kl(n.boxes),c=a.vertical,l=a.horizontal;ft(n.boxes,d=>{typeof d.beforeLayout=="function"&&d.beforeLayout()});const u=c.reduce((d,b)=>b.box.options&&b.box.options.display===!1?d:d+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},s);Rr(f,Tt(i));const m=Object.assign({maxPadding:f,w:r,h:o,x:s.left,y:s.top},s),p=wl(c.concat(l),h);Le(a.fullSize,m,h,p),Le(c,m,h,p),Le(l,m,h,p)&&Le(c,m,h,p),Cl(m),us(a.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,us(a.rightAndBottom,m,h,p),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ft(a.chartArea,d=>{const b=d.box;Object.assign(b,n.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Ar{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Pl extends Ar{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const bn="$chartjs",El={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hs=n=>n===null||n==="";function Tl(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[bn]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",hs(s)){const r=Xi(n,"width");r!==void 0&&(n.width=r)}if(hs(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=Xi(n,"height");r!==void 0&&(n.height=r)}return n}const Lr=Oa?{passive:!0}:!1;function Ol(n,t,e){n&&n.addEventListener(t,e,Lr)}function Rl(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Lr)}function Al(n,t){const e=El[n.type]||n.type,{x:i,y:s}=fe(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Pn(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Ll(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Pn(a.addedNodes,i),o=o&&!Pn(a.removedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Dl(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Pn(a.removedNodes,i),o=o&&!Pn(a.addedNodes,i);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const qe=new Map;let fs=0;function Dr(){const n=window.devicePixelRatio;n!==fs&&(fs=n,qe.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Fl(n,t){qe.size||window.addEventListener("resize",Dr),qe.set(n,t)}function jl(n){qe.delete(n),qe.size||window.removeEventListener("resize",Dr)}function Il(n,t,e){const i=n.canvas,s=i&&Mi(i);if(!s)return;const r=cr((a,c)=>{const l=s.clientWidth;e(a,c),l<s.clientWidth&&e()},window),o=new ResizeObserver(a=>{const c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||r(l,u)});return o.observe(s),Fl(n,r),o}function Yn(n,t,e){e&&e.disconnect(),t==="resize"&&jl(n)}function Bl(n,t,e){const i=n.canvas,s=cr(r=>{n.ctx!==null&&e(Al(r,n))},n);return Ol(i,t,s),s}class Nl extends Ar{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Tl(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[bn])return!1;const i=e[bn].initial;["height","width"].forEach(r=>{const o=i[r];lt(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[bn],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:Ll,detach:Dl,resize:Il}[e]||Bl;s[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Yn,detach:Yn,resize:Yn}[e]||Rl)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return Ta(t,e,i,s)}isAttached(t){const e=t&&Mi(t);return!!(e&&e.isConnected)}}function zl(n){return!Ci()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Pl:Nl}class Nt{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ke(this.x)&&ke(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}J(Nt,"defaults",{}),J(Nt,"defaultRoutes");function Vl(n,t){const e=n.options.ticks,i=Hl(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?Ul(t):[],o=r.length,a=r[0],c=r[o-1],l=[];if(o>s)return $l(t,l,r,o/s),l;const u=Wl(r,t,s);if(o>0){let h,f;const m=o>1?Math.round((c-a)/(o-1)):null;for(an(t,l,u,lt(m)?0:a-m,a),h=0,f=o-1;h<f;h++)an(t,l,u,r[h],r[h+1]);return an(t,l,u,c,lt(m)?t.length:c+m),l}return an(t,l,u),l}function Hl(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function Wl(n,t,e){const i=Yl(n),s=t.length/e;if(!i)return Math.max(s,1);const r=Ao(i);for(let o=0,a=r.length-1;o<a;o++){const c=r[o];if(c>s)return c}return Math.max(s,1)}function Ul(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function $l(n,t,e,i){let s=0,r=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===r&&(t.push(n[o]),s++,r=e[s*i])}function an(n,t,e,i,s){const r=ot(i,0),o=Math.min(ot(s,n.length),n.length);let a=0,c,l,u;for(e=Math.ceil(e),s&&(c=s-i,e=c/Math.floor(c/e)),u=r;u<0;)a++,u=Math.round(r+a*e);for(l=Math.max(r,0);l<o;l++)l===u&&(t.push(n[l]),a++,u=Math.round(r+a*e))}function Yl(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const ql=n=>n==="left"?"right":n==="right"?"left":n,ds=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,ps=(n,t)=>Math.min(t||n,n);function gs(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function Xl(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,o=n._endPixel,a=1e-6;let c=n.getPixelForTick(s),l;if(!(e&&(i===1?l=Math.max(c-r,o-c):t===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<r-a||c>o+a)))return c}function Gl(n,t){ft(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function Te(n){return n.drawTicks?n.tickLength:0}function ms(n,t){if(!n.display)return 0;const e=St(n.font,t),i=Tt(n.padding);return(yt(n.text)?n.text.length:1)*e.lineHeight+i.height}function Kl(n,t){return oe(n,{scale:t,type:"scale"})}function Ql(n,t,e){return oe(n,{tick:e,index:t,type:"tick"})}function Zl(n,t,e){let i=yi(n);return(e&&t!=="right"||!e&&t==="right")&&(i=ql(i)),i}function Jl(n,t,e,i){const{top:s,left:r,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c;let h=0,f,m,p;const d=o-s,b=a-r;if(n.isHorizontal()){if(m=Pt(i,r,a),ct(e)){const g=Object.keys(e)[0],y=e[g];p=u[g].getPixelForValue(y)+d-t}else e==="center"?p=(l.bottom+l.top)/2+d-t:p=ds(n,e,t);f=a-r}else{if(ct(e)){const g=Object.keys(e)[0],y=e[g];m=u[g].getPixelForValue(y)-b+t}else e==="center"?m=(l.left+l.right)/2-b+t:m=ds(n,e,t);p=Pt(i,o,s),h=e==="left"?-wt:wt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class ye extends Nt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=At(t,Number.POSITIVE_INFINITY),e=At(e,Number.NEGATIVE_INFINITY),i=At(i,Number.POSITIVE_INFINITY),s=At(s,Number.NEGATIVE_INFINITY),{min:At(t,i),max:At(e,s),minDefined:xt(t),maxDefined:xt(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(i=Math.max(i,o.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:At(e,At(i,e)),max:At(i,At(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=aa(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?gs(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Vl(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),pt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=pt(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=ps(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,a,c,l;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Ct(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:m/(i-1),h+6>a&&(a=m/(i-(t.offset?.5:1)),c=this.maxHeight-Te(t.grid)-e.padding-ms(t.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),o=_i(Math.min(Math.asin(Ct((u.highest.height+6)/a,-1,1)),Math.asin(Ct(c/l,-1,1))-Math.asin(Ct(f/l,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=ms(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=Te(r)+c):(t.height=this.maxHeight,t.width=Te(r)+c),i.display&&this.ticks.length){const{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),m=i.padding*2,p=It(this.labelRotation),d=Math.cos(p),b=Math.sin(p);if(a){const g=i.mirror?0:b*h.width+d*f.height;t.height=Math.min(this.maxHeight,t.height+g+m)}else{const g=i.mirror?0:d*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+g+m)}this._calculatePadding(l,u,b,d)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?l?(f=s*t.width,m=i*e.height):(f=i*t.height,m=s*e.width):r==="start"?m=e.width:r==="end"?f=t.width:r!=="inner"&&(f=t.width/2,m=e.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=e.height/2,h=t.height/2;r==="start"?(u=0,h=t.height):r==="end"&&(u=e.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)lt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=gs(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(e/ps(e,i));let l=0,u=0,h,f,m,p,d,b,g,y,x,w,C;for(h=0;h<e;h+=c){if(p=t[h].label,d=this._resolveTickFontOptions(h),s.font=b=d.string,g=r[b]=r[b]||{data:{},gc:[]},y=d.lineHeight,x=w=0,!lt(p)&&!yt(p))x=Cn(s,g.data,g.gc,x,p),w=y;else if(yt(p))for(f=0,m=p.length;f<m;++f)C=p[f],!lt(C)&&!yt(C)&&(x=Cn(s,g.data,g.gc,x,C),w+=y);o.push(x),a.push(w),l=Math.max(x,l),u=Math.max(w,u)}Gl(r,e);const S=o.indexOf(l),E=a.indexOf(u),T=I=>({width:o[I]||0,height:a[I]||0});return{first:T(0),last:T(e-1),widest:T(S),highest:T(E),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return jo(this._alignToPixels?ce(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Ql(this.getContext(),t,i))}return this.$context||(this.$context=Kl(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=It(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*i>a*s?a/i:c/s:c*s<a*i?c/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,c=r.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Te(r),m=[],p=a.setContext(this.getContext()),d=p.display?p.width:0,b=d/2,g=function($){return ce(i,$,d)};let y,x,w,C,S,E,T,I,P,R,D,H;if(o==="top")y=g(this.bottom),E=this.bottom-f,I=y-b,R=g(t.top)+b,H=t.bottom;else if(o==="bottom")y=g(this.top),R=t.top,H=g(t.bottom)-b,E=y+b,I=this.top+f;else if(o==="left")y=g(this.right),S=this.right-f,T=y-b,P=g(t.left)+b,D=t.right;else if(o==="right")y=g(this.left),P=t.left,D=g(t.right)-b,S=y+b,T=this.left+f;else if(e==="x"){if(o==="center")y=g((t.top+t.bottom)/2+.5);else if(ct(o)){const $=Object.keys(o)[0],U=o[$];y=g(this.chart.scales[$].getPixelForValue(U))}R=t.top,H=t.bottom,E=y+b,I=E+f}else if(e==="y"){if(o==="center")y=g((t.left+t.right)/2);else if(ct(o)){const $=Object.keys(o)[0],U=o[$];y=g(this.chart.scales[$].getPixelForValue(U))}S=y-b,T=S-f,P=t.left,D=t.right}const B=ot(s.ticks.maxTicksLimit,h),V=Math.max(1,Math.ceil(h/B));for(x=0;x<h;x+=V){const $=this.getContext(x),U=r.setContext($),K=a.setContext($),L=U.lineWidth,O=U.color,A=K.dash||[],Y=K.dashOffset,M=U.tickWidth,N=U.tickColor,q=U.tickBorderDash||[],X=U.tickBorderDashOffset;w=Xl(this,x,c),w!==void 0&&(C=ce(i,w,L),l?S=T=P=D=C:E=I=R=H=C,m.push({tx1:S,ty1:E,tx2:T,ty2:I,x1:P,y1:R,x2:D,y2:H,width:L,color:O,borderDash:A,borderDashOffset:Y,tickWidth:M,tickColor:N,tickBorderDash:q,tickBorderDashOffset:X}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=r,f=Te(i.grid),m=f+u,p=h?-u:m,d=-It(this.labelRotation),b=[];let g,y,x,w,C,S,E,T,I,P,R,D,H="middle";if(s==="top")S=this.bottom-p,E=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+p,E=this._getXAxisLabelAlignment();else if(s==="left"){const V=this._getYAxisLabelAlignment(f);E=V.textAlign,C=V.x}else if(s==="right"){const V=this._getYAxisLabelAlignment(f);E=V.textAlign,C=V.x}else if(e==="x"){if(s==="center")S=(t.top+t.bottom)/2+m;else if(ct(s)){const V=Object.keys(s)[0],$=s[V];S=this.chart.scales[V].getPixelForValue($)+m}E=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")C=(t.left+t.right)/2-m;else if(ct(s)){const V=Object.keys(s)[0],$=s[V];C=this.chart.scales[V].getPixelForValue($)}E=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(c==="start"?H="top":c==="end"&&(H="bottom"));const B=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){x=a[g],w=x.label;const V=r.setContext(this.getContext(g));T=this.getPixelForTick(g)+r.labelOffset,I=this._resolveTickFontOptions(g),P=I.lineHeight,R=yt(w)?w.length:1;const $=R/2,U=V.color,K=V.textStrokeColor,L=V.textStrokeWidth;let O=E;o?(C=T,E==="inner"&&(g===y-1?O=this.options.reverse?"left":"right":g===0?O=this.options.reverse?"right":"left":O="center"),s==="top"?l==="near"||d!==0?D=-R*P+P/2:l==="center"?D=-B.highest.height/2-$*P+P:D=-B.highest.height+P/2:l==="near"||d!==0?D=P/2:l==="center"?D=B.highest.height/2-$*P:D=B.highest.height-R*P,h&&(D*=-1),d!==0&&!V.showLabelBackdrop&&(C+=P/2*Math.sin(d))):(S=T,D=(1-R)*P/2);let A;if(V.showLabelBackdrop){const Y=Tt(V.backdropPadding),M=B.heights[g],N=B.widths[g];let q=D-Y.top,X=0-Y.left;switch(H){case"middle":q-=M/2;break;case"bottom":q-=M;break}switch(E){case"center":X-=N/2;break;case"right":X-=N;break;case"inner":g===y-1?X-=N:g>0&&(X-=N/2);break}A={left:X,top:q,width:N+Y.width,height:M+Y.height,color:V.backdropColor}}b.push({label:w,font:I,textOffset:D,options:{rotation:d,color:U,strokeColor:K,strokeWidth:L,textAlign:O,textBaseline:H,translation:[C,S],backdrop:A}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-It(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,c=o.widest.width;let l,u;return e==="left"?s?(u=this.right+r,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):e==="right"?s?(u=this.left+r,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const c=s[r];e.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let l,u,h,f;this.isHorizontal()?(l=ce(t,this.left,o)-o/2,u=ce(t,this.right,a)+a/2,h=f=c):(h=ce(t,this.top,o)-o/2,f=ce(t,this.bottom,a)+a/2,l=u=c),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,h),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Rn(i,s);const r=this.getLabelItems(t);for(const o of r){const a=o.options,c=o.font,l=o.label,u=o.textOffset;be(i,l,0,u,c,a)}s&&An(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=St(i.font),o=Tt(i.padding),a=i.align;let c=r.lineHeight/2;e==="bottom"||e==="center"||ct(e)?(c+=o.bottom,yt(i.text)&&(c+=r.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:l,titleY:u,maxWidth:h,rotation:f}=Jl(this,c,e,a);be(t,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:f,textAlign:Zl(a,e,s),textBaseline:"middle",translation:[l,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ot(t.grid&&t.grid.z,-1),s=ot(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ye.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const a=e[r];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return St(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ln{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;nc(e)&&(i=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,tc(t,o,i),this.override&&vt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in vt[s]&&(delete vt[s][i],this.override&&delete _e[i])}}function tc(n,t,e){const i=We(Object.create(null),[e?vt.get(e):{},vt.get(t),n.defaults]);vt.set(t,i),n.defaultRoutes&&ec(t,n.defaultRoutes),n.descriptors&&vt.describe(t,n.descriptors)}function ec(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),c=o.join(".");vt.route(r,s,c,a)})}function nc(n){return"id"in n&&"defaults"in n}class ic{constructor(){this.controllers=new ln(Bt,"datasets",!0),this.elements=new ln(Nt,"elements"),this.plugins=new ln(Object,"plugins"),this.scales=new ln(ye,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):ft(s,o=>{const a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){const s=mi(t);pt(i["before"+s],[],i),e[t](i),pt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Ht=new ic;class sc{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const r of t){const o=r.plugin,a=o[i],c=[e,s,r.options];if(pt(a,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=ot(i.options&&i.options.plugins,{}),r=rc(i);return s===!1&&!e?[]:ac(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function rc(n){const t={},e=[],i=Object.keys(Ht.plugins.items);for(let r=0;r<i.length;r++)e.push(Ht.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function oc(n,t){return!t&&n===!1?null:n===!0?{}:n}function ac(n,{plugins:t,localIds:e},i,s){const r=[],o=n.getContext();for(const a of t){const c=a.id,l=oc(i[c],s);l!==null&&r.push({plugin:a,options:lc(n.config,{plugin:a,local:e[c]},l,o)})}return r}function lc(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),o=n.getOptionScopes(i,r);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ni(n,t){const e=vt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function cc(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function uc(n,t){return n===t?"_index_":"_value_"}function _s(n){if(n==="x"||n==="y"||n==="r")return n}function hc(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ii(n,...t){if(_s(n))return n;for(const e of t){const i=e.axis||hc(e.position)||n.length>1&&_s(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function bs(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function fc(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return bs(n,"x",e[0])||bs(n,"y",e[0])}return{}}function dc(n,t){const e=_e[n.type]||{scales:{}},i=t.scales||{},s=ni(n.type,t),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ct(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=ii(o,a,fc(o,n),vt.scales[a.type]),l=uc(c,s),u=e.scales||{};r[o]=Ie(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,c=o.indexAxis||ni(a,t),u=(_e[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=cc(h,c),m=o[f+"AxisID"]||f;r[m]=r[m]||Object.create(null),Ie(r[m],[{axis:f},i[m],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Ie(a,[vt.scales[a.type],vt.scale])}),r}function Fr(n){const t=n.options||(n.options={});t.plugins=ot(t.plugins,{}),t.scales=dc(n,t)}function jr(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function pc(n){return n=n||{},n.data=jr(n.data),Fr(n),n}const ys=new Map,Ir=new Set;function cn(n,t){let e=ys.get(n);return e||(e=t(),ys.set(n,e),Ir.add(e)),e}const Oe=(n,t,e)=>{const i=se(t,e);i!==void 0&&n.add(i)};class gc{constructor(t){this._config=pc(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Fr(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return cn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return cn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return cn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return cn(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const c=new Set;e.forEach(u=>{t&&(c.add(t),u.forEach(h=>Oe(c,t,h))),u.forEach(h=>Oe(c,s,h)),u.forEach(h=>Oe(c,_e[r]||{},h)),u.forEach(h=>Oe(c,vt,h)),u.forEach(h=>Oe(c,Jn,h))});const l=Array.from(c);return l.length===0&&l.push(Object.create(null)),Ir.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,_e[e]||{},vt.datasets[e]||{},{type:e},vt,Jn]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=vs(this._resolverCache,t,s);let c=o;if(_c(o,e)){r.$shared=!1,i=re(i)?i():i;const l=this.createResolver(t,i,a);c=Se(o,i,l)}for(const l of e)r[l]=c[l];return r}createResolver(t,e,i=[""],s){const{resolver:r}=vs(this._resolverCache,t,i);return ct(e)?Se(r,e,void 0,s):r}}function vs(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:wi(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const mc=n=>ct(n)&&Object.getOwnPropertyNames(n).some(t=>re(n[t]));function _c(n,t){const{isScriptable:e,isIndexable:i}=gr(n);for(const s of t){const r=e(s),o=i(s),a=(o||r)&&n[s];if(r&&(re(a)||mc(a))||o&&yt(a))return!0}return!1}var bc="4.4.9";const yc=["top","bottom","left","right","chartArea"];function xs(n,t){return n==="top"||n==="bottom"||yc.indexOf(n)===-1&&t==="x"}function ws(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function ks(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),pt(e&&e.onComplete,[n],t)}function vc(n){const t=n.chart,e=t.options.animation;pt(e&&e.onProgress,[n],t)}function Br(n){return Ci()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const yn={},Ss=n=>{const t=Br(n);return Object.values(yn).filter(e=>e.canvas===t).pop()};function xc(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const o=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=o)}}}function wc(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class Xt{static register(...t){Ht.add(...t),Cs()}static unregister(...t){Ht.remove(...t),Cs()}constructor(t,e){const i=this.config=new gc(e),s=Br(t),r=Ss(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||zl(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),c=a&&a.canvas,l=c&&c.height,u=c&&c.width;if(this.id=ko(),this.ctx=a,this.canvas=c,this.width=u,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=zo(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],yn[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}$t.listen(this,"complete",ks),$t.listen(this,"progress",vc),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return lt(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ht}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ui(this.canvas,this.ctx),this}stop(){return $t.stop(this),this}resize(t,e){$t.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,qi(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),pt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ft(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const a=e[o],c=ii(o,a),l=c==="r",u=c==="x";return{options:a,dposition:l?"chartArea":u?"bottom":"left",dtype:l?"radialLinear":u?"category":"linear"}}))),ft(r,o=>{const a=o.options,c=a.id,l=ii(c,a),u=ot(a.type,o.dtype);(a.position===void 0||xs(a.position,l)!==xs(o.dposition))&&(a.position=o.dposition),s[c]=!0;let h=null;if(c in i&&i[c].type===u)h=i[c];else{const f=Ht.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,t)}),ft(s,(o,a)=>{o||delete i[a]}),ft(i,o=>{Et.configure(this,o,o.options),Et.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(ws("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||ni(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const c=Ht.getController(a),{datasetElementType:l,dataElementType:u}=vt.datasets[a];Object.assign(c,{dataElementType:Ht.getElement(u),datasetElementType:l&&Ht.getElement(l)}),o.controller=new c(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){ft(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,u=this.data.datasets.length;l<u;l++){const{controller:h}=this.getDatasetMeta(l),f=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ft(r,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ws("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ft(this.scales,t=>{Et.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Fi(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const o=i==="_removeElements"?-r:r;xc(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!Fi(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Et.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ft(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,re(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($t.has(this)?this.attached&&!$t.running(this)&&$t.start(this):(this.draw(),ks({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=Mr(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Rn(e,s),t.controller.draw(),s&&An(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Qt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=yl.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=oe(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);Ue(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),$t.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ui(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete yn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ft(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(c,l)=>{e.addEventListener(this,c,l),t[c]=l},s=(c,l)=>{t[c]&&(e.removeEventListener(this,c,l),delete t[c])},r=(c,l)=>{this.canvas&&this.resize(c,l)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){ft(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ft(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,o,a,c;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,c=t.length;a<c;++a){o=t[a];const l=o&&this.getDatasetMeta(o.datasetIndex).controller;l&&l[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!wn(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(c,l)=>c.filter(u=>!l.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(e,t),a=i?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,o=e,a=this._getActiveElements(t,s,i,o),c=To(t),l=wc(t,this._lastEvent,i,c);i&&(this._lastEvent=null,pt(r.onHover,[t,a,this],this),c&&pt(r.onClick,[t,a,this],this));const u=!wn(a,s);return(u||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=l,u}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}J(Xt,"defaults",vt),J(Xt,"instances",yn),J(Xt,"overrides",_e),J(Xt,"registry",Ht),J(Xt,"version",bc),J(Xt,"getChart",Ss);function Cs(){return ft(Xt.instances,n=>n._plugins.invalidate())}function kc(n,t,e){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:c}=t;let l=s/a;n.beginPath(),n.arc(r,o,a,i-l,e+l),c>s?(l=s/c,n.arc(r,o,c,e+l,i-l,!0)):n.arc(r,o,s,e+wt,i-wt),n.closePath(),n.clip()}function Sc(n){return xi(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Cc(n,t,e,i){const s=Sc(n.options.borderRadius),r=(e-t)/2,o=Math.min(r,i*t/2),a=c=>{const l=(e-Math.min(r,c))*i/2;return Ct(c,0,Math.min(r,l))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ct(s.innerStart,0,o),innerEnd:Ct(s.innerEnd,0,o)}}function xe(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function En(n,t,e,i,s,r){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=t,h=Math.max(t.outerRadius+i+e-l,0),f=u>0?u+i+e+l:0;let m=0;const p=s-c;if(i){const V=u>0?u-i:0,$=h>0?h-i:0,U=(V+$)/2,K=U!==0?p*U/(U+i):p;m=(p-K)/2}const d=Math.max(.001,p*h-e/mt)/h,b=(p-d)/2,g=c+b+m,y=s-b-m,{outerStart:x,outerEnd:w,innerStart:C,innerEnd:S}=Cc(t,f,h,y-g),E=h-x,T=h-w,I=g+x/E,P=y-w/T,R=f+C,D=f+S,H=g+C/R,B=y-S/D;if(n.beginPath(),r){const V=(I+P)/2;if(n.arc(o,a,h,I,V),n.arc(o,a,h,V,P),w>0){const L=xe(T,P,o,a);n.arc(L.x,L.y,w,P,y+wt)}const $=xe(D,y,o,a);if(n.lineTo($.x,$.y),S>0){const L=xe(D,B,o,a);n.arc(L.x,L.y,S,y+wt,B+Math.PI)}const U=(y-S/f+(g+C/f))/2;if(n.arc(o,a,f,y-S/f,U,!0),n.arc(o,a,f,U,g+C/f,!0),C>0){const L=xe(R,H,o,a);n.arc(L.x,L.y,C,H+Math.PI,g-wt)}const K=xe(E,g,o,a);if(n.lineTo(K.x,K.y),x>0){const L=xe(E,I,o,a);n.arc(L.x,L.y,x,g-wt,I)}}else{n.moveTo(o,a);const V=Math.cos(I)*h+o,$=Math.sin(I)*h+a;n.lineTo(V,$);const U=Math.cos(P)*h+o,K=Math.sin(P)*h+a;n.lineTo(U,K)}n.closePath()}function Mc(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a}=t;let c=t.endAngle;if(r){En(n,t,e,i,c,s);for(let l=0;l<r;++l)n.fill();isNaN(a)||(c=o+(a%gt||gt))}return En(n,t,e,i,c,s),n.fill(),c}function Pc(n,t,e,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:c}=t,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=c,m=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,m?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let p=t.endAngle;if(r){En(n,t,e,i,p,s);for(let d=0;d<r;++d)n.stroke();isNaN(a)||(p=o+(a%gt||gt))}m&&kc(n,t,p),r||(En(n,t,e,i,p,s),n.stroke())}class De extends Nt{constructor(e){super();J(this,"circumference");J(this,"endAngle");J(this,"fullCircles");J(this,"innerRadius");J(this,"outerRadius");J(this,"pixelMargin");J(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.getProps(["x","y"],s),{angle:o,distance:a}=rr(r,{x:e,y:i}),{startAngle:c,endAngle:l,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,p=ot(f,l-c),d=$e(o,c,l)&&c!==l,b=p>=gt||d,g=Gt(a,u+m,h+m);return b&&g}getCenterPoint(e){const{x:i,y:s,startAngle:r,endAngle:o,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:u}=this.options,h=(r+o)/2,f=(a+c+u+l)/2;return{x:i+Math.cos(h)*f,y:s+Math.sin(h)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,r=(i.offset||0)/4,o=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>gt?Math.floor(s/gt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*r,Math.sin(c)*r);const l=1-Math.sin(Math.min(mt,s||0)),u=r*l;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,Mc(e,this,u,o,a),Pc(e,this,u,o,a),e.restore()}}J(De,"id","arc"),J(De,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),J(De,"defaultRoutes",{backgroundColor:"backgroundColor"}),J(De,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Nr(n,t,e=t){n.lineCap=ot(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ot(e.borderDash,t.borderDash)),n.lineDashOffset=ot(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ot(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ot(e.borderWidth,t.borderWidth),n.strokeStyle=ot(e.borderColor,t.borderColor)}function Ec(n,t,e){n.lineTo(e.x,e.y)}function Tc(n){return n.stepped?Zo:n.tension||n.cubicInterpolationMode==="monotone"?Jo:Ec}function zr(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:o,end:a}=t,c=Math.max(s,o),l=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:c,loop:t.loop,ilen:l<c&&!u?i+l-c:l-c}}function Oc(n,t,e,i){const{points:s,options:r}=t,{count:o,start:a,loop:c,ilen:l}=zr(s,e,i),u=Tc(r);let{move:h=!0,reverse:f}=i||{},m,p,d;for(m=0;m<=l;++m)p=s[(a+(f?l-m:m))%o],!p.skip&&(h?(n.moveTo(p.x,p.y),h=!1):u(n,d,p,f,r.stepped),d=p);return c&&(p=s[(a+(f?l:0))%o],u(n,d,p,f,r.stepped)),!!c}function Rc(n,t,e,i){const s=t.points,{count:r,start:o,ilen:a}=zr(s,e,i),{move:c=!0,reverse:l}=i||{};let u=0,h=0,f,m,p,d,b,g;const y=w=>(o+(l?a-w:w))%r,x=()=>{d!==b&&(n.lineTo(u,b),n.lineTo(u,d),n.lineTo(u,g))};for(c&&(m=s[y(0)],n.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=s[y(f)],m.skip)continue;const w=m.x,C=m.y,S=w|0;S===p?(C<d?d=C:C>b&&(b=C),u=(h*u+w)/++h):(x(),n.lineTo(w,C),p=S,h=0,d=b=C),g=C}x()}function si(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Rc:Oc}function Ac(n){return n.stepped?Ra:n.tension||n.cubicInterpolationMode==="monotone"?Aa:de}function Lc(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),Nr(n,t.options),n.stroke(s)}function Dc(n,t,e,i){const{segments:s,options:r}=t,o=si(t);for(const a of s)Nr(n,r,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const Fc=typeof Path2D=="function";function jc(n,t,e,i){Fc&&!t.options.segment?Lc(n,t,e,i):Dc(n,t,e,i)}class ee extends Nt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;ka(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Ba(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],r=this.points,o=Cr(this,{property:e,start:s,end:s});if(!o.length)return;const a=[],c=Ac(i);let l,u;for(l=0,u=o.length;l<u;++l){const{start:h,end:f}=o[l],m=r[h],p=r[f];if(m===p){a.push(m);continue}const d=Math.abs((s-m[e])/(p[e]-m[e])),b=c(m,p,d,i.stepped);b[e]=t[e],a.push(b)}return a.length===1?a[0]:a}pathSegment(t,e,i){return si(this)(t,this,e,i)}path(t,e,i){const s=this.segments,r=si(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)o&=r(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),jc(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}J(ee,"id","line"),J(ee,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),J(ee,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),J(ee,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Ms(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}class vn extends Nt{constructor(e){super();J(this,"parsed");J(this,"skip");J(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return Ms(this,e,"x",i)}inYRange(e,i){return Ms(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!Qt(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,ti(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}J(vn,"id","point"),J(vn,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),J(vn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Vr(n,t){const{x:e,y:i,base:s,width:r,height:o}=n.getProps(["x","y","base","width","height"],t);let a,c,l,u,h;return n.horizontal?(h=o/2,a=Math.min(e,s),c=Math.max(e,s),l=i-h,u=i+h):(h=r/2,a=e-h,c=e+h,l=Math.min(i,s),u=Math.max(i,s)),{left:a,top:l,right:c,bottom:u}}function ne(n,t,e,i){return n?0:Ct(t,e,i)}function Ic(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,r=pr(i);return{t:ne(s.top,r.top,0,e),r:ne(s.right,r.right,0,t),b:ne(s.bottom,r.bottom,0,e),l:ne(s.left,r.left,0,t)}}function Bc(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=ge(s),o=Math.min(t,e),a=n.borderSkipped,c=i||ct(s);return{topLeft:ne(!c||a.top||a.left,r.topLeft,0,o),topRight:ne(!c||a.top||a.right,r.topRight,0,o),bottomLeft:ne(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ne(!c||a.bottom||a.right,r.bottomRight,0,o)}}function Nc(n){const t=Vr(n),e=t.right-t.left,i=t.bottom-t.top,s=Ic(n,e/2,i/2),r=Bc(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function qn(n,t,e,i){const s=t===null,r=e===null,a=n&&!(s&&r)&&Vr(n,i);return a&&(s||Gt(t,a.left,a.right))&&(r||Gt(e,a.top,a.bottom))}function zc(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Vc(n,t){n.rect(t.x,t.y,t.w,t.h)}function Xn(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,r=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+o,radius:n.radius}}class xn extends Nt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=Nc(this),a=zc(o.radius)?Ye:Vc;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,Xn(o,e,r)),t.clip(),a(t,Xn(r,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Xn(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return qn(this,t,e,i)}inXRange(t,e){return qn(this,t,null,e)}inYRange(t,e){return qn(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}J(xn,"id","bar"),J(xn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J(xn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Hc=Object.freeze({__proto__:null,ArcElement:De,BarElement:xn,LineElement:ee,PointElement:vn});const ri=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Ps=ri.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Hr(n){return ri[n%ri.length]}function Wr(n){return Ps[n%Ps.length]}function Wc(n,t){return n.borderColor=Hr(t),n.backgroundColor=Wr(t),++t}function Uc(n,t){return n.backgroundColor=n.data.map(()=>Hr(t++)),t}function $c(n,t){return n.backgroundColor=n.data.map(()=>Wr(t++)),t}function Yc(n){let t=0;return(e,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof pe?t=Uc(e,t):s instanceof Ve?t=$c(e,t):s&&(t=Wc(e,t))}}function Es(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function qc(n){return n&&(n.borderColor||n.backgroundColor)}function Xc(){return vt.borderColor!=="rgba(0,0,0,0.1)"||vt.backgroundColor!=="rgba(0,0,0,0.1)"}var Gc={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,o=Es(i)||qc(s)||r&&Es(r)||Xc();if(!e.forceOverride&&o)return;const a=Yc(n);i.forEach(a)}};function Kc(n,t,e,i,s){const r=s.samples||i;if(r>=e)return n.slice(t,t+e);const o=[],a=(e-2)/(r-2);let c=0;const l=t+e-1;let u=t,h,f,m,p,d;for(o[c++]=n[u],h=0;h<r-2;h++){let b=0,g=0,y;const x=Math.floor((h+1)*a)+1+t,w=Math.min(Math.floor((h+2)*a)+1,e)+t,C=w-x;for(y=x;y<w;y++)b+=n[y].x,g+=n[y].y;b/=C,g/=C;const S=Math.floor(h*a)+1+t,E=Math.min(Math.floor((h+1)*a)+1,e)+t,{x:T,y:I}=n[u];for(m=p=-1,y=S;y<E;y++)p=.5*Math.abs((T-b)*(n[y].y-I)-(T-n[y].x)*(g-I)),p>m&&(m=p,f=n[y],d=y);o[c++]=f,u=d}return o[c++]=n[l],o}function Qc(n,t,e,i){let s=0,r=0,o,a,c,l,u,h,f,m,p,d;const b=[],g=t+e-1,y=n[t].x,w=n[g].x-y;for(o=t;o<t+e;++o){a=n[o],c=(a.x-y)/w*i,l=a.y;const C=c|0;if(C===u)l<p?(p=l,h=o):l>d&&(d=l,f=o),s=(r*s+a.x)/++r;else{const S=o-1;if(!lt(h)&&!lt(f)){const E=Math.min(h,f),T=Math.max(h,f);E!==m&&E!==S&&b.push({...n[E],x:s}),T!==m&&T!==S&&b.push({...n[T],x:s})}o>0&&S!==m&&b.push(n[S]),b.push(a),u=C,r=0,p=d=l,h=f=m=o}}return b}function Ur(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Ts(n){n.data.datasets.forEach(t=>{Ur(t)})}function Zc(n,t){const e=t.length;let i=0,s;const{iScale:r}=n,{min:o,max:a,minDefined:c,maxDefined:l}=r.getUserBounds();return c&&(i=Ct(Kt(t,r.axis,o).lo,0,e-1)),l?s=Ct(Kt(t,r.axis,a).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var Jc={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Ts(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,c=n.getDatasetMeta(r),l=o||s.data;if(Ae([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:f}=Zc(c,l);const m=e.threshold||4*i;if(f<=m){Ur(s);return}lt(o)&&(s._data=l,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(d){this._data=d}}));let p;switch(e.algorithm){case"lttb":p=Kc(l,h,f,i,e);break;case"min-max":p=Qc(l,h,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=p})},destroy(n){Ts(n)}};function tu(n,t,e){const i=n.segments,s=n.points,r=t.points,o=[];for(const a of i){let{start:c,end:l}=a;l=Ei(c,l,s);const u=oi(e,s[c],s[l],a.loop);if(!t.segments){o.push({source:a,target:u,start:s[c],end:s[l]});continue}const h=Cr(t,u);for(const f of h){const m=oi(e,r[f.start],r[f.end],f.loop),p=Sr(a,s,m);for(const d of p)o.push({source:d,target:f,start:{[e]:Os(u,m,"start",Math.max)},end:{[e]:Os(u,m,"end",Math.min)}})}}return o}function oi(n,t,e,i){if(i)return;let s=t[n],r=e[n];return n==="angle"&&(s=Lt(s),r=Lt(r)),{property:n,start:s,end:r}}function eu(n,t){const{x:e=null,y:i=null}=n||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=Ei(o,a,s);const c=s[o],l=s[a];i!==null?(r.push({x:c.x,y:i}),r.push({x:l.x,y:i})):e!==null&&(r.push({x:e,y:c.y}),r.push({x:e,y:l.y}))}),r}function Ei(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Os(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function $r(n,t){let e=[],i=!1;return yt(n)?(i=!0,e=n):e=eu(n,t),e.length?new ee({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Rs(n){return n&&n.fill!==!1}function nu(n,t,e){let s=n[t].fill;const r=[t];let o;if(!e)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!xt(s))return s;if(o=n[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function iu(n,t,e){const i=au(n);if(ct(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return xt(s)&&Math.floor(s)===s?su(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function su(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function ru(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:ct(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function ou(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:ct(n)?i=n.value:i=t.getBaseValue(),i}function au(n){const t=n.options,e=t.fill;let i=ot(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function lu(n){const{scale:t,index:e,line:i}=n,s=[],r=i.segments,o=i.points,a=cu(t,e);a.push($r({x:null,y:t.bottom},i));for(let c=0;c<r.length;c++){const l=r[c];for(let u=l.start;u<=l.end;u++)uu(s,o[u],a)}return new ee({points:s,options:{}})}function cu(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===t)break;r.hidden||e.unshift(r.dataset)}return e}function uu(n,t,e){const i=[];for(let s=0;s<e.length;s++){const r=e[s],{first:o,last:a,point:c}=hu(r,t,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function hu(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const s=i[e],r=n.segments,o=n.points;let a=!1,c=!1;for(let l=0;l<r.length;l++){const u=r[l],h=o[u.start][e],f=o[u.end][e];if(Gt(s,h,f)){a=s===h,c=s===f;break}}return{first:a,last:c,point:i}}class Yr{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:r,radius:o}=this;return e=e||{start:0,end:gt},t.arc(s,r,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,r=t.angle;return{x:e+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function fu(n){const{chart:t,fill:e,line:i}=n;if(xt(e))return du(t,e);if(e==="stack")return lu(n);if(e==="shape")return!0;const s=pu(n);return s instanceof Yr?s:$r(s,i)}function du(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function pu(n){return(n.scale||{}).getPointPositionForValue?mu(n):gu(n)}function gu(n){const{scale:t={},fill:e}=n,i=ru(e,t);if(xt(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function mu(n){const{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,r=i.reverse?t.max:t.min,o=ou(e,t,r),a=[];if(i.grid.circular){const c=t.getPointPositionForValue(0,r);return new Yr({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)a.push(t.getPointPositionForValue(c,o));return a}function Gn(n,t,e){const i=fu(t),{chart:s,index:r,line:o,scale:a,axis:c}=t,l=o.options,u=l.fill,h=l.backgroundColor,{above:f=h,below:m=h}=u||{},p=s.getDatasetMeta(r),d=Mr(s,p);i&&o.points.length&&(Rn(n,e),_u(n,{line:o,target:i,above:f,below:m,area:e,scale:a,axis:c,clip:d}),An(n))}function _u(n,t){const{line:e,target:i,above:s,below:r,area:o,scale:a,clip:c}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&r!==s&&(As(n,i,o.top),Ls(n,{line:e,target:i,color:s,scale:a,property:l,clip:c}),n.restore(),n.save(),As(n,i,o.bottom)),Ls(n,{line:e,target:i,color:r,scale:a,property:l,clip:c}),n.restore()}function As(n,t,e){const{segments:i,points:s}=t;let r=!0,o=!1;n.beginPath();for(const a of i){const{start:c,end:l}=a,u=s[c],h=s[Ei(c,l,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Ls(n,t){const{line:e,target:i,property:s,color:r,scale:o,clip:a}=t,c=tu(e,i,s);for(const{source:l,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=r}={}}=l,p=i!==!0;n.save(),n.fillStyle=m,bu(n,o,a,p&&oi(s,h,f)),n.beginPath();const d=!!e.pathSegment(n,l);let b;if(p){d?n.closePath():Ds(n,i,f,s);const g=!!i.pathSegment(n,u,{move:d,reverse:!0});b=d&&g,b||Ds(n,i,h,s)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function bu(n,t,e,i){const s=t.chart.chartArea,{property:r,start:o,end:a}=i||{};if(r==="x"||r==="y"){let c,l,u,h;r==="x"?(c=o,l=s.top,u=a,h=s.bottom):(c=s.left,l=o,u=s.right,h=a),n.beginPath(),e&&(c=Math.max(c,e.left),u=Math.min(u,e.right),l=Math.max(l,e.top),h=Math.min(h,e.bottom)),n.rect(c,l,u-c,h-l),n.clip()}}function Ds(n,t,e,i){const s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var yu={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,s=[];let r,o,a,c;for(o=0;o<i;++o)r=n.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof ee&&(c={visible:n.isDatasetVisible(o),index:o,fill:iu(a,o,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,s.push(c);for(o=0;o<i;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=nu(s,o,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),i&&a.fill&&Gn(n.ctx,a,r))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;Rs(r)&&Gn(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Rs(i)||e.drawTime!=="beforeDatasetDraw"||Gn(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fs=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},vu=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class js extends Nt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=pt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=St(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=Fs(i,r);let l,u;e.font=s.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,r,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,s,a,c)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=s+a;let h=t;r.textAlign="left",r.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,d)=>{const b=i+e/2+r.measureText(p.text).width;(d===0||l[l.length-1]+b+2*a>o)&&(h+=u,l[l.length-(d>0?0:1)]=0,m+=u,f++),c[d]={left:0,top:m,row:f,width:b,height:s},l[l.length-1]+=b+a}),h}_fitCols(t,e,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-t;let h=a,f=0,m=0,p=0,d=0;return this.legendItems.forEach((b,g)=>{const{itemWidth:y,itemHeight:x}=xu(i,e,r,b,s);g>0&&m+x+2*a>u&&(h+=f+a,l.push({width:f,height:m}),p+=f+a,d++,f=m=0),c[g]={left:p,top:m,col:d,width:y,height:x},f=Math.max(f,y),m+=x+a}),h+=f,l.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,o=we(r,this.left,this.width);if(this.isHorizontal()){let a=0,c=Pt(i,this.left+s,this.right-this.lineWidths[a]);for(const l of e)a!==l.row&&(a=l.row,c=Pt(i,this.left+s,this.right-this.lineWidths[a])),l.top+=this.top+t+s,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+s}else{let a=0,c=Pt(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const l of e)l.col!==a&&(a=l.col,c=Pt(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+s,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Rn(t,this),this._draw(),An(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:o}=t,a=vt.color,c=we(t.rtl,this.left,this.width),l=St(o.font),{padding:u}=o,h=l.size,f=h/2;let m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=l.string;const{boxWidth:p,boxHeight:d,itemHeight:b}=Fs(o,h),g=function(S,E,T){if(isNaN(p)||p<=0||isNaN(d)||d<0)return;s.save();const I=ot(T.lineWidth,1);if(s.fillStyle=ot(T.fillStyle,a),s.lineCap=ot(T.lineCap,"butt"),s.lineDashOffset=ot(T.lineDashOffset,0),s.lineJoin=ot(T.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=ot(T.strokeStyle,a),s.setLineDash(ot(T.lineDash,[])),o.usePointStyle){const P={radius:d*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:I},R=c.xPlus(S,p/2),D=E+f;dr(s,P,R,D,o.pointStyleWidth&&p)}else{const P=E+Math.max((h-d)/2,0),R=c.leftForLtr(S,p),D=ge(T.borderRadius);s.beginPath(),Object.values(D).some(H=>H!==0)?Ye(s,{x:R,y:P,w:p,h:d,radius:D}):s.rect(R,P,p,d),s.fill(),I!==0&&s.stroke()}s.restore()},y=function(S,E,T){be(s,T.text,S,E+b/2,l,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?m={x:Pt(r,this.left+u,this.right-i[0]),y:this.top+u+w,line:0}:m={x:this.left+u,y:Pt(r,this.top+w+u,this.bottom-e[0].height),line:0},xr(this.ctx,t.textDirection);const C=b+u;this.legendItems.forEach((S,E)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const T=s.measureText(S.text).width,I=c.textAlign(S.textAlign||(S.textAlign=o.textAlign)),P=p+f+T;let R=m.x,D=m.y;c.setWidth(this.width),x?E>0&&R+P+u>this.right&&(D=m.y+=C,m.line++,R=m.x=Pt(r,this.left+u,this.right-i[m.line])):E>0&&D+C>this.bottom&&(R=m.x=R+e[m.line].width+u,m.line++,D=m.y=Pt(r,this.top+w+u,this.bottom-e[m.line].height));const H=c.x(R);if(g(H,D,S),R=Vo(I,R+p+f,x?R+P:this.right,t.rtl),y(c.x(R),D,S),x)m.x+=P+u;else if(typeof S.text!="string"){const B=l.lineHeight;m.y+=qr(S,B)+u}else m.y+=C}),wr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=St(e.font),s=Tt(e.padding);if(!e.display)return;const r=we(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=i.size/2,l=s.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=Pt(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((d,b)=>Math.max(d,b.height),0);u=l+Pt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=Pt(a,h,h+f);o.textAlign=r.textAlign(yi(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,be(o,e.text,m,u,i)}_computeTitleHeight(){const t=this.options.title,e=St(t.font),i=Tt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Gt(t,this.left,this.right)&&Gt(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Gt(t,s.left,s.left+s.width)&&Gt(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!Su(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=vu(s,i);s&&!r&&pt(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&pt(e.onHover,[t,i,this],this)}else i&&pt(e.onClick,[t,i,this],this)}}function xu(n,t,e,i,s){const r=wu(i,n,t,e),o=ku(s,i,t.lineHeight);return{itemWidth:r,itemHeight:o}}function wu(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+i.measureText(s).width}function ku(n,t,e){let i=n;return typeof t.text!="string"&&(i=qr(t,e)),i}function qr(n,t){const e=n.text?n.text.length:0;return t*e}function Su(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Cu={id:"legend",_element:js,start(n,t,e){const i=n.legend=new js({ctx:n.ctx,options:e,chart:n});Et.configure(n,i,e),Et.addBox(n,i)},stop(n){Et.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Et.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const l=c.controller.getStyle(e?0:void 0),u=Tt(l.borderWidth);return{text:t[c.index].label,fillStyle:l.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Ti extends Nt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=yt(i.text)?i.text.length:1;this._padding=Tt(i.padding);const r=s*St(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:o}=this,a=o.align;let c=0,l,u,h;return this.isHorizontal()?(u=Pt(a,i,r),h=e+t,l=r-i):(o.position==="left"?(u=i+t,h=Pt(a,s,e),c=mt*-.5):(u=r-t,h=Pt(a,e,s),c=mt*.5),l=s-e),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=St(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(r);be(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:l,textAlign:yi(e.align),textBaseline:"middle",translation:[o,a]})}}function Mu(n,t){const e=new Ti({ctx:n.ctx,options:t,chart:n});Et.configure(n,e,t),Et.addBox(n,e),n.titleBlock=e}var Pu={id:"title",_element:Ti,start(n,t,e){Mu(n,e)},stop(n){const t=n.titleBlock;Et.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Et.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const un=new WeakMap;var Eu={id:"subtitle",start(n,t,e){const i=new Ti({ctx:n.ctx,options:e,chart:n});Et.configure(n,i,e),Et.addBox(n,i),un.set(n,i)},stop(n){Et.removeBox(n,un.get(n)),un.delete(n)},beforeUpdate(n,t,e){const i=un.get(n);Et.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fe={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const c=a.tooltipPosition();i.add(c.x),s+=c.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=n.length;r<o;++r){const c=n[r].element;if(c&&c.hasValue()){const l=c.getCenterPoint(),u=Zn(t,l);u<s&&(s=u,a=c)}}if(a){const c=a.tooltipPosition();e=c.x,i=c.y}return{x:e,y:i}}};function Vt(n,t){return t&&(yt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Yt(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Tu(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:n,label:o,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Is(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:o,boxHeight:a}=t,c=St(t.bodyFont),l=St(t.titleFont),u=St(t.footerFont),h=r.length,f=s.length,m=i.length,p=Tt(t.padding);let d=p.height,b=0,g=i.reduce((w,C)=>w+C.before.length+C.lines.length+C.after.length,0);if(g+=n.beforeBody.length+n.afterBody.length,h&&(d+=h*l.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),g){const w=t.displayColors?Math.max(a,c.lineHeight):c.lineHeight;d+=m*w+(g-m)*c.lineHeight+(g-1)*t.bodySpacing}f&&(d+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let y=0;const x=function(w){b=Math.max(b,e.measureText(w).width+y)};return e.save(),e.font=l.string,ft(n.title,x),e.font=c.string,ft(n.beforeBody.concat(n.afterBody),x),y=t.displayColors?o+2+t.boxPadding:0,ft(i,w=>{ft(w.before,x),ft(w.lines,x),ft(w.after,x)}),y=0,e.font=u.string,ft(n.footer,x),e.restore(),b+=p.width,{width:b,height:d}}function Ou(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function Ru(n,t,e,i){const{x:s,width:r}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&s+r+o>t.width||n==="right"&&s-r-o<0)return!0}function Au(n,t,e,i){const{x:s,width:r}=e,{width:o,chartArea:{left:a,right:c}}=n;let l="center";return i==="center"?l=s<=(a+c)/2?"left":"right":s<=r/2?l="left":s>=o-r/2&&(l="right"),Ru(l,n,t,e)&&(l="center"),l}function Bs(n,t,e){const i=e.yAlign||t.yAlign||Ou(n,e);return{xAlign:e.xAlign||t.xAlign||Au(n,t,e,i),yAlign:i}}function Lu(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function Du(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function Ns(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=n,{xAlign:a,yAlign:c}=e,l=s+r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=ge(o);let p=Lu(t,a);const d=Du(t,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,f)+s:a==="right"&&(p+=Math.max(h,m)+s),{x:Ct(p,0,i.width-t.width),y:Ct(d,0,i.height-t.height)}}function hn(n,t,e){const i=Tt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function zs(n){return Vt([],Yt(n))}function Fu(n,t,e){return oe(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Vs(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Xr={beforeTitle:Ut,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return lt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function Ot(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?Xr[t].call(e,i):s}class ai extends Nt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new Pr(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Fu(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Ot(i,"beforeTitle",this,t),r=Ot(i,"title",this,t),o=Ot(i,"afterTitle",this,t);let a=[];return a=Vt(a,Yt(s)),a=Vt(a,Yt(r)),a=Vt(a,Yt(o)),a}getBeforeBody(t,e){return zs(Ot(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return ft(t,r=>{const o={before:[],lines:[],after:[]},a=Vs(i,r);Vt(o.before,Yt(Ot(a,"beforeLabel",this,r))),Vt(o.lines,Ot(a,"label",this,r)),Vt(o.after,Yt(Ot(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return zs(Ot(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Ot(i,"beforeFooter",this,t),r=Ot(i,"footer",this,t),o=Ot(i,"afterFooter",this,t);let a=[];return a=Vt(a,Yt(s)),a=Vt(a,Yt(r)),a=Vt(a,Yt(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],c,l;for(c=0,l=e.length;c<l;++c)a.push(Tu(this.chart,e[c]));return t.filter&&(a=a.filter((u,h,f)=>t.filter(u,h,f,i))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,i))),ft(a,u=>{const h=Vs(t.callbacks,u);s.push(Ot(h,"labelColor",this,u)),r.push(Ot(h,"labelPointStyle",this,u)),o.push(Ot(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Fe[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const c=this._size=Is(this,i),l=Object.assign({},a,c),u=Bs(this.chart,i,l),h=Ns(i,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:c,topRight:l,bottomLeft:u,bottomRight:h}=ge(a),{x:f,y:m}=t,{width:p,height:d}=e;let b,g,y,x,w,C;return r==="center"?(w=m+d/2,s==="left"?(b=f,g=b-o,x=w+o,C=w-o):(b=f+p,g=b+o,x=w-o,C=w+o),y=b):(s==="left"?g=f+Math.max(c,u)+o:s==="right"?g=f+p-Math.max(l,h)-o:g=this.caretX,r==="top"?(x=m,w=x-o,b=g-o,y=g+o):(x=m+d,w=x+o,b=g+o,y=g-o),C=x),{x1:b,x2:g,x3:y,y1:x,y2:w,y3:C}}drawTitle(t,e,i){const s=this.title,r=s.length;let o,a,c;if(r){const l=we(i.rtl,this.x,this.width);for(t.x=hn(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",o=St(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,c=0;c<r;++c)e.fillText(s[c],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,c+1===r&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:c,boxWidth:l}=r,u=St(r.bodyFont),h=hn(this,"left",r),f=s.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=e.y+m;if(r.usePointStyle){const d={radius:Math.min(l,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=s.leftForLtr(f,l)+l/2,g=p+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ti(t,d,b,g),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ti(t,d,b,g)}else{t.lineWidth=ct(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const d=s.leftForLtr(f,l),b=s.leftForLtr(s.xPlus(f,1),l-2),g=ge(o.borderRadius);Object.values(g).some(y=>y!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Ye(t,{x:d,y:p,w:l,h:c,radius:g}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ye(t,{x:b,y:p+1,w:l-2,h:c-2,radius:g}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(d,p,l,c),t.strokeRect(d,p,l,c),t.fillStyle=o.backgroundColor,t.fillRect(b,p+1,l-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:l,boxPadding:u}=i,h=St(i.bodyFont);let f=h.lineHeight,m=0;const p=we(i.rtl,this.x,this.width),d=function(T){e.fillText(T,p.x(t.x+m),t.y+f/2),t.y+=f+r},b=p.textAlign(o);let g,y,x,w,C,S,E;for(e.textAlign=o,e.textBaseline="middle",e.font=h.string,t.x=hn(this,b,i),e.fillStyle=i.bodyColor,ft(this.beforeBody,d),m=a&&b!=="right"?o==="center"?l/2+u:l+2+u:0,w=0,S=s.length;w<S;++w){for(g=s[w],y=this.labelTextColors[w],e.fillStyle=y,ft(g.before,d),x=g.lines,a&&x.length&&(this._drawColorBox(e,t,w,p,i),f=Math.max(h.lineHeight,c)),C=0,E=x.length;C<E;++C)d(x[C]),f=h.lineHeight;ft(g.after,d)}m=0,f=h.lineHeight,ft(this.afterBody,d),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let o,a;if(r){const c=we(i.rtl,this.x,this.width);for(t.x=hn(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=c.textAlign(i.footerAlign),e.textBaseline="middle",o=St(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(s[a],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:c}=t,{width:l,height:u}=i,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=ge(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+h,c),o==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+l-f,c),e.quadraticCurveTo(a+l,c,a+l,c+f),o==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+l,c+u-p),e.quadraticCurveTo(a+l,c+u,a+l-p,c+u),o==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+m,c+u),e.quadraticCurveTo(a,c+u,a,c+u-m),o==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,c+h),e.quadraticCurveTo(a,c,a+h,c),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Fe[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Is(this,t),c=Object.assign({},o,this._size),l=Bs(e,t,c),u=Ns(t,c,l,e);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Tt(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),xr(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),wr(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:a,index:c})=>{const l=this.chart.getDatasetMeta(a);if(!l)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:l.data[c],index:c}}),r=!wn(i,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,i),a=this._positionChanged(o,t),c=e||!wn(o,r)||a;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,o=Fe[r.position].call(this,t,e);return o!==!1&&(i!==o.x||s!==o.y)}}J(ai,"positioners",Fe);var ju={id:"tooltip",_element:ai,positioners:Fe,afterInit(n,t,e){e&&(n.tooltip=new ai({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Xr},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Iu=Object.freeze({__proto__:null,Colors:Gc,Decimation:Jc,Filler:yu,Legend:Cu,SubTitle:Eu,Title:Pu,Tooltip:ju});const Bu=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Nu(n,t,e,i){const s=n.indexOf(t);if(s===-1)return Bu(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const zu=(n,t)=>n===null?null:Ct(Math.round(n),0,t);function Hs(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class li extends ye{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(lt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Nu(i,t,ot(e,t),this._addedLabels),zu(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return Hs.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}J(li,"id","category"),J(li,"defaults",{ticks:{callback:Hs}});function Vu(n,t){const e=[],{bounds:s,step:r,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,m=r||1,p=u-1,{min:d,max:b}=t,g=!lt(o),y=!lt(a),x=!lt(l),w=(b-d)/(h+1);let C=Ii((b-d)/p/m)*m,S,E,T,I;if(C<1e-14&&!g&&!y)return[{value:d},{value:b}];I=Math.ceil(b/C)-Math.floor(d/C),I>p&&(C=Ii(I*C/p/m)*m),lt(c)||(S=Math.pow(10,c),C=Math.ceil(C*S)/S),s==="ticks"?(E=Math.floor(d/C)*C,T=Math.ceil(b/C)*C):(E=d,T=b),g&&y&&r&&Do((a-o)/r,C/1e3)?(I=Math.round(Math.min((a-o)/C,u)),C=(a-o)/I,E=o,T=a):x?(E=g?o:E,T=y?a:T,I=l-1,C=(T-E)/I):(I=(T-E)/C,Be(I,Math.round(I),C/1e3)?I=Math.round(I):I=Math.ceil(I));const P=Math.max(Bi(C),Bi(E));S=Math.pow(10,lt(c)?P:c),E=Math.round(E*S)/S,T=Math.round(T*S)/S;let R=0;for(g&&(f&&E!==o?(e.push({value:o}),E<o&&R++,Be(Math.round((E+R*C)*S)/S,o,Ws(o,w,n))&&R++):E<o&&R++);R<I;++R){const D=Math.round((E+R*C)*S)/S;if(y&&D>a)break;e.push({value:D})}return y&&f&&T!==a?e.length&&Be(e[e.length-1].value,a,Ws(a,w,n))?e[e.length-1].value=a:e.push({value:a}):(!y||T===a)&&e.push({value:T}),e}function Ws(n,t,{horizontal:e,minRotation:i}){const s=It(i),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+n).length;return Math.min(t/r,o)}class Tn extends ye{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return lt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=c=>s=e?s:c,a=c=>r=i?r:c;if(t){const c=Wt(s),l=Wt(r);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);a(r+c),t||o(s-c)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=Vu(s,r);return t.bounds==="ticks"&&sr(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Qe(t,this.chart.options.locale,this.options.ticks.format)}}class ci extends Tn{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xt(t)?t:0,this.max=xt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=It(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}J(ci,"id","linear"),J(ci,"defaults",{ticks:{callback:On.formatters.numeric}});const Xe=n=>Math.floor(te(n)),he=(n,t)=>Math.pow(10,Xe(n)+t);function Us(n){return n/Math.pow(10,Xe(n))===1}function $s(n,t,e){const i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function Hu(n,t){const e=t-n;let i=Xe(e);for(;$s(n,t,i)>10;)i++;for(;$s(n,t,i)<10;)i--;return Math.min(i,Xe(n))}function Wu(n,{min:t,max:e}){t=At(n.min,t);const i=[],s=Xe(t);let r=Hu(t,e),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),c=s>r?Math.pow(10,s):0,l=Math.round((t-c)*o)/o,u=Math.floor((t-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,r)),f=At(n.min,Math.round((c+u+h*Math.pow(10,r))*o)/o);for(;f<e;)i.push({value:f,major:Us(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),f=Math.round((c+u+h*Math.pow(10,r))*o)/o;const m=At(n.max,f);return i.push({value:m,major:Us(m),significand:h}),i}class ui extends ye{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Tn.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return xt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=xt(t)?Math.max(0,t):null,this.max=xt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!xt(this._userMin)&&(this.min=t===he(this.min,0)?he(this.min,-1):he(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=t?i:a,o=a=>s=e?s:a;i===s&&(i<=0?(r(1),o(10)):(r(he(i,-1)),o(he(s,1)))),i<=0&&r(he(s,-1)),s<=0&&o(he(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=Wu(e,this);return t.bounds==="ticks"&&sr(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Qe(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=te(t),this._valueRange=te(this.max)-te(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(te(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}J(ui,"id","logarithmic"),J(ui,"defaults",{ticks:{callback:On.formatters.logarithmic,major:{enabled:!0}}});function hi(n){const t=n.ticks;if(t.display&&n.display){const e=Tt(t.backdropPadding);return ot(t.font&&t.font.size,vt.font.size)+e.height}return 0}function Uu(n,t,e){return e=yt(e)?e:[e],{w:Qo(n,t.string,e),h:e.length*t.lineHeight}}function Ys(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function $u(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],r=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?mt/r:0;for(let c=0;c<r;c++){const l=o.setContext(n.getPointLabelContext(c));s[c]=l.padding;const u=n.getPointPosition(c,n.drawingArea+s[c],a),h=St(l.font),f=Uu(n.ctx,h,n._pointLabels[c]);i[c]=f;const m=Lt(n.getIndexAngle(c)+a),p=Math.round(_i(m)),d=Ys(p,u.x,f.w,0,180),b=Ys(p,u.y,f.h,90,270);Yu(e,t,m,d,b)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=Gu(n,i,s)}function Yu(n,t,e,i,s){const r=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let a=0,c=0;i.start<t.l?(a=(t.l-i.start)/r,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/r,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(c=(t.t-s.start)/o,n.t=Math.min(n.t,t.t-c)):s.end>t.b&&(c=(s.end-t.b)/o,n.b=Math.max(n.b,t.b+c))}function qu(n,t,e){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=e,c=n.getPointPosition(t,i+s+o,r),l=Math.round(_i(Lt(c.angle+wt))),u=Zu(c.y,a.h,l),h=Ku(l),f=Qu(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function Xu(n,t){if(!t)return!0;const{left:e,top:i,right:s,bottom:r}=n;return!(Qt({x:e,y:i},t)||Qt({x:e,y:r},t)||Qt({x:s,y:i},t)||Qt({x:s,y:r},t))}function Gu(n,t,e){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:hi(r)/2,additionalAngle:o?mt/s:0};let l;for(let u=0;u<s;u++){c.padding=e[u],c.size=t[u];const h=qu(n,u,c);i.push(h),a==="auto"&&(h.visible=Xu(h,l),h.visible&&(l=h))}return i}function Ku(n){return n===0||n===180?"center":n<180?"left":"right"}function Qu(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Zu(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function Ju(n,t,e){const{left:i,top:s,right:r,bottom:o}=e,{backdropColor:a}=t;if(!lt(a)){const c=ge(t.borderRadius),l=Tt(t.backdropPadding);n.fillStyle=a;const u=i-l.left,h=s-l.top,f=r-i+l.width,m=o-s+l.height;Object.values(c).some(p=>p!==0)?(n.beginPath(),Ye(n,{x:u,y:h,w:f,h:m,radius:c}),n.fill()):n.fillRect(u,h,f,m)}}function th(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(n.getPointLabelContext(s));Ju(e,o,r);const a=St(o.font),{x:c,y:l,textAlign:u}=r;be(e,n._pointLabels[s],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function Gr(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,gt);else{let r=n.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=n.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function eh(n,t,e,i,s){const r=n.ctx,o=t.circular,{color:a,lineWidth:c}=t;!o&&!i||!a||!c||e<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),Gr(n,e,o,i),r.closePath(),r.stroke(),r.restore())}function nh(n,t,e){return oe(n,{label:e,index:t,type:"pointLabel"})}class je extends Tn{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Tt(hi(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=xt(t)&&!isNaN(t)?t:0,this.max=xt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hi(this.options))}generateTickLabels(t){Tn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=pt(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?$u(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=gt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Lt(t*e+It(i))}getDistanceFromCenterForValue(t){if(lt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(lt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return nh(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-wt+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:r}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Gr(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:r}=e,o=this._pointLabels.length;let a,c,l;if(e.pointLabels.display&&th(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=s.setContext(f),p=r.setContext(f);eh(this,m,c,o,p)}}),i.display){for(t.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!e.reverse)return;const l=i.setContext(this.getContext(c)),u=St(l.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=l.backdropColor;const h=Tt(l.backdropPadding);t.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}be(t,a.label,0,-r,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),t.restore()}drawTitle(){}}J(je,"id","radialLinear"),J(je,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:On.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),J(je,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),J(je,"descriptors",{angleLines:{_fallback:"grid"}});const Fn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rt=Object.keys(Fn);function qs(n,t){return n-t}function Xs(n,t){if(lt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let o=t;return typeof i=="function"&&(o=i(o)),xt(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(ke(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function Gs(n,t,e,i){const s=Rt.length;for(let r=Rt.indexOf(n);r<s-1;++r){const o=Fn[Rt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return Rt[r]}return Rt[s-1]}function ih(n,t,e,i,s){for(let r=Rt.length-1;r>=Rt.indexOf(e);r--){const o=Rt[r];if(Fn[o].common&&n._adapter.diff(s,i,o)>=t-1)return o}return Rt[e?Rt.indexOf(e):0]}function sh(n){for(let t=Rt.indexOf(n)+1,e=Rt.length;t<e;++t)if(Fn[Rt[t]].common)return Rt[t]}function Ks(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=bi(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function rh(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),o=t[t.length-1].value;let a,c;for(a=r;a<=o;a=+s.add(a,1,i))c=e[a],c>=0&&(t[c].major=!0);return t}function Qs(n,t,e){const i=[],s={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,i.push({value:a,major:!1});return r===0||!e?i:rh(n,i,s,e)}class Ge extends ye{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new pl._date(t.adapters.date);s.init(e),Ie(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Xs(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(l){!o&&!isNaN(l.min)&&(s=Math.min(s,l.min)),!a&&!isNaN(l.max)&&(r=Math.max(r,l.max))}(!o||!a)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=xt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=xt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=Bo(s,r,o);return this._unit=e.unit||(i.autoSkip?Gs(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):ih(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:sh(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Qs(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=Ct(e,0,o),i=Ct(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Gs(r.minUnit,e,i,this._getLabelCapacity(e)),a=ot(s.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,l=ke(c)||c===!0,u={};let h=e,f,m;if(l&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,l?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<i;f=+t.add(f,a,o),m++)Ks(u,f,p);return(f===i||s.bounds==="ticks"||m===1)&&Ks(u,f,p),Object.keys(u).sort(qs).map(d=>+d)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,s){const r=this.options,o=r.ticks.callback;if(o)return pt(o,[t,e,i],this);const a=r.time.displayFormats,c=this._unit,l=this._majorUnit,u=c&&a[c],h=l&&a[l],f=i[e],m=l&&h&&f&&f.major;return this._adapter.format(t,s||(m?h:u))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=It(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Qs(this,[t],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Xs(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ar(t.sort(qs))}}J(Ge,"id","time"),J(Ge,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function fn(n,t,e){let i=0,s=n.length-1,r,o,a,c;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Kt(n,"pos",t)),{pos:r,time:a}=n[i],{pos:o,time:c}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Kt(n,"time",t)),{time:r,pos:a}=n[i],{time:o,pos:c}=n[s]);const l=o-r;return l?a+(c-a)*(t-r)/l:a}class fi extends Ge{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=fn(e,this.min),this._tableRange=fn(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let o,a,c,l,u;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=i&&s.push(l);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],c=s[o-1],l=s[o],Math.round((u+c)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(fn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return fn(this._table,i*this._tableRange+this._minPos,!0)}}J(fi,"id","timeseries"),J(fi,"defaults",Ge.defaults);var oh=Object.freeze({__proto__:null,CategoryScale:li,LinearScale:ci,LogarithmicScale:ui,RadialLinearScale:je,TimeScale:Ge,TimeSeriesScale:fi});const ah=[dl,Hc,Iu,oh];Xt.register(...ah);function lh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kn,Zs;function ch(){return Zs||(Zs=1,Kn=function(n){var t={};function e(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return n[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=n,e.c=t,e.d=function(i,s,r){e.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:r})},e.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,s){if(1&s&&(i=e(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)e.d(r,o,(function(a){return i[a]}).bind(null,o));return r},e.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(s,"a",s),s},e.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},e.p="",e(e.s=32)}([function(n,t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(e=window)}n.exports=e},function(n,t,e){var i=e(6),s=Object.keys||function(p){var d=[];for(var b in p)d.push(b);return d};n.exports=h;var r=e(5);r.inherits=e(2);var o=e(23),a=e(14);r.inherits(h,o);for(var c=s(a.prototype),l=0;l<c.length;l++){var u=c[l];h.prototype[u]||(h.prototype[u]=a.prototype[u])}function h(p){if(!(this instanceof h))return new h(p);o.call(this,p),a.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i.nextTick(m,this)}function m(p){p.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),h.prototype._destroy=function(p,d){this.push(null),this.end(),i.nextTick(d,p)}},function(n,t){typeof Object.create=="function"?n.exports=function(e,i){e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(e,i){e.super_=i;var s=function(){};s.prototype=i.prototype,e.prototype=new s,e.prototype.constructor=e}},function(n,t,e){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var s=e(38),r=e(39),o=e(40);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(_,v){if(a()<v)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(_=new Uint8Array(v)).__proto__=l.prototype:(_===null&&(_=new l(v)),_.length=v),_}function l(_,v,k){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(_,v,k);if(typeof _=="number"){if(typeof v=="string")throw new Error("If encoding is specified then the first argument must be a string");return f(this,_)}return u(this,_,v,k)}function u(_,v,k,j){if(typeof v=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&v instanceof ArrayBuffer?function(F,z,Z,nt){if(z.byteLength,Z<0||z.byteLength<Z)throw new RangeError("'offset' is out of bounds");if(z.byteLength<Z+(nt||0))throw new RangeError("'length' is out of bounds");return z=Z===void 0&&nt===void 0?new Uint8Array(z):nt===void 0?new Uint8Array(z,Z):new Uint8Array(z,Z,nt),l.TYPED_ARRAY_SUPPORT?(F=z).__proto__=l.prototype:F=m(F,z),F}(_,v,k,j):typeof v=="string"?function(F,z,Z){if(typeof Z=="string"&&Z!==""||(Z="utf8"),!l.isEncoding(Z))throw new TypeError('"encoding" must be a valid string encoding');var nt=0|d(z,Z),at=(F=c(F,nt)).write(z,Z);return at!==nt&&(F=F.slice(0,at)),F}(_,v,k):function(F,z){if(l.isBuffer(z)){var Z=0|p(z.length);return(F=c(F,Z)).length===0||z.copy(F,0,0,Z),F}if(z){if(typeof ArrayBuffer<"u"&&z.buffer instanceof ArrayBuffer||"length"in z)return typeof z.length!="number"||function(nt){return nt!=nt}(z.length)?c(F,0):m(F,z);if(z.type==="Buffer"&&o(z.data))return m(F,z.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(_,v)}function h(_){if(typeof _!="number")throw new TypeError('"size" argument must be a number');if(_<0)throw new RangeError('"size" argument must not be negative')}function f(_,v){if(h(v),_=c(_,v<0?0:0|p(v)),!l.TYPED_ARRAY_SUPPORT)for(var k=0;k<v;++k)_[k]=0;return _}function m(_,v){var k=v.length<0?0:0|p(v.length);_=c(_,k);for(var j=0;j<k;j+=1)_[j]=255&v[j];return _}function p(_){if(_>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|_}function d(_,v){if(l.isBuffer(_))return _.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(_)||_ instanceof ArrayBuffer))return _.byteLength;typeof _!="string"&&(_=""+_);var k=_.length;if(k===0)return 0;for(var j=!1;;)switch(v){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":case void 0:return q(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*k;case"hex":return k>>>1;case"base64":return X(_).length;default:if(j)return q(_).length;v=(""+v).toLowerCase(),j=!0}}function b(_,v,k){var j=_[v];_[v]=_[k],_[k]=j}function g(_,v,k,j,F){if(_.length===0)return-1;if(typeof k=="string"?(j=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,isNaN(k)&&(k=F?0:_.length-1),k<0&&(k=_.length+k),k>=_.length){if(F)return-1;k=_.length-1}else if(k<0){if(!F)return-1;k=0}if(typeof v=="string"&&(v=l.from(v,j)),l.isBuffer(v))return v.length===0?-1:y(_,v,k,j,F);if(typeof v=="number")return v&=255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(_,v,k):Uint8Array.prototype.lastIndexOf.call(_,v,k):y(_,[v],k,j,F);throw new TypeError("val must be string, number or Buffer")}function y(_,v,k,j,F){var z,Z=1,nt=_.length,at=v.length;if(j!==void 0&&((j=String(j).toLowerCase())==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(_.length<2||v.length<2)return-1;Z=2,nt/=2,at/=2,k/=2}function _t(Zt,dt){return Z===1?Zt[dt]:Zt.readUInt16BE(dt*Z)}if(F){var ut=-1;for(z=k;z<nt;z++)if(_t(_,z)===_t(v,ut===-1?0:z-ut)){if(ut===-1&&(ut=z),z-ut+1===at)return ut*Z}else ut!==-1&&(z-=z-ut),ut=-1}else for(k+at>nt&&(k=nt-at),z=k;z>=0;z--){for(var jt=!0,Mt=0;Mt<at;Mt++)if(_t(_,z+Mt)!==_t(v,Mt)){jt=!1;break}if(jt)return z}return-1}function x(_,v,k,j){k=Number(k)||0;var F=_.length-k;j?(j=Number(j))>F&&(j=F):j=F;var z=v.length;if(z%2!=0)throw new TypeError("Invalid hex string");j>z/2&&(j=z/2);for(var Z=0;Z<j;++Z){var nt=parseInt(v.substr(2*Z,2),16);if(isNaN(nt))return Z;_[k+Z]=nt}return Z}function w(_,v,k,j){return Q(q(v,_.length-k),_,k,j)}function C(_,v,k,j){return Q(function(F){for(var z=[],Z=0;Z<F.length;++Z)z.push(255&F.charCodeAt(Z));return z}(v),_,k,j)}function S(_,v,k,j){return C(_,v,k,j)}function E(_,v,k,j){return Q(X(v),_,k,j)}function T(_,v,k,j){return Q(function(F,z){for(var Z,nt,at,_t=[],ut=0;ut<F.length&&!((z-=2)<0);++ut)nt=(Z=F.charCodeAt(ut))>>8,at=Z%256,_t.push(at),_t.push(nt);return _t}(v,_.length-k),_,k,j)}function I(_,v,k){return v===0&&k===_.length?s.fromByteArray(_):s.fromByteArray(_.slice(v,k))}function P(_,v,k){k=Math.min(_.length,k);for(var j=[],F=v;F<k;){var z,Z,nt,at,_t=_[F],ut=null,jt=_t>239?4:_t>223?3:_t>191?2:1;if(F+jt<=k)switch(jt){case 1:_t<128&&(ut=_t);break;case 2:(192&(z=_[F+1]))==128&&(at=(31&_t)<<6|63&z)>127&&(ut=at);break;case 3:z=_[F+1],Z=_[F+2],(192&z)==128&&(192&Z)==128&&(at=(15&_t)<<12|(63&z)<<6|63&Z)>2047&&(at<55296||at>57343)&&(ut=at);break;case 4:z=_[F+1],Z=_[F+2],nt=_[F+3],(192&z)==128&&(192&Z)==128&&(192&nt)==128&&(at=(15&_t)<<18|(63&z)<<12|(63&Z)<<6|63&nt)>65535&&at<1114112&&(ut=at)}ut===null?(ut=65533,jt=1):ut>65535&&(ut-=65536,j.push(ut>>>10&1023|55296),ut=56320|1023&ut),j.push(ut),F+=jt}return function(Mt){var Zt=Mt.length;if(Zt<=R)return String.fromCharCode.apply(String,Mt);for(var dt="",W=0;W<Zt;)dt+=String.fromCharCode.apply(String,Mt.slice(W,W+=R));return dt}(j)}t.Buffer=l,t.SlowBuffer=function(_){return+_!=_&&(_=0),l.alloc(+_)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var _=new Uint8Array(1);return _.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},_.foo()===42&&typeof _.subarray=="function"&&_.subarray(1,1).byteLength===0}catch{return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(_){return _.__proto__=l.prototype,_},l.from=function(_,v,k){return u(null,_,v,k)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(_,v,k){return function(j,F,z,Z){return h(F),F<=0?c(j,F):z!==void 0?typeof Z=="string"?c(j,F).fill(z,Z):c(j,F).fill(z):c(j,F)}(null,_,v,k)},l.allocUnsafe=function(_){return f(null,_)},l.allocUnsafeSlow=function(_){return f(null,_)},l.isBuffer=function(_){return!(_==null||!_._isBuffer)},l.compare=function(_,v){if(!l.isBuffer(_)||!l.isBuffer(v))throw new TypeError("Arguments must be Buffers");if(_===v)return 0;for(var k=_.length,j=v.length,F=0,z=Math.min(k,j);F<z;++F)if(_[F]!==v[F]){k=_[F],j=v[F];break}return k<j?-1:j<k?1:0},l.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(_,v){if(!o(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return l.alloc(0);var k;if(v===void 0)for(v=0,k=0;k<_.length;++k)v+=_[k].length;var j=l.allocUnsafe(v),F=0;for(k=0;k<_.length;++k){var z=_[k];if(!l.isBuffer(z))throw new TypeError('"list" argument must be an Array of Buffers');z.copy(j,F),F+=z.length}return j},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var _=this.length;if(_%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var v=0;v<_;v+=2)b(this,v,v+1);return this},l.prototype.swap32=function(){var _=this.length;if(_%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var v=0;v<_;v+=4)b(this,v,v+3),b(this,v+1,v+2);return this},l.prototype.swap64=function(){var _=this.length;if(_%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var v=0;v<_;v+=8)b(this,v,v+7),b(this,v+1,v+6),b(this,v+2,v+5),b(this,v+3,v+4);return this},l.prototype.toString=function(){var _=0|this.length;return _===0?"":arguments.length===0?P(this,0,_):(function(v,k,j){var F=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0)<=(k>>>=0))return"";for(v||(v="utf8");;)switch(v){case"hex":return B(this,k,j);case"utf8":case"utf-8":return P(this,k,j);case"ascii":return D(this,k,j);case"latin1":case"binary":return H(this,k,j);case"base64":return I(this,k,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,k,j);default:if(F)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),F=!0}}).apply(this,arguments)},l.prototype.equals=function(_){if(!l.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_||l.compare(this,_)===0},l.prototype.inspect=function(){var _="",v=t.INSPECT_MAX_BYTES;return this.length>0&&(_=this.toString("hex",0,v).match(/.{2}/g).join(" "),this.length>v&&(_+=" ... ")),"<Buffer "+_+">"},l.prototype.compare=function(_,v,k,j,F){if(!l.isBuffer(_))throw new TypeError("Argument must be a Buffer");if(v===void 0&&(v=0),k===void 0&&(k=_?_.length:0),j===void 0&&(j=0),F===void 0&&(F=this.length),v<0||k>_.length||j<0||F>this.length)throw new RangeError("out of range index");if(j>=F&&v>=k)return 0;if(j>=F)return-1;if(v>=k)return 1;if(v>>>=0,k>>>=0,j>>>=0,F>>>=0,this===_)return 0;for(var z=F-j,Z=k-v,nt=Math.min(z,Z),at=this.slice(j,F),_t=_.slice(v,k),ut=0;ut<nt;++ut)if(at[ut]!==_t[ut]){z=at[ut],Z=_t[ut];break}return z<Z?-1:Z<z?1:0},l.prototype.includes=function(_,v,k){return this.indexOf(_,v,k)!==-1},l.prototype.indexOf=function(_,v,k){return g(this,_,v,k,!0)},l.prototype.lastIndexOf=function(_,v,k){return g(this,_,v,k,!1)},l.prototype.write=function(_,v,k,j){if(v===void 0)j="utf8",k=this.length,v=0;else if(k===void 0&&typeof v=="string")j=v,k=this.length,v=0;else{if(!isFinite(v))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");v|=0,isFinite(k)?(k|=0,j===void 0&&(j="utf8")):(j=k,k=void 0)}var F=this.length-v;if((k===void 0||k>F)&&(k=F),_.length>0&&(k<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var z=!1;;)switch(j){case"hex":return x(this,_,v,k);case"utf8":case"utf-8":return w(this,_,v,k);case"ascii":return C(this,_,v,k);case"latin1":case"binary":return S(this,_,v,k);case"base64":return E(this,_,v,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,_,v,k);default:if(z)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),z=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function D(_,v,k){var j="";k=Math.min(_.length,k);for(var F=v;F<k;++F)j+=String.fromCharCode(127&_[F]);return j}function H(_,v,k){var j="";k=Math.min(_.length,k);for(var F=v;F<k;++F)j+=String.fromCharCode(_[F]);return j}function B(_,v,k){var j=_.length;(!v||v<0)&&(v=0),(!k||k<0||k>j)&&(k=j);for(var F="",z=v;z<k;++z)F+=N(_[z]);return F}function V(_,v,k){for(var j=_.slice(v,k),F="",z=0;z<j.length;z+=2)F+=String.fromCharCode(j[z]+256*j[z+1]);return F}function $(_,v,k){if(_%1!=0||_<0)throw new RangeError("offset is not uint");if(_+v>k)throw new RangeError("Trying to access beyond buffer length")}function U(_,v,k,j,F,z){if(!l.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>F||v<z)throw new RangeError('"value" argument is out of bounds');if(k+j>_.length)throw new RangeError("Index out of range")}function K(_,v,k,j){v<0&&(v=65535+v+1);for(var F=0,z=Math.min(_.length-k,2);F<z;++F)_[k+F]=(v&255<<8*(j?F:1-F))>>>8*(j?F:1-F)}function L(_,v,k,j){v<0&&(v=4294967295+v+1);for(var F=0,z=Math.min(_.length-k,4);F<z;++F)_[k+F]=v>>>8*(j?F:3-F)&255}function O(_,v,k,j,F,z){if(k+j>_.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function A(_,v,k,j,F){return F||O(_,0,k,4),r.write(_,v,k,j,23,4),k+4}function Y(_,v,k,j,F){return F||O(_,0,k,8),r.write(_,v,k,j,52,8),k+8}l.prototype.slice=function(_,v){var k,j=this.length;if(_=~~_,v=v===void 0?j:~~v,_<0?(_+=j)<0&&(_=0):_>j&&(_=j),v<0?(v+=j)<0&&(v=0):v>j&&(v=j),v<_&&(v=_),l.TYPED_ARRAY_SUPPORT)(k=this.subarray(_,v)).__proto__=l.prototype;else{var F=v-_;k=new l(F,void 0);for(var z=0;z<F;++z)k[z]=this[z+_]}return k},l.prototype.readUIntLE=function(_,v,k){_|=0,v|=0,k||$(_,v,this.length);for(var j=this[_],F=1,z=0;++z<v&&(F*=256);)j+=this[_+z]*F;return j},l.prototype.readUIntBE=function(_,v,k){_|=0,v|=0,k||$(_,v,this.length);for(var j=this[_+--v],F=1;v>0&&(F*=256);)j+=this[_+--v]*F;return j},l.prototype.readUInt8=function(_,v){return v||$(_,1,this.length),this[_]},l.prototype.readUInt16LE=function(_,v){return v||$(_,2,this.length),this[_]|this[_+1]<<8},l.prototype.readUInt16BE=function(_,v){return v||$(_,2,this.length),this[_]<<8|this[_+1]},l.prototype.readUInt32LE=function(_,v){return v||$(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+16777216*this[_+3]},l.prototype.readUInt32BE=function(_,v){return v||$(_,4,this.length),16777216*this[_]+(this[_+1]<<16|this[_+2]<<8|this[_+3])},l.prototype.readIntLE=function(_,v,k){_|=0,v|=0,k||$(_,v,this.length);for(var j=this[_],F=1,z=0;++z<v&&(F*=256);)j+=this[_+z]*F;return j>=(F*=128)&&(j-=Math.pow(2,8*v)),j},l.prototype.readIntBE=function(_,v,k){_|=0,v|=0,k||$(_,v,this.length);for(var j=v,F=1,z=this[_+--j];j>0&&(F*=256);)z+=this[_+--j]*F;return z>=(F*=128)&&(z-=Math.pow(2,8*v)),z},l.prototype.readInt8=function(_,v){return v||$(_,1,this.length),128&this[_]?-1*(255-this[_]+1):this[_]},l.prototype.readInt16LE=function(_,v){v||$(_,2,this.length);var k=this[_]|this[_+1]<<8;return 32768&k?4294901760|k:k},l.prototype.readInt16BE=function(_,v){v||$(_,2,this.length);var k=this[_+1]|this[_]<<8;return 32768&k?4294901760|k:k},l.prototype.readInt32LE=function(_,v){return v||$(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},l.prototype.readInt32BE=function(_,v){return v||$(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},l.prototype.readFloatLE=function(_,v){return v||$(_,4,this.length),r.read(this,_,!0,23,4)},l.prototype.readFloatBE=function(_,v){return v||$(_,4,this.length),r.read(this,_,!1,23,4)},l.prototype.readDoubleLE=function(_,v){return v||$(_,8,this.length),r.read(this,_,!0,52,8)},l.prototype.readDoubleBE=function(_,v){return v||$(_,8,this.length),r.read(this,_,!1,52,8)},l.prototype.writeUIntLE=function(_,v,k,j){_=+_,v|=0,k|=0,j||U(this,_,v,k,Math.pow(2,8*k)-1,0);var F=1,z=0;for(this[v]=255&_;++z<k&&(F*=256);)this[v+z]=_/F&255;return v+k},l.prototype.writeUIntBE=function(_,v,k,j){_=+_,v|=0,k|=0,j||U(this,_,v,k,Math.pow(2,8*k)-1,0);var F=k-1,z=1;for(this[v+F]=255&_;--F>=0&&(z*=256);)this[v+F]=_/z&255;return v+k},l.prototype.writeUInt8=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,1,255,0),l.TYPED_ARRAY_SUPPORT||(_=Math.floor(_)),this[v]=255&_,v+1},l.prototype.writeUInt16LE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[v]=255&_,this[v+1]=_>>>8):K(this,_,v,!0),v+2},l.prototype.writeUInt16BE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[v]=_>>>8,this[v+1]=255&_):K(this,_,v,!1),v+2},l.prototype.writeUInt32LE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[v+3]=_>>>24,this[v+2]=_>>>16,this[v+1]=_>>>8,this[v]=255&_):L(this,_,v,!0),v+4},l.prototype.writeUInt32BE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[v]=_>>>24,this[v+1]=_>>>16,this[v+2]=_>>>8,this[v+3]=255&_):L(this,_,v,!1),v+4},l.prototype.writeIntLE=function(_,v,k,j){if(_=+_,v|=0,!j){var F=Math.pow(2,8*k-1);U(this,_,v,k,F-1,-F)}var z=0,Z=1,nt=0;for(this[v]=255&_;++z<k&&(Z*=256);)_<0&&nt===0&&this[v+z-1]!==0&&(nt=1),this[v+z]=(_/Z>>0)-nt&255;return v+k},l.prototype.writeIntBE=function(_,v,k,j){if(_=+_,v|=0,!j){var F=Math.pow(2,8*k-1);U(this,_,v,k,F-1,-F)}var z=k-1,Z=1,nt=0;for(this[v+z]=255&_;--z>=0&&(Z*=256);)_<0&&nt===0&&this[v+z+1]!==0&&(nt=1),this[v+z]=(_/Z>>0)-nt&255;return v+k},l.prototype.writeInt8=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,1,127,-128),l.TYPED_ARRAY_SUPPORT||(_=Math.floor(_)),_<0&&(_=255+_+1),this[v]=255&_,v+1},l.prototype.writeInt16LE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[v]=255&_,this[v+1]=_>>>8):K(this,_,v,!0),v+2},l.prototype.writeInt16BE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[v]=_>>>8,this[v+1]=255&_):K(this,_,v,!1),v+2},l.prototype.writeInt32LE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[v]=255&_,this[v+1]=_>>>8,this[v+2]=_>>>16,this[v+3]=_>>>24):L(this,_,v,!0),v+4},l.prototype.writeInt32BE=function(_,v,k){return _=+_,v|=0,k||U(this,_,v,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),l.TYPED_ARRAY_SUPPORT?(this[v]=_>>>24,this[v+1]=_>>>16,this[v+2]=_>>>8,this[v+3]=255&_):L(this,_,v,!1),v+4},l.prototype.writeFloatLE=function(_,v,k){return A(this,_,v,!0,k)},l.prototype.writeFloatBE=function(_,v,k){return A(this,_,v,!1,k)},l.prototype.writeDoubleLE=function(_,v,k){return Y(this,_,v,!0,k)},l.prototype.writeDoubleBE=function(_,v,k){return Y(this,_,v,!1,k)},l.prototype.copy=function(_,v,k,j){if(k||(k=0),j||j===0||(j=this.length),v>=_.length&&(v=_.length),v||(v=0),j>0&&j<k&&(j=k),j===k||_.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("sourceStart out of bounds");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),_.length-v<j-k&&(j=_.length-v+k);var F,z=j-k;if(this===_&&k<v&&v<j)for(F=z-1;F>=0;--F)_[F+v]=this[F+k];else if(z<1e3||!l.TYPED_ARRAY_SUPPORT)for(F=0;F<z;++F)_[F+v]=this[F+k];else Uint8Array.prototype.set.call(_,this.subarray(k,k+z),v);return z},l.prototype.fill=function(_,v,k,j){if(typeof _=="string"){if(typeof v=="string"?(j=v,v=0,k=this.length):typeof k=="string"&&(j=k,k=this.length),_.length===1){var F=_.charCodeAt(0);F<256&&(_=F)}if(j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!l.isEncoding(j))throw new TypeError("Unknown encoding: "+j)}else typeof _=="number"&&(_&=255);if(v<0||this.length<v||this.length<k)throw new RangeError("Out of range index");if(k<=v)return this;var z;if(v>>>=0,k=k===void 0?this.length:k>>>0,_||(_=0),typeof _=="number")for(z=v;z<k;++z)this[z]=_;else{var Z=l.isBuffer(_)?_:q(new l(_,j).toString()),nt=Z.length;for(z=0;z<k-v;++z)this[z+v]=Z[z%nt]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function N(_){return _<16?"0"+_.toString(16):_.toString(16)}function q(_,v){var k;v=v||1/0;for(var j=_.length,F=null,z=[],Z=0;Z<j;++Z){if((k=_.charCodeAt(Z))>55295&&k<57344){if(!F){if(k>56319){(v-=3)>-1&&z.push(239,191,189);continue}if(Z+1===j){(v-=3)>-1&&z.push(239,191,189);continue}F=k;continue}if(k<56320){(v-=3)>-1&&z.push(239,191,189),F=k;continue}k=65536+(F-55296<<10|k-56320)}else F&&(v-=3)>-1&&z.push(239,191,189);if(F=null,k<128){if((v-=1)<0)break;z.push(k)}else if(k<2048){if((v-=2)<0)break;z.push(k>>6|192,63&k|128)}else if(k<65536){if((v-=3)<0)break;z.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(k<1114112))throw new Error("Invalid code point");if((v-=4)<0)break;z.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return z}function X(_){return s.toByteArray(function(v){if((v=function(k){return k.trim?k.trim():k.replace(/^\s+|\s+$/g,"")}(v).replace(M,"")).length<2)return"";for(;v.length%4!=0;)v+="=";return v}(_))}function Q(_,v,k,j){for(var F=0;F<j&&!(F+k>=v.length||F>=_.length);++F)v[F+k]=_[F];return F}}).call(this,e(0))},function(n,t){var e,i,s=n.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(b){if(e===setTimeout)return setTimeout(b,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(b,0);try{return e(b,0)}catch{try{return e.call(null,b,0)}catch{return e.call(this,b,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:r}catch{e=r}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&m())}function m(){if(!u){var b=a(f);u=!0;for(var g=l.length;g;){for(c=l,l=[];++h<g;)c&&c[h].run();h=-1,g=l.length}c=null,u=!1,function(y){if(i===clearTimeout)return clearTimeout(y);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(y);try{i(y)}catch{try{return i.call(null,y)}catch{return i.call(this,y)}}}(b)}}function p(b,g){this.fun=b,this.array=g}function d(){}s.nextTick=function(b){var g=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)g[y-1]=arguments[y];l.push(new p(b,g)),l.length!==1||u||a(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=d,s.addListener=d,s.once=d,s.off=d,s.removeListener=d,s.removeAllListeners=d,s.emit=d,s.prependListener=d,s.prependOnceListener=d,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(n,t,e){(function(i){function s(r){return Object.prototype.toString.call(r)}t.isArray=function(r){return Array.isArray?Array.isArray(r):s(r)==="[object Array]"},t.isBoolean=function(r){return typeof r=="boolean"},t.isNull=function(r){return r===null},t.isNullOrUndefined=function(r){return r==null},t.isNumber=function(r){return typeof r=="number"},t.isString=function(r){return typeof r=="string"},t.isSymbol=function(r){return typeof r=="symbol"},t.isUndefined=function(r){return r===void 0},t.isRegExp=function(r){return s(r)==="[object RegExp]"},t.isObject=function(r){return typeof r=="object"&&r!==null},t.isDate=function(r){return s(r)==="[object Date]"},t.isError=function(r){return s(r)==="[object Error]"||r instanceof Error},t.isFunction=function(r){return typeof r=="function"},t.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},t.isBuffer=i.isBuffer}).call(this,e(3).Buffer)},function(n,t,e){(function(i){!i.version||i.version.indexOf("v0.")===0||i.version.indexOf("v1.")===0&&i.version.indexOf("v1.8.")!==0?n.exports={nextTick:function(s,r,o,a){if(typeof s!="function")throw new TypeError('"callback" argument must be a function');var c,l,u=arguments.length;switch(u){case 0:case 1:return i.nextTick(s);case 2:return i.nextTick(function(){s.call(null,r)});case 3:return i.nextTick(function(){s.call(null,r,o)});case 4:return i.nextTick(function(){s.call(null,r,o,a)});default:for(c=new Array(u-1),l=0;l<c.length;)c[l++]=arguments[l];return i.nextTick(function(){s.apply(null,c)})}}}:n.exports=i}).call(this,e(4))},function(n,t,e){var i=e(3),s=i.Buffer;function r(a,c){for(var l in a)c[l]=a[l]}function o(a,c,l){return s(a,c,l)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?n.exports=i:(r(i,t),t.Buffer=o),r(s,o),o.from=function(a,c,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return s(a,c,l)},o.alloc=function(a,c,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=s(a);return c!==void 0?typeof l=="string"?u.fill(c,l):u.fill(c):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return s(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(a)}},function(n,t,e){var i=e(17)(Object,"create");n.exports=i},function(n,t,e){var i=e(31);n.exports=function(s,r){for(var o=s.length;o--;)if(i(s[o][0],r))return o;return-1}},function(n,t,e){var i=e(96);n.exports=function(s,r){var o=s.__data__;return i(r)?o[typeof r=="string"?"string":"hash"]:o.map}},function(n,t,e){(function(i){var s=i!==void 0&&i||typeof self<"u"&&self||window,r=Function.prototype.apply;function o(a,c){this._id=a,this._clearFn=c}t.setTimeout=function(){return new o(r.call(setTimeout,s,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,s,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(a){a&&a.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(s,this._id)},t.enroll=function(a,c){clearTimeout(a._idleTimeoutId),a._idleTimeout=c},t.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},t._unrefActive=t.active=function(a){clearTimeout(a._idleTimeoutId);var c=a._idleTimeout;c>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},c))},e(35),t.setImmediate=typeof self<"u"&&self.setImmediate||i!==void 0&&i.setImmediate||this&&this.setImmediate,t.clearImmediate=typeof self<"u"&&self.clearImmediate||i!==void 0&&i.clearImmediate||this&&this.clearImmediate}).call(this,e(0))},function(n,t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(o){return typeof o=="function"}function s(o){return typeof o=="object"&&o!==null}function r(o){return o===void 0}n.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(o){if(!function(a){return typeof a=="number"}(o)||o<0||isNaN(o))throw TypeError("n must be a positive number");return this._maxListeners=o,this},e.prototype.emit=function(o){var a,c,l,u,h,f;if(this._events||(this._events={}),o==="error"&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((a=arguments[1])instanceof Error)throw a;var m=new Error('Uncaught, unspecified "error" event. ('+a+")");throw m.context=a,m}if(r(c=this._events[o]))return!1;if(i(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),c.apply(this,u)}else if(s(c))for(u=Array.prototype.slice.call(arguments,1),l=(f=c.slice()).length,h=0;h<l;h++)f[h].apply(this,u);return!0},e.prototype.addListener=function(o,a){var c;if(!i(a))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",o,i(a.listener)?a.listener:a),this._events[o]?s(this._events[o])?this._events[o].push(a):this._events[o]=[this._events[o],a]:this._events[o]=a,s(this._events[o])&&!this._events[o].warned&&(c=r(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[o].length>c&&(this._events[o].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[o].length),typeof console.trace=="function"&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(o,a){if(!i(a))throw TypeError("listener must be a function");var c=!1;function l(){this.removeListener(o,l),c||(c=!0,a.apply(this,arguments))}return l.listener=a,this.on(o,l),this},e.prototype.removeListener=function(o,a){var c,l,u,h;if(!i(a))throw TypeError("listener must be a function");if(!this._events||!this._events[o])return this;if(u=(c=this._events[o]).length,l=-1,c===a||i(c.listener)&&c.listener===a)delete this._events[o],this._events.removeListener&&this.emit("removeListener",o,a);else if(s(c)){for(h=u;h-- >0;)if(c[h]===a||c[h].listener&&c[h].listener===a){l=h;break}if(l<0)return this;c.length===1?(c.length=0,delete this._events[o]):c.splice(l,1),this._events.removeListener&&this.emit("removeListener",o,a)}return this},e.prototype.removeAllListeners=function(o){var a,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[o]&&delete this._events[o],this;if(arguments.length===0){for(a in this._events)a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events={},this}if(i(c=this._events[o]))this.removeListener(o,c);else if(c)for(;c.length;)this.removeListener(o,c[c.length-1]);return delete this._events[o],this},e.prototype.listeners=function(o){return this._events&&this._events[o]?i(this._events[o])?[this._events[o]]:this._events[o].slice():[]},e.prototype.listenerCount=function(o){if(this._events){var a=this._events[o];if(i(a))return 1;if(a)return a.length}return 0},e.listenerCount=function(o,a){return o.listenerCount(a)}},function(n,t,e){(t=n.exports=e(23)).Stream=t,t.Readable=t,t.Writable=e(14),t.Duplex=e(1),t.Transform=e(27),t.PassThrough=e(45)},function(n,t,e){(function(i,s,r){var o=e(6);function a(P){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(D,H,B){var V=D.entry;for(D.entry=null;V;){var $=V.callback;H.pendingcb--,$(void 0),V=V.next}H.corkedRequestsFree?H.corkedRequestsFree.next=D:H.corkedRequestsFree=D})(R,P)}}n.exports=x;var c,l=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?s:o.nextTick;x.WritableState=y;var u=e(5);u.inherits=e(2);var h,f={deprecate:e(44)},m=e(24),p=e(7).Buffer,d=r.Uint8Array||function(){},b=e(25);function g(){}function y(P,R){c=c||e(1),P=P||{};var D=R instanceof c;this.objectMode=!!P.objectMode,D&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var H=P.highWaterMark,B=P.writableHighWaterMark,V=this.objectMode?16:16384;this.highWaterMark=H||H===0?H:D&&(B||B===0)?B:V,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=P.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){(function(K,L){var O=K._writableState,A=O.sync,Y=O.writecb;if(function(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}(O),L)(function(N,q,X,Q,_){--q.pendingcb,X?(o.nextTick(_,Q),o.nextTick(I,N,q),N._writableState.errorEmitted=!0,N.emit("error",Q)):(_(Q),N._writableState.errorEmitted=!0,N.emit("error",Q),I(N,q))})(K,O,A,L,Y);else{var M=E(O);M||O.corked||O.bufferProcessing||!O.bufferedRequest||S(K,O),A?l(C,K,O,M,Y):C(K,O,M,Y)}})(R,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function x(P){if(c=c||e(1),!(h.call(x,this)||this instanceof c))return new x(P);this._writableState=new y(P,this),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),m.call(this)}function w(P,R,D,H,B,V,$){R.writelen=H,R.writecb=$,R.writing=!0,R.sync=!0,D?P._writev(B,R.onwrite):P._write(B,V,R.onwrite),R.sync=!1}function C(P,R,D,H){D||function(B,V){V.length===0&&V.needDrain&&(V.needDrain=!1,B.emit("drain"))}(P,R),R.pendingcb--,H(),I(P,R)}function S(P,R){R.bufferProcessing=!0;var D=R.bufferedRequest;if(P._writev&&D&&D.next){var H=R.bufferedRequestCount,B=new Array(H),V=R.corkedRequestsFree;V.entry=D;for(var $=0,U=!0;D;)B[$]=D,D.isBuf||(U=!1),D=D.next,$+=1;B.allBuffers=U,w(P,R,!0,R.length,B,"",V.finish),R.pendingcb++,R.lastBufferedRequest=null,V.next?(R.corkedRequestsFree=V.next,V.next=null):R.corkedRequestsFree=new a(R),R.bufferedRequestCount=0}else{for(;D;){var K=D.chunk,L=D.encoding,O=D.callback;if(w(P,R,!1,R.objectMode?1:K.length,K,L,O),D=D.next,R.bufferedRequestCount--,R.writing)break}D===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=D,R.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function T(P,R){P._final(function(D){R.pendingcb--,D&&P.emit("error",D),R.prefinished=!0,P.emit("prefinish"),I(P,R)})}function I(P,R){var D=E(R);return D&&(function(H,B){B.prefinished||B.finalCalled||(typeof H._final=="function"?(B.pendingcb++,B.finalCalled=!0,o.nextTick(T,H,B)):(B.prefinished=!0,H.emit("prefinish")))}(P,R),R.pendingcb===0&&(R.finished=!0,P.emit("finish"))),D}u.inherits(x,m),y.prototype.getBuffer=function(){for(var P=this.bufferedRequest,R=[];P;)R.push(P),P=P.next;return R},function(){try{Object.defineProperty(y.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(P){return!!h.call(this,P)||this===x&&P&&P._writableState instanceof y}})):h=function(P){return P instanceof this},x.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},x.prototype.write=function(P,R,D){var H=this._writableState,B=!1,V=!H.objectMode&&function($){return p.isBuffer($)||$ instanceof d}(P);return V&&!p.isBuffer(P)&&(P=function($){return p.from($)}(P)),typeof R=="function"&&(D=R,R=null),V?R="buffer":R||(R=H.defaultEncoding),typeof D!="function"&&(D=g),H.ended?function($,U){var K=new Error("write after end");$.emit("error",K),o.nextTick(U,K)}(this,D):(V||function($,U,K,L){var O=!0,A=!1;return K===null?A=new TypeError("May not write null values to stream"):typeof K=="string"||K===void 0||U.objectMode||(A=new TypeError("Invalid non-string/buffer chunk")),A&&($.emit("error",A),o.nextTick(L,A),O=!1),O}(this,H,P,D))&&(H.pendingcb++,B=function($,U,K,L,O,A){if(!K){var Y=function(X,Q,_){return X.objectMode||X.decodeStrings===!1||typeof Q!="string"||(Q=p.from(Q,_)),Q}(U,L,O);L!==Y&&(K=!0,O="buffer",L=Y)}var M=U.objectMode?1:L.length;U.length+=M;var N=U.length<U.highWaterMark;if(N||(U.needDrain=!0),U.writing||U.corked){var q=U.lastBufferedRequest;U.lastBufferedRequest={chunk:L,encoding:O,isBuf:K,callback:A,next:null},q?q.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else w($,U,!1,M,L,O,A);return N}(this,H,V,P,R,D)),B},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.finished||P.bufferProcessing||!P.bufferedRequest||S(this,P))},x.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(P,R,D){D(new Error("_write() is not implemented"))},x.prototype._writev=null,x.prototype.end=function(P,R,D){var H=this._writableState;typeof P=="function"?(D=P,P=null,R=null):typeof R=="function"&&(D=R,R=null),P!=null&&this.write(P,R),H.corked&&(H.corked=1,this.uncork()),H.ending||H.finished||function(B,V,$){V.ending=!0,I(B,V),$&&(V.finished?o.nextTick($):B.once("finish",$)),V.ended=!0,B.writable=!1}(this,H,D)},Object.defineProperty(x.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),x.prototype.destroy=b.destroy,x.prototype._undestroy=b.undestroy,x.prototype._destroy=function(P,R){this.end(),R(P)}}).call(this,e(4),e(11).setImmediate,e(0))},function(n,t,e){(function(i,s,r){n.exports=function o(a,c,l){function u(m,p){if(!c[m]){if(!a[m]){var d=typeof _dereq_=="function"&&_dereq_;if(!p&&d)return d(m,!0);if(h)return h(m,!0);var b=new Error("Cannot find module '"+m+"'");throw b.code="MODULE_NOT_FOUND",b}var g=c[m]={exports:{}};a[m][0].call(g.exports,function(y){return u(a[m][1][y]||y)},g,g.exports,o,a,c,l)}return c[m].exports}for(var h=typeof _dereq_=="function"&&_dereq_,f=0;f<l.length;f++)u(l[f]);return u}({1:[function(o,a,c){a.exports=function(l){var u=l._SomePromiseArray;function h(f){var m=new u(f),p=m.promise();return m.setHowMany(1),m.setUnwrap(),m.init(),p}l.any=function(f){return h(f)},l.prototype.any=function(){return h(this)}}},{}],2:[function(o,a,c){var l;try{throw new Error}catch(g){l=g}var u=o("./schedule"),h=o("./queue"),f=o("./util");function m(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new h(16),this._normalQueue=new h(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var g=this;this.drainQueues=function(){g._drainQueues()},this._schedule=u}function p(g,y,x){this._lateQueue.push(g,y,x),this._queueTick()}function d(g,y,x){this._normalQueue.push(g,y,x),this._queueTick()}function b(g){this._normalQueue._pushOne(g),this._queueTick()}m.prototype.setScheduler=function(g){var y=this._schedule;return this._schedule=g,this._customScheduler=!0,y},m.prototype.hasCustomScheduler=function(){return this._customScheduler},m.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},m.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},m.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},m.prototype.fatalError=function(g,y){y?(i.stderr.write("Fatal "+(g instanceof Error?g.stack:g)+`
`),i.exit(2)):this.throwLater(g)},m.prototype.throwLater=function(g,y){if(arguments.length===1&&(y=g,g=function(){throw y}),typeof setTimeout<"u")setTimeout(function(){g(y)},0);else try{this._schedule(function(){g(y)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}},f.hasDevTools?(m.prototype.invokeLater=function(g,y,x){this._trampolineEnabled?p.call(this,g,y,x):this._schedule(function(){setTimeout(function(){g.call(y,x)},100)})},m.prototype.invoke=function(g,y,x){this._trampolineEnabled?d.call(this,g,y,x):this._schedule(function(){g.call(y,x)})},m.prototype.settlePromises=function(g){this._trampolineEnabled?b.call(this,g):this._schedule(function(){g._settlePromises()})}):(m.prototype.invokeLater=p,m.prototype.invoke=d,m.prototype.settlePromises=b),m.prototype._drainQueue=function(g){for(;g.length()>0;){var y=g.shift();if(typeof y=="function"){var x=g.shift(),w=g.shift();y.call(x,w)}else y._settlePromises()}},m.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},m.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},m.prototype._reset=function(){this._isTickUsed=!1},a.exports=m,a.exports.firstLineError=l},{"./queue":26,"./schedule":29,"./util":36}],3:[function(o,a,c){a.exports=function(l,u,h,f){var m=!1,p=function(y,x){this._reject(x)},d=function(y,x){x.promiseRejectionQueued=!0,x.bindingPromise._then(p,p,null,this,y)},b=function(y,x){(50397184&this._bitField)==0&&this._resolveCallback(x.target)},g=function(y,x){x.promiseRejectionQueued||this._reject(y)};l.prototype.bind=function(y){m||(m=!0,l.prototype._propagateFrom=f.propagateFromFunction(),l.prototype._boundValue=f.boundValueFunction());var x=h(y),w=new l(u);w._propagateFrom(this,1);var C=this._target();if(w._setBoundTo(x),x instanceof l){var S={promiseRejectionQueued:!1,promise:w,target:C,bindingPromise:x};C._then(u,d,void 0,w,S),x._then(b,g,void 0,w,S),w._setOnCancel(x)}else w._resolveCallback(C);return w},l.prototype._setBoundTo=function(y){y!==void 0?(this._bitField=2097152|this._bitField,this._boundTo=y):this._bitField=-2097153&this._bitField},l.prototype._isBound=function(){return(2097152&this._bitField)==2097152},l.bind=function(y,x){return l.resolve(x).bind(y)}}},{}],4:[function(o,a,c){var l;typeof Promise<"u"&&(l=Promise);var u=o("./promise")();u.noConflict=function(){try{Promise===u&&(Promise=l)}catch{}return u},a.exports=u},{"./promise":22}],5:[function(o,a,c){var l=Object.create;if(l){var u=l(null),h=l(null);u[" size"]=h[" size"]=0}a.exports=function(f){var m=o("./util"),p=m.canEvaluate;function d(y){return function(x,w){var C;if(x!=null&&(C=x[w]),typeof C!="function"){var S="Object "+m.classString(x)+" has no method '"+m.toString(w)+"'";throw new f.TypeError(S)}return C}(y,this.pop()).apply(y,this)}function b(y){return y[this]}function g(y){var x=+this;return x<0&&(x=Math.max(0,x+y.length)),y[x]}m.isIdentifier,f.prototype.call=function(y){var x=[].slice.call(arguments,1);return x.push(y),this._then(d,void 0,void 0,x,void 0)},f.prototype.get=function(y){var x;if(typeof y=="number")x=g;else if(p){var w=(void 0)(y);x=w!==null?w:b}else x=b;return this._then(x,void 0,void 0,y,void 0)}}},{"./util":36}],6:[function(o,a,c){a.exports=function(l,u,h,f){var m=o("./util"),p=m.tryCatch,d=m.errorObj,b=l._async;l.prototype.break=l.prototype.cancel=function(){if(!f.cancellation())return this._warn("cancellation is disabled");for(var g=this,y=g;g._isCancellable();){if(!g._cancelBy(y)){y._isFollowing()?y._followee().cancel():y._cancelBranched();break}var x=g._cancellationParent;if(x==null||!x._isCancellable()){g._isFollowing()?g._followee().cancel():g._cancelBranched();break}g._isFollowing()&&g._followee().cancel(),g._setWillBeCancelled(),y=g,g=x}},l.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},l.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},l.prototype._cancelBy=function(g){return g===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},l.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},l.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),b.invoke(this._cancelPromises,this,void 0))},l.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},l.prototype._unsetOnCancel=function(){this._onCancelField=void 0},l.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},l.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},l.prototype._doInvokeOnCancel=function(g,y){if(m.isArray(g))for(var x=0;x<g.length;++x)this._doInvokeOnCancel(g[x],y);else if(g!==void 0)if(typeof g=="function"){if(!y){var w=p(g).call(this._boundValue());w===d&&(this._attachExtraTrace(w.e),b.throwLater(w.e))}}else g._resultCancelled(this)},l.prototype._invokeOnCancel=function(){var g=this._onCancel();this._unsetOnCancel(),b.invoke(this._doInvokeOnCancel,this,g)},l.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},l.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(o,a,c){a.exports=function(l){var u=o("./util"),h=o("./es5").keys,f=u.tryCatch,m=u.errorObj;return function(p,d,b){return function(g){var y=b._boundValue();t:for(var x=0;x<p.length;++x){var w=p[x];if(w===Error||w!=null&&w.prototype instanceof Error){if(g instanceof w)return f(d).call(y,g)}else if(typeof w=="function"){var C=f(w).call(y,g);if(C===m)return C;if(C)return f(d).call(y,g)}else if(u.isObject(g)){for(var S=h(w),E=0;E<S.length;++E){var T=S[E];if(w[T]!=g[T])continue t}return f(d).call(y,g)}}return l}}}},{"./es5":13,"./util":36}],8:[function(o,a,c){a.exports=function(l){var u=!1,h=[];function f(){this._trace=new f.CapturedTrace(m())}function m(){var p=h.length-1;if(p>=0)return h[p]}return l.prototype._promiseCreated=function(){},l.prototype._pushContext=function(){},l.prototype._popContext=function(){return null},l._peekContext=l.prototype._peekContext=function(){},f.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,h.push(this._trace))},f.prototype._popContext=function(){if(this._trace!==void 0){var p=h.pop(),d=p._promiseCreated;return p._promiseCreated=null,d}return null},f.CapturedTrace=null,f.create=function(){if(u)return new f},f.deactivateLongStackTraces=function(){},f.activateLongStackTraces=function(){var p=l.prototype._pushContext,d=l.prototype._popContext,b=l._peekContext,g=l.prototype._peekContext,y=l.prototype._promiseCreated;f.deactivateLongStackTraces=function(){l.prototype._pushContext=p,l.prototype._popContext=d,l._peekContext=b,l.prototype._peekContext=g,l.prototype._promiseCreated=y,u=!1},u=!0,l.prototype._pushContext=f.prototype._pushContext,l.prototype._popContext=f.prototype._popContext,l._peekContext=l.prototype._peekContext=m,l.prototype._promiseCreated=function(){var x=this._peekContext();x&&x._promiseCreated==null&&(x._promiseCreated=this)}},f}},{}],9:[function(o,a,c){a.exports=function(l,u){var h,f,m,p=l._getDomain,d=l._async,b=o("./errors").Warning,g=o("./util"),y=g.canAttachTrace,x=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,w=/\((?:timers\.js):\d+:\d+\)/,C=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,E=null,T=!1,I=g.env("BLUEBIRD_DEBUG")!=0,P=!(g.env("BLUEBIRD_WARNINGS")==0||!I&&!g.env("BLUEBIRD_WARNINGS")),R=!(g.env("BLUEBIRD_LONG_STACK_TRACES")==0||!I&&!g.env("BLUEBIRD_LONG_STACK_TRACES")),D=g.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(P||!!g.env("BLUEBIRD_W_FORGOTTEN_RETURN"));l.prototype.suppressUnhandledRejections=function(){var W=this._target();W._bitField=-1048577&W._bitField|524288},l.prototype._ensurePossibleRejectionHandled=function(){if((524288&this._bitField)==0){this._setRejectionIsUnhandled();var W=this;setTimeout(function(){W._notifyUnhandledRejection()},1)}},l.prototype._notifyUnhandledRejectionIsHandled=function(){Z("rejectionHandled",h,void 0,this)},l.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},l.prototype._returnedNonUndefined=function(){return(268435456&this._bitField)!=0},l.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var W=this._settledValue();this._setUnhandledRejectionIsNotified(),Z("unhandledRejection",f,W,this)}},l.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},l.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},l.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},l.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},l.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},l.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},l.prototype._warn=function(W,G,et){return k(W,G,et||this)},l.onPossiblyUnhandledRejection=function(W){var G=p();f=typeof W=="function"?G===null?W:g.domainBind(G,W):void 0},l.onUnhandledRejectionHandled=function(W){var G=p();h=typeof W=="function"?G===null?W:g.domainBind(G,W):void 0};var H=function(){};l.longStackTraces=function(){if(d.haveItemsQueued()&&!dt.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!dt.longStackTraces&&at()){var W=l.prototype._captureStackTrace,G=l.prototype._attachExtraTrace;dt.longStackTraces=!0,H=function(){if(d.haveItemsQueued()&&!dt.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);l.prototype._captureStackTrace=W,l.prototype._attachExtraTrace=G,u.deactivateLongStackTraces(),d.enableTrampoline(),dt.longStackTraces=!1},l.prototype._captureStackTrace=_,l.prototype._attachExtraTrace=v,u.activateLongStackTraces(),d.disableTrampolineIfNecessary()}},l.hasLongStackTraces=function(){return dt.longStackTraces&&at()};var B=function(){try{if(typeof CustomEvent=="function"){var W=new CustomEvent("CustomEvent");return g.global.dispatchEvent(W),function(G,et){var tt=new CustomEvent(G.toLowerCase(),{detail:et,cancelable:!0});return!g.global.dispatchEvent(tt)}}return typeof Event=="function"?(W=new Event("CustomEvent"),g.global.dispatchEvent(W),function(G,et){var tt=new Event(G.toLowerCase(),{cancelable:!0});return tt.detail=et,!g.global.dispatchEvent(tt)}):((W=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),g.global.dispatchEvent(W),function(G,et){var tt=document.createEvent("CustomEvent");return tt.initCustomEvent(G.toLowerCase(),!1,!0,et),!g.global.dispatchEvent(tt)})}catch{}return function(){return!1}}(),V=g.isNode?function(){return i.emit.apply(i,arguments)}:g.global?function(W){var G="on"+W.toLowerCase(),et=g.global[G];return!!et&&(et.apply(g.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function $(W,G){return{promise:G}}var U={promiseCreated:$,promiseFulfilled:$,promiseRejected:$,promiseResolved:$,promiseCancelled:$,promiseChained:function(W,G,et){return{promise:G,child:et}},warning:function(W,G){return{warning:G}},unhandledRejection:function(W,G,et){return{reason:G,promise:et}},rejectionHandled:$},K=function(W){var G=!1;try{G=V.apply(null,arguments)}catch(tt){d.throwLater(tt),G=!0}var et=!1;try{et=B(W,U[W].apply(null,arguments))}catch(tt){d.throwLater(tt),et=!0}return et||G};function L(){return!1}function O(W,G,et){var tt=this;try{W(G,et,function(rt){if(typeof rt!="function")throw new TypeError("onCancel must be a function, got: "+g.toString(rt));tt._attachCancellationCallback(rt)})}catch(rt){return rt}}function A(W){if(!this._isCancellable())return this;var G=this._onCancel();G!==void 0?g.isArray(G)?G.push(W):this._setOnCancel([G,W]):this._setOnCancel(W)}function Y(){return this._onCancelField}function M(W){this._onCancelField=W}function N(){this._cancellationParent=void 0,this._onCancelField=void 0}function q(W,G){if((1&G)!=0){this._cancellationParent=W;var et=W._branchesRemainingToCancel;et===void 0&&(et=0),W._branchesRemainingToCancel=et+1}(2&G)!=0&&W._isBound()&&this._setBoundTo(W._boundTo)}l.config=function(W){if("longStackTraces"in(W=Object(W))&&(W.longStackTraces?l.longStackTraces():!W.longStackTraces&&l.hasLongStackTraces()&&H()),"warnings"in W){var G=W.warnings;dt.warnings=!!G,D=dt.warnings,g.isObject(G)&&"wForgottenReturn"in G&&(D=!!G.wForgottenReturn)}if("cancellation"in W&&W.cancellation&&!dt.cancellation){if(d.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");l.prototype._clearCancellationData=N,l.prototype._propagateFrom=q,l.prototype._onCancel=Y,l.prototype._setOnCancel=M,l.prototype._attachCancellationCallback=A,l.prototype._execute=O,X=q,dt.cancellation=!0}return"monitoring"in W&&(W.monitoring&&!dt.monitoring?(dt.monitoring=!0,l.prototype._fireEvent=K):!W.monitoring&&dt.monitoring&&(dt.monitoring=!1,l.prototype._fireEvent=L)),l},l.prototype._fireEvent=L,l.prototype._execute=function(W,G,et){try{W(G,et)}catch(tt){return tt}},l.prototype._onCancel=function(){},l.prototype._setOnCancel=function(W){},l.prototype._attachCancellationCallback=function(W){},l.prototype._captureStackTrace=function(){},l.prototype._attachExtraTrace=function(){},l.prototype._clearCancellationData=function(){},l.prototype._propagateFrom=function(W,G){};var X=function(W,G){(2&G)!=0&&W._isBound()&&this._setBoundTo(W._boundTo)};function Q(){var W=this._boundTo;return W!==void 0&&W instanceof l?W.isFulfilled()?W.value():void 0:W}function _(){this._trace=new Mt(this._peekContext())}function v(W,G){if(y(W)){var et=this._trace;if(et!==void 0&&G&&(et=et._parent),et!==void 0)et.attachExtraTrace(W);else if(!W.__stackCleaned__){var tt=F(W);g.notEnumerableProp(W,"stack",tt.message+`
`+tt.stack.join(`
`)),g.notEnumerableProp(W,"__stackCleaned__",!0)}}}function k(W,G,et){if(dt.warnings){var tt,rt=new b(W);if(G)et._attachExtraTrace(rt);else if(dt.longStackTraces&&(tt=l._peekContext()))tt.attachExtraTrace(rt);else{var st=F(rt);rt.stack=st.message+`
`+st.stack.join(`
`)}K("warning",rt)||z(rt,"",!0)}}function j(W){for(var G=[],et=0;et<W.length;++et){var tt=W[et],rt=tt==="    (No stack trace)"||S.test(tt),st=rt&&_t(tt);rt&&!st&&(T&&tt.charAt(0)!==" "&&(tt="    "+tt),G.push(tt))}return G}function F(W){var G=W.stack,et=W.toString();return G=typeof G=="string"&&G.length>0?function(tt){for(var rt=tt.stack.replace(/\s+$/g,"").split(`
`),st=0;st<rt.length;++st){var it=rt[st];if(it==="    (No stack trace)"||S.test(it))break}return st>0&&tt.name!="SyntaxError"&&(rt=rt.slice(st)),rt}(W):["    (No stack trace)"],{message:et,stack:W.name=="SyntaxError"?G:j(G)}}function z(W,G,et){if(typeof console<"u"){var tt;if(g.isObject(W)){var rt=W.stack;tt=G+E(rt,W)}else tt=G+String(W);typeof m=="function"?m(tt,et):typeof console.log!="function"&&typeof console.log!="object"||console.log(tt)}}function Z(W,G,et,tt){var rt=!1;try{typeof G=="function"&&(rt=!0,W==="rejectionHandled"?G(tt):G(et,tt))}catch(st){d.throwLater(st)}W==="unhandledRejection"?K(W,et,tt)||rt||z(et,"Unhandled rejection "):K(W,tt)}function nt(W){var G;if(typeof W=="function")G="[function "+(W.name||"anonymous")+"]";else{if(G=W&&typeof W.toString=="function"?W.toString():g.toString(W),/\[object [a-zA-Z0-9$_]+\]/.test(G))try{G=JSON.stringify(W)}catch{}G.length===0&&(G="(empty array)")}return"(<"+function(et){return et.length<41?et:et.substr(0,38)+"..."}(G)+">, no stack trace)"}function at(){return typeof Zt=="function"}var _t=function(){return!1},ut=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function jt(W){var G=W.match(ut);if(G)return{fileName:G[1],line:parseInt(G[2],10)}}function Mt(W){this._parent=W,this._promisesCreated=0;var G=this._length=1+(W===void 0?0:W._length);Zt(this,Mt),G>32&&this.uncycle()}g.inherits(Mt,Error),u.CapturedTrace=Mt,Mt.prototype.uncycle=function(){var W=this._length;if(!(W<2)){for(var G=[],et={},tt=0,rt=this;rt!==void 0;++tt)G.push(rt),rt=rt._parent;for(tt=(W=this._length=tt)-1;tt>=0;--tt){var st=G[tt].stack;et[st]===void 0&&(et[st]=tt)}for(tt=0;tt<W;++tt){var it=et[G[tt].stack];if(it!==void 0&&it!==tt){it>0&&(G[it-1]._parent=void 0,G[it-1]._length=1),G[tt]._parent=void 0,G[tt]._length=1;var ht=tt>0?G[tt-1]:this;it<W-1?(ht._parent=G[it+1],ht._parent.uncycle(),ht._length=ht._parent._length+1):(ht._parent=void 0,ht._length=1);for(var kt=ht._length+1,bt=tt-2;bt>=0;--bt)G[bt]._length=kt,kt++;return}}}},Mt.prototype.attachExtraTrace=function(W){if(!W.__stackCleaned__){this.uncycle();for(var G=F(W),et=G.message,tt=[G.stack],rt=this;rt!==void 0;)tt.push(j(rt.stack.split(`
`))),rt=rt._parent;(function(st){for(var it=st[0],ht=1;ht<st.length;++ht){for(var kt=st[ht],bt=it.length-1,ae=it[bt],Dt=-1,zt=kt.length-1;zt>=0;--zt)if(kt[zt]===ae){Dt=zt;break}for(zt=Dt;zt>=0;--zt){var jn=kt[zt];if(it[bt]!==jn)break;it.pop(),bt--}it=kt}})(tt),function(st){for(var it=0;it<st.length;++it)(st[it].length===0||it+1<st.length&&st[it][0]===st[it+1][0])&&(st.splice(it,1),it--)}(tt),g.notEnumerableProp(W,"stack",function(st,it){for(var ht=0;ht<it.length-1;++ht)it[ht].push("From previous event:"),it[ht]=it[ht].join(`
`);return ht<it.length&&(it[ht]=it[ht].join(`
`)),st+`
`+it.join(`
`)}(et,tt)),g.notEnumerableProp(W,"__stackCleaned__",!0)}};var Zt=function(){var W=/^\s*at\s*/,G=function(st,it){return typeof st=="string"?st:it.name!==void 0&&it.message!==void 0?it.toString():nt(it)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,S=W,E=G;var et=Error.captureStackTrace;return _t=function(st){return x.test(st)},function(st,it){Error.stackTraceLimit+=6,et(st,it),Error.stackTraceLimit-=6}}var tt,rt=new Error;if(typeof rt.stack=="string"&&rt.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return S=/@/,E=G,T=!0,function(st){st.stack=new Error().stack};try{throw new Error}catch(st){tt="stack"in st}return"stack"in rt||!tt||typeof Error.stackTraceLimit!="number"?(E=function(st,it){return typeof st=="string"?st:typeof it!="object"&&typeof it!="function"||it.name===void 0||it.message===void 0?nt(it):it.toString()},null):(S=W,E=G,function(st){Error.stackTraceLimit+=6;try{throw new Error}catch(it){st.stack=it.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&console.warn!==void 0&&(m=function(W){console.warn(W)},g.isNode&&i.stderr.isTTY?m=function(W,G){var et=G?"\x1B[33m":"\x1B[31m";console.warn(et+W+`\x1B[0m
`)}:g.isNode||typeof new Error().stack!="string"||(m=function(W,G){console.warn("%c"+W,G?"color: darkorange":"color: red")}));var dt={warnings:P,longStackTraces:!1,cancellation:!1,monitoring:!1};return R&&l.longStackTraces(),{longStackTraces:function(){return dt.longStackTraces},warnings:function(){return dt.warnings},cancellation:function(){return dt.cancellation},monitoring:function(){return dt.monitoring},propagateFromFunction:function(){return X},boundValueFunction:function(){return Q},checkForgottenReturns:function(W,G,et,tt,rt){if(W===void 0&&G!==null&&D){if(rt!==void 0&&rt._returnedNonUndefined()||(65535&tt._bitField)==0)return;et&&(et+=" ");var st="",it="";if(G._trace){for(var ht=G._trace.stack.split(`
`),kt=j(ht),bt=kt.length-1;bt>=0;--bt){var ae=kt[bt];if(!w.test(ae)){var Dt=ae.match(C);Dt&&(st="at "+Dt[1]+":"+Dt[2]+":"+Dt[3]+" ");break}}if(kt.length>0){var zt=kt[0];for(bt=0;bt<ht.length;++bt)if(ht[bt]===zt){bt>0&&(it=`
`+ht[bt-1]);break}}}var jn="a promise was created in a "+et+"handler "+st+"but was not returned from it, see http://goo.gl/rRqMUw"+it;tt._warn(jn,!0,G)}},setBounds:function(W,G){if(at()){for(var et,tt,rt=W.stack.split(`
`),st=G.stack.split(`
`),it=-1,ht=-1,kt=0;kt<rt.length;++kt)if(bt=jt(rt[kt])){et=bt.fileName,it=bt.line;break}for(kt=0;kt<st.length;++kt){var bt;if(bt=jt(st[kt])){tt=bt.fileName,ht=bt.line;break}}it<0||ht<0||!et||!tt||et!==tt||it>=ht||(_t=function(ae){if(x.test(ae))return!0;var Dt=jt(ae);return!!(Dt&&Dt.fileName===et&&it<=Dt.line&&Dt.line<=ht)})}},warn:k,deprecated:function(W,G){var et=W+" is deprecated and will be removed in a future version.";return G&&(et+=" Use "+G+" instead."),k(et)},CapturedTrace:Mt,fireDomEvent:B,fireGlobalEvent:V}}},{"./errors":12,"./util":36}],10:[function(o,a,c){a.exports=function(l){function u(){return this.value}function h(){throw this.reason}l.prototype.return=l.prototype.thenReturn=function(f){return f instanceof l&&f.suppressUnhandledRejections(),this._then(u,void 0,void 0,{value:f},void 0)},l.prototype.throw=l.prototype.thenThrow=function(f){return this._then(h,void 0,void 0,{reason:f},void 0)},l.prototype.catchThrow=function(f){if(arguments.length<=1)return this._then(void 0,h,void 0,{reason:f},void 0);var m=arguments[1];return this.caught(f,function(){throw m})},l.prototype.catchReturn=function(f){if(arguments.length<=1)return f instanceof l&&f.suppressUnhandledRejections(),this._then(void 0,u,void 0,{value:f},void 0);var m=arguments[1];return m instanceof l&&m.suppressUnhandledRejections(),this.caught(f,function(){return m})}}},{}],11:[function(o,a,c){a.exports=function(l,u){var h=l.reduce,f=l.all;function m(){return f(this)}l.prototype.each=function(p){return h(this,p,u,0)._then(m,void 0,void 0,this,void 0)},l.prototype.mapSeries=function(p){return h(this,p,u,u)},l.each=function(p,d){return h(p,d,u,0)._then(m,void 0,void 0,p,void 0)},l.mapSeries=function(p,d){return h(p,d,u,u)}}},{}],12:[function(o,a,c){var l,u,h=o("./es5"),f=h.freeze,m=o("./util"),p=m.inherits,d=m.notEnumerableProp;function b(P,R){function D(H){if(!(this instanceof D))return new D(H);d(this,"message",typeof H=="string"?H:R),d(this,"name",P),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return p(D,Error),D}var g=b("Warning","warning"),y=b("CancellationError","cancellation error"),x=b("TimeoutError","timeout error"),w=b("AggregateError","aggregate error");try{l=TypeError,u=RangeError}catch{l=b("TypeError","type error"),u=b("RangeError","range error")}for(var C="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),S=0;S<C.length;++S)typeof Array.prototype[C[S]]=="function"&&(w.prototype[C[S]]=Array.prototype[C[S]]);h.defineProperty(w.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),w.prototype.isOperational=!0;var E=0;function T(P){if(!(this instanceof T))return new T(P);d(this,"name","OperationalError"),d(this,"message",P),this.cause=P,this.isOperational=!0,P instanceof Error?(d(this,"message",P.message),d(this,"stack",P.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}w.prototype.toString=function(){var P=Array(4*E+1).join(" "),R=`
`+P+`AggregateError of:
`;E++,P=Array(4*E+1).join(" ");for(var D=0;D<this.length;++D){for(var H=this[D]===this?"[Circular AggregateError]":this[D]+"",B=H.split(`
`),V=0;V<B.length;++V)B[V]=P+B[V];R+=(H=B.join(`
`))+`
`}return E--,R},p(T,Error);var I=Error.__BluebirdErrorTypes__;I||(I=f({CancellationError:y,TimeoutError:x,OperationalError:T,RejectionError:T,AggregateError:w}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:I,writable:!1,enumerable:!1,configurable:!1})),a.exports={Error,TypeError:l,RangeError:u,CancellationError:I.CancellationError,OperationalError:I.OperationalError,TimeoutError:I.TimeoutError,AggregateError:I.AggregateError,Warning:g}},{"./es5":13,"./util":36}],13:[function(o,a,c){var l=function(){return this===void 0}();if(l)a.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:l,propertyIsWritable:function(p,d){var b=Object.getOwnPropertyDescriptor(p,d);return!(b&&!b.writable&&!b.set)}};else{var u={}.hasOwnProperty,h={}.toString,f={}.constructor.prototype,m=function(p){var d=[];for(var b in p)u.call(p,b)&&d.push(b);return d};a.exports={isArray:function(p){try{return h.call(p)==="[object Array]"}catch{return!1}},keys:m,names:m,defineProperty:function(p,d,b){return p[d]=b.value,p},getDescriptor:function(p,d){return{value:p[d]}},freeze:function(p){return p},getPrototypeOf:function(p){try{return Object(p).constructor.prototype}catch{return f}},isES5:l,propertyIsWritable:function(){return!0}}}},{}],14:[function(o,a,c){a.exports=function(l,u){var h=l.map;l.prototype.filter=function(f,m){return h(this,f,m,u)},l.filter=function(f,m,p){return h(f,m,p,u)}}},{}],15:[function(o,a,c){a.exports=function(l,u,h){var f=o("./util"),m=l.CancellationError,p=f.errorObj,d=o("./catch_filter")(h);function b(S,E,T){this.promise=S,this.type=E,this.handler=T,this.called=!1,this.cancelPromise=null}function g(S){this.finallyHandler=S}function y(S,E){return S.cancelPromise!=null&&(arguments.length>1?S.cancelPromise._reject(E):S.cancelPromise._cancel(),S.cancelPromise=null,!0)}function x(){return C.call(this,this.promise._target()._settledValue())}function w(S){if(!y(this,S))return p.e=S,p}function C(S){var E=this.promise,T=this.handler;if(!this.called){this.called=!0;var I=this.isFinallyHandler()?T.call(E._boundValue()):T.call(E._boundValue(),S);if(I===h)return I;if(I!==void 0){E._setReturnedNonUndefined();var P=u(I,E);if(P instanceof l){if(this.cancelPromise!=null){if(P._isCancelled()){var R=new m("late cancellation observer");return E._attachExtraTrace(R),p.e=R,p}P.isPending()&&P._attachCancellationCallback(new g(this))}return P._then(x,w,void 0,this,void 0)}}}return E.isRejected()?(y(this),p.e=S,p):(y(this),S)}return b.prototype.isFinallyHandler=function(){return this.type===0},g.prototype._resultCancelled=function(){y(this.finallyHandler)},l.prototype._passThrough=function(S,E,T,I){return typeof S!="function"?this.then():this._then(T,I,void 0,new b(this,E,S),void 0)},l.prototype.lastly=l.prototype.finally=function(S){return this._passThrough(S,0,C,C)},l.prototype.tap=function(S){return this._passThrough(S,1,C)},l.prototype.tapCatch=function(S){var E=arguments.length;if(E===1)return this._passThrough(S,1,void 0,C);var T,I=new Array(E-1),P=0;for(T=0;T<E-1;++T){var R=arguments[T];if(!f.isObject(R))return l.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+f.classString(R)));I[P++]=R}I.length=P;var D=arguments[T];return this._passThrough(d(I,D,this),1,void 0,C)},b}},{"./catch_filter":7,"./util":36}],16:[function(o,a,c){a.exports=function(l,u,h,f,m,p){var d=o("./errors").TypeError,b=o("./util"),g=b.errorObj,y=b.tryCatch,x=[];function w(C,S,E,T){if(p.cancellation()){var I=new l(h),P=this._finallyPromise=new l(h);this._promise=I.lastly(function(){return P}),I._captureStackTrace(),I._setOnCancel(this)}else(this._promise=new l(h))._captureStackTrace();this._stack=T,this._generatorFunction=C,this._receiver=S,this._generator=void 0,this._yieldHandlers=typeof E=="function"?[E].concat(x):x,this._yieldedPromise=null,this._cancellationPhase=!1}b.inherits(w,m),w.prototype._isResolved=function(){return this._promise===null},w.prototype._cleanup=function(){this._promise=this._generator=null,p.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},w.prototype._promiseCancelled=function(){if(!this._isResolved()){var C;if(this._generator.return!==void 0)this._promise._pushContext(),C=y(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var S=new l.CancellationError("generator .return() sentinel");l.coroutine.returnSentinel=S,this._promise._attachExtraTrace(S),this._promise._pushContext(),C=y(this._generator.throw).call(this._generator,S),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(C)}},w.prototype._promiseFulfilled=function(C){this._yieldedPromise=null,this._promise._pushContext();var S=y(this._generator.next).call(this._generator,C);this._promise._popContext(),this._continue(S)},w.prototype._promiseRejected=function(C){this._yieldedPromise=null,this._promise._attachExtraTrace(C),this._promise._pushContext();var S=y(this._generator.throw).call(this._generator,C);this._promise._popContext(),this._continue(S)},w.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof l){var C=this._yieldedPromise;this._yieldedPromise=null,C.cancel()}},w.prototype.promise=function(){return this._promise},w.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},w.prototype._continue=function(C){var S=this._promise;if(C===g)return this._cleanup(),this._cancellationPhase?S.cancel():S._rejectCallback(C.e,!1);var E=C.value;if(C.done===!0)return this._cleanup(),this._cancellationPhase?S.cancel():S._resolveCallback(E);var T=f(E,this._promise);if(T instanceof l||(T=function(P,R,D){for(var H=0;H<R.length;++H){D._pushContext();var B=y(R[H])(P);if(D._popContext(),B===g){D._pushContext();var V=l.reject(g.e);return D._popContext(),V}var $=f(B,D);if($ instanceof l)return $}return null}(T,this._yieldHandlers,this._promise))!==null){var I=(T=T._target())._bitField;(50397184&I)==0?(this._yieldedPromise=T,T._proxy(this,null)):(33554432&I)!=0?l._async.invoke(this._promiseFulfilled,this,T._value()):(16777216&I)!=0?l._async.invoke(this._promiseRejected,this,T._reason()):this._promiseCancelled()}else this._promiseRejected(new d(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(E))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)))},l.coroutine=function(C,S){if(typeof C!="function")throw new d(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var E=Object(S).yieldHandler,T=w,I=new Error().stack;return function(){var P=C.apply(this,arguments),R=new T(void 0,void 0,E,I),D=R.promise();return R._generator=P,R._promiseFulfilled(void 0),D}},l.coroutine.addYieldHandler=function(C){if(typeof C!="function")throw new d("expecting a function but got "+b.classString(C));x.push(C)},l.spawn=function(C){if(p.deprecated("Promise.spawn()","Promise.coroutine()"),typeof C!="function")return u(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var S=new w(C,this),E=S.promise();return S._run(l.spawn),E}}},{"./errors":12,"./util":36}],17:[function(o,a,c){a.exports=function(l,u,h,f,m,p){var d=o("./util");d.canEvaluate,d.tryCatch,d.errorObj,l.join=function(){var b,g=arguments.length-1;g>0&&typeof arguments[g]=="function"&&(b=arguments[g]);var y=[].slice.call(arguments);b&&y.pop();var x=new u(y).promise();return b!==void 0?x.spread(b):x}}},{"./util":36}],18:[function(o,a,c){a.exports=function(l,u,h,f,m,p){var d=l._getDomain,b=o("./util"),g=b.tryCatch,y=b.errorObj,x=l._async;function w(S,E,T,I){this.constructor$(S),this._promise._captureStackTrace();var P=d();this._callback=P===null?E:b.domainBind(P,E),this._preservedValues=I===m?new Array(this.length()):null,this._limit=T,this._inFlight=0,this._queue=[],x.invoke(this._asyncInit,this,void 0)}function C(S,E,T,I){if(typeof E!="function")return h("expecting a function but got "+b.classString(E));var P=0;if(T!==void 0){if(typeof T!="object"||T===null)return l.reject(new TypeError("options argument must be an object but it is "+b.classString(T)));if(typeof T.concurrency!="number")return l.reject(new TypeError("'concurrency' must be a number but it is "+b.classString(T.concurrency)));P=T.concurrency}return new w(S,E,P=typeof P=="number"&&isFinite(P)&&P>=1?P:0,I).promise()}b.inherits(w,u),w.prototype._asyncInit=function(){this._init$(void 0,-2)},w.prototype._init=function(){},w.prototype._promiseFulfilled=function(S,E){var T=this._values,I=this.length(),P=this._preservedValues,R=this._limit;if(E<0){if(T[E=-1*E-1]=S,R>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(R>=1&&this._inFlight>=R)return T[E]=S,this._queue.push(E),!1;P!==null&&(P[E]=S);var D=this._promise,H=this._callback,B=D._boundValue();D._pushContext();var V=g(H).call(B,S,E,I),$=D._popContext();if(p.checkForgottenReturns(V,$,P!==null?"Promise.filter":"Promise.map",D),V===y)return this._reject(V.e),!0;var U=f(V,this._promise);if(U instanceof l){var K=(U=U._target())._bitField;if((50397184&K)==0)return R>=1&&this._inFlight++,T[E]=U,U._proxy(this,-1*(E+1)),!1;if((33554432&K)==0)return(16777216&K)!=0?(this._reject(U._reason()),!0):(this._cancel(),!0);V=U._value()}T[E]=V}return++this._totalResolved>=I&&(P!==null?this._filter(T,P):this._resolve(T),!0)},w.prototype._drainQueue=function(){for(var S=this._queue,E=this._limit,T=this._values;S.length>0&&this._inFlight<E;){if(this._isResolved())return;var I=S.pop();this._promiseFulfilled(T[I],I)}},w.prototype._filter=function(S,E){for(var T=E.length,I=new Array(T),P=0,R=0;R<T;++R)S[R]&&(I[P++]=E[R]);I.length=P,this._resolve(I)},w.prototype.preservedValues=function(){return this._preservedValues},l.prototype.map=function(S,E){return C(this,S,E,null)},l.map=function(S,E,T,I){return C(S,E,T,I)}}},{"./util":36}],19:[function(o,a,c){a.exports=function(l,u,h,f,m){var p=o("./util"),d=p.tryCatch;l.method=function(b){if(typeof b!="function")throw new l.TypeError("expecting a function but got "+p.classString(b));return function(){var g=new l(u);g._captureStackTrace(),g._pushContext();var y=d(b).apply(this,arguments),x=g._popContext();return m.checkForgottenReturns(y,x,"Promise.method",g),g._resolveFromSyncValue(y),g}},l.attempt=l.try=function(b){if(typeof b!="function")return f("expecting a function but got "+p.classString(b));var g,y=new l(u);if(y._captureStackTrace(),y._pushContext(),arguments.length>1){m.deprecated("calling Promise.try with more than 1 argument");var x=arguments[1],w=arguments[2];g=p.isArray(x)?d(b).apply(w,x):d(b).call(w,x)}else g=d(b)();var C=y._popContext();return m.checkForgottenReturns(g,C,"Promise.try",y),y._resolveFromSyncValue(g),y},l.prototype._resolveFromSyncValue=function(b){b===p.errorObj?this._rejectCallback(b.e,!1):this._resolveCallback(b,!0)}}},{"./util":36}],20:[function(o,a,c){var l=o("./util"),u=l.maybeWrapAsError,h=o("./errors").OperationalError,f=o("./es5"),m=/^(?:name|message|stack|cause)$/;function p(d){var b;if(function(w){return w instanceof Error&&f.getPrototypeOf(w)===Error.prototype}(d)){(b=new h(d)).name=d.name,b.message=d.message,b.stack=d.stack;for(var g=f.keys(d),y=0;y<g.length;++y){var x=g[y];m.test(x)||(b[x]=d[x])}return b}return l.markAsOriginatingFromRejection(d),d}a.exports=function(d,b){return function(g,y){if(d!==null){if(g){var x=p(u(g));d._attachExtraTrace(x),d._reject(x)}else if(b){var w=[].slice.call(arguments,1);d._fulfill(w)}else d._fulfill(y);d=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(o,a,c){a.exports=function(l){var u=o("./util"),h=l._async,f=u.tryCatch,m=u.errorObj;function p(g,y){if(!u.isArray(g))return d.call(this,g,y);var x=f(y).apply(this._boundValue(),[null].concat(g));x===m&&h.throwLater(x.e)}function d(g,y){var x=this._boundValue(),w=g===void 0?f(y).call(x,null):f(y).call(x,null,g);w===m&&h.throwLater(w.e)}function b(g,y){if(!g){var x=new Error(g+"");x.cause=g,g=x}var w=f(y).call(this._boundValue(),g);w===m&&h.throwLater(w.e)}l.prototype.asCallback=l.prototype.nodeify=function(g,y){if(typeof g=="function"){var x=d;y!==void 0&&Object(y).spread&&(x=p),this._then(x,b,void 0,this,g)}return this}}},{"./util":36}],22:[function(o,a,c){a.exports=function(){var l=function(){return new w(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},u=function(){return new L.PromiseInspection(this._target())},h=function(M){return L.reject(new w(M))};function f(){}var m,p={},d=o("./util");m=d.isNode?function(){var M=i.domain;return M===void 0&&(M=null),M}:function(){return null},d.notEnumerableProp(L,"_getDomain",m);var b=o("./es5"),g=o("./async"),y=new g;b.defineProperty(L,"_async",{value:y});var x=o("./errors"),w=L.TypeError=x.TypeError;L.RangeError=x.RangeError;var C=L.CancellationError=x.CancellationError;L.TimeoutError=x.TimeoutError,L.OperationalError=x.OperationalError,L.RejectionError=x.OperationalError,L.AggregateError=x.AggregateError;var S=function(){},E={},T={},I=o("./thenables")(L,S),P=o("./promise_array")(L,S,I,h,f),R=o("./context")(L),D=R.create,H=o("./debuggability")(L,R),B=(H.CapturedTrace,o("./finally")(L,I,T)),V=o("./catch_filter")(T),$=o("./nodeback"),U=d.errorObj,K=d.tryCatch;function L(M){M!==S&&function(N,q){if(N==null||N.constructor!==L)throw new w(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof q!="function")throw new w("expecting a function but got "+d.classString(q))}(this,M),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(M),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function O(M){this.promise._resolveCallback(M)}function A(M){this.promise._rejectCallback(M,!1)}function Y(M){var N=new L(S);N._fulfillmentHandler0=M,N._rejectionHandler0=M,N._promise0=M,N._receiver0=M}return L.prototype.toString=function(){return"[object Promise]"},L.prototype.caught=L.prototype.catch=function(M){var N=arguments.length;if(N>1){var q,X=new Array(N-1),Q=0;for(q=0;q<N-1;++q){var _=arguments[q];if(!d.isObject(_))return h("Catch statement predicate: expecting an object but got "+d.classString(_));X[Q++]=_}return X.length=Q,M=arguments[q],this.then(void 0,V(X,M,this))}return this.then(void 0,M)},L.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},L.prototype.then=function(M,N){if(H.warnings()&&arguments.length>0&&typeof M!="function"&&typeof N!="function"){var q=".then() only accepts functions but was passed: "+d.classString(M);arguments.length>1&&(q+=", "+d.classString(N)),this._warn(q)}return this._then(M,N,void 0,void 0,void 0)},L.prototype.done=function(M,N){this._then(M,N,void 0,void 0,void 0)._setIsFinal()},L.prototype.spread=function(M){return typeof M!="function"?h("expecting a function but got "+d.classString(M)):this.all()._then(M,void 0,void 0,E,void 0)},L.prototype.toJSON=function(){var M={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(M.fulfillmentValue=this.value(),M.isFulfilled=!0):this.isRejected()&&(M.rejectionReason=this.reason(),M.isRejected=!0),M},L.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new P(this).promise()},L.prototype.error=function(M){return this.caught(d.originatesFromRejection,M)},L.getNewLibraryCopy=a.exports,L.is=function(M){return M instanceof L},L.fromNode=L.fromCallback=function(M){var N=new L(S);N._captureStackTrace();var q=arguments.length>1&&!!Object(arguments[1]).multiArgs,X=K(M)($(N,q));return X===U&&N._rejectCallback(X.e,!0),N._isFateSealed()||N._setAsyncGuaranteed(),N},L.all=function(M){return new P(M).promise()},L.cast=function(M){var N=I(M);return N instanceof L||((N=new L(S))._captureStackTrace(),N._setFulfilled(),N._rejectionHandler0=M),N},L.resolve=L.fulfilled=L.cast,L.reject=L.rejected=function(M){var N=new L(S);return N._captureStackTrace(),N._rejectCallback(M,!0),N},L.setScheduler=function(M){if(typeof M!="function")throw new w("expecting a function but got "+d.classString(M));return y.setScheduler(M)},L.prototype._then=function(M,N,q,X,Q){var _=Q!==void 0,v=_?Q:new L(S),k=this._target(),j=k._bitField;_||(v._propagateFrom(this,3),v._captureStackTrace(),X===void 0&&(2097152&this._bitField)!=0&&(X=(50397184&j)!=0?this._boundValue():k===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,v));var F=m();if((50397184&j)!=0){var z,Z,nt=k._settlePromiseCtx;(33554432&j)!=0?(Z=k._rejectionHandler0,z=M):(16777216&j)!=0?(Z=k._fulfillmentHandler0,z=N,k._unsetRejectionIsUnhandled()):(nt=k._settlePromiseLateCancellationObserver,Z=new C("late cancellation observer"),k._attachExtraTrace(Z),z=N),y.invoke(nt,k,{handler:F===null?z:typeof z=="function"&&d.domainBind(F,z),promise:v,receiver:X,value:Z})}else k._addCallbacks(M,N,v,X,F);return v},L.prototype._length=function(){return 65535&this._bitField},L.prototype._isFateSealed=function(){return(117506048&this._bitField)!=0},L.prototype._isFollowing=function(){return(67108864&this._bitField)==67108864},L.prototype._setLength=function(M){this._bitField=-65536&this._bitField|65535&M},L.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},L.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},L.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},L.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},L.prototype._isFinal=function(){return(4194304&this._bitField)>0},L.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},L.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},L.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},L.prototype._setAsyncGuaranteed=function(){y.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},L.prototype._receiverAt=function(M){var N=M===0?this._receiver0:this[4*M-4+3];if(N!==p)return N===void 0&&this._isBound()?this._boundValue():N},L.prototype._promiseAt=function(M){return this[4*M-4+2]},L.prototype._fulfillmentHandlerAt=function(M){return this[4*M-4+0]},L.prototype._rejectionHandlerAt=function(M){return this[4*M-4+1]},L.prototype._boundValue=function(){},L.prototype._migrateCallback0=function(M){M._bitField;var N=M._fulfillmentHandler0,q=M._rejectionHandler0,X=M._promise0,Q=M._receiverAt(0);Q===void 0&&(Q=p),this._addCallbacks(N,q,X,Q,null)},L.prototype._migrateCallbackAt=function(M,N){var q=M._fulfillmentHandlerAt(N),X=M._rejectionHandlerAt(N),Q=M._promiseAt(N),_=M._receiverAt(N);_===void 0&&(_=p),this._addCallbacks(q,X,Q,_,null)},L.prototype._addCallbacks=function(M,N,q,X,Q){var _=this._length();if(_>=65531&&(_=0,this._setLength(0)),_===0)this._promise0=q,this._receiver0=X,typeof M=="function"&&(this._fulfillmentHandler0=Q===null?M:d.domainBind(Q,M)),typeof N=="function"&&(this._rejectionHandler0=Q===null?N:d.domainBind(Q,N));else{var v=4*_-4;this[v+2]=q,this[v+3]=X,typeof M=="function"&&(this[v+0]=Q===null?M:d.domainBind(Q,M)),typeof N=="function"&&(this[v+1]=Q===null?N:d.domainBind(Q,N))}return this._setLength(_+1),_},L.prototype._proxy=function(M,N){this._addCallbacks(void 0,void 0,N,M,null)},L.prototype._resolveCallback=function(M,N){if((117506048&this._bitField)==0){if(M===this)return this._rejectCallback(l(),!1);var q=I(M,this);if(!(q instanceof L))return this._fulfill(M);N&&this._propagateFrom(q,2);var X=q._target();if(X!==this){var Q=X._bitField;if((50397184&Q)==0){var _=this._length();_>0&&X._migrateCallback0(this);for(var v=1;v<_;++v)X._migrateCallbackAt(this,v);this._setFollowing(),this._setLength(0),this._setFollowee(X)}else if((33554432&Q)!=0)this._fulfill(X._value());else if((16777216&Q)!=0)this._reject(X._reason());else{var k=new C("late cancellation observer");X._attachExtraTrace(k),this._reject(k)}}else this._reject(l())}},L.prototype._rejectCallback=function(M,N,q){var X=d.ensureErrorObject(M),Q=X===M;if(!Q&&!q&&H.warnings()){var _="a promise was rejected with a non-error: "+d.classString(M);this._warn(_,!0)}this._attachExtraTrace(X,!!N&&Q),this._reject(M)},L.prototype._resolveFromExecutor=function(M){if(M!==S){var N=this;this._captureStackTrace(),this._pushContext();var q=!0,X=this._execute(M,function(Q){N._resolveCallback(Q)},function(Q){N._rejectCallback(Q,q)});q=!1,this._popContext(),X!==void 0&&N._rejectCallback(X,!0)}},L.prototype._settlePromiseFromHandler=function(M,N,q,X){var Q=X._bitField;if((65536&Q)==0){var _;X._pushContext(),N===E?q&&typeof q.length=="number"?_=K(M).apply(this._boundValue(),q):(_=U).e=new w("cannot .spread() a non-array: "+d.classString(q)):_=K(M).call(N,q);var v=X._popContext();(65536&(Q=X._bitField))==0&&(_===T?X._reject(q):_===U?X._rejectCallback(_.e,!1):(H.checkForgottenReturns(_,v,"",X,this),X._resolveCallback(_)))}},L.prototype._target=function(){for(var M=this;M._isFollowing();)M=M._followee();return M},L.prototype._followee=function(){return this._rejectionHandler0},L.prototype._setFollowee=function(M){this._rejectionHandler0=M},L.prototype._settlePromise=function(M,N,q,X){var Q=M instanceof L,_=this._bitField,v=(134217728&_)!=0;(65536&_)!=0?(Q&&M._invokeInternalOnCancel(),q instanceof B&&q.isFinallyHandler()?(q.cancelPromise=M,K(N).call(q,X)===U&&M._reject(U.e)):N===u?M._fulfill(u.call(q)):q instanceof f?q._promiseCancelled(M):Q||M instanceof P?M._cancel():q.cancel()):typeof N=="function"?Q?(v&&M._setAsyncGuaranteed(),this._settlePromiseFromHandler(N,q,X,M)):N.call(q,X,M):q instanceof f?q._isResolved()||((33554432&_)!=0?q._promiseFulfilled(X,M):q._promiseRejected(X,M)):Q&&(v&&M._setAsyncGuaranteed(),(33554432&_)!=0?M._fulfill(X):M._reject(X))},L.prototype._settlePromiseLateCancellationObserver=function(M){var N=M.handler,q=M.promise,X=M.receiver,Q=M.value;typeof N=="function"?q instanceof L?this._settlePromiseFromHandler(N,X,Q,q):N.call(X,Q,q):q instanceof L&&q._reject(Q)},L.prototype._settlePromiseCtx=function(M){this._settlePromise(M.promise,M.handler,M.receiver,M.value)},L.prototype._settlePromise0=function(M,N,q){var X=this._promise0,Q=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(X,M,Q,N)},L.prototype._clearCallbackDataAtIndex=function(M){var N=4*M-4;this[N+2]=this[N+3]=this[N+0]=this[N+1]=void 0},L.prototype._fulfill=function(M){var N=this._bitField;if(!((117506048&N)>>>16)){if(M===this){var q=l();return this._attachExtraTrace(q),this._reject(q)}this._setFulfilled(),this._rejectionHandler0=M,(65535&N)>0&&((134217728&N)!=0?this._settlePromises():y.settlePromises(this))}},L.prototype._reject=function(M){var N=this._bitField;if(!((117506048&N)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=M,this._isFinal())return y.fatalError(M,d.isNode);(65535&N)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled()}},L.prototype._fulfillPromises=function(M,N){for(var q=1;q<M;q++){var X=this._fulfillmentHandlerAt(q),Q=this._promiseAt(q),_=this._receiverAt(q);this._clearCallbackDataAtIndex(q),this._settlePromise(Q,X,_,N)}},L.prototype._rejectPromises=function(M,N){for(var q=1;q<M;q++){var X=this._rejectionHandlerAt(q),Q=this._promiseAt(q),_=this._receiverAt(q);this._clearCallbackDataAtIndex(q),this._settlePromise(Q,X,_,N)}},L.prototype._settlePromises=function(){var M=this._bitField,N=65535&M;if(N>0){if((16842752&M)!=0){var q=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,q,M),this._rejectPromises(N,q)}else{var X=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,X,M),this._fulfillPromises(N,X)}this._setLength(0)}this._clearCancellationData()},L.prototype._settledValue=function(){var M=this._bitField;return(33554432&M)!=0?this._rejectionHandler0:(16777216&M)!=0?this._fulfillmentHandler0:void 0},L.defer=L.pending=function(){return H.deprecated("Promise.defer","new Promise"),{promise:new L(S),resolve:O,reject:A}},d.notEnumerableProp(L,"_makeSelfResolutionError",l),o("./method")(L,S,I,h,H),o("./bind")(L,S,I,H),o("./cancel")(L,P,h,H),o("./direct_resolve")(L),o("./synchronous_inspection")(L),o("./join")(L,P,I,S,y,m),L.Promise=L,L.version="3.5.1",o("./map.js")(L,P,h,I,S,H),o("./call_get.js")(L),o("./using.js")(L,h,I,D,S,H),o("./timers.js")(L,S,H),o("./generators.js")(L,h,S,I,f,H),o("./nodeify.js")(L),o("./promisify.js")(L,S),o("./props.js")(L,P,I,h),o("./race.js")(L,S,I,h),o("./reduce.js")(L,P,h,I,S,H),o("./settle.js")(L,P,H),o("./some.js")(L,P,h),o("./filter.js")(L,S),o("./each.js")(L,S),o("./any.js")(L),d.toFastProperties(L),d.toFastProperties(L.prototype),Y({a:1}),Y({b:2}),Y({c:3}),Y(1),Y(function(){}),Y(void 0),Y(!1),Y(new L(S)),H.setBounds(g.firstLineError,d.lastLineError),L}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(o,a,c){a.exports=function(l,u,h,f,m){var p=o("./util");function d(b){var g=this._promise=new l(u);b instanceof l&&g._propagateFrom(b,3),g._setOnCancel(this),this._values=b,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return p.isArray,p.inherits(d,m),d.prototype.length=function(){return this._length},d.prototype.promise=function(){return this._promise},d.prototype._init=function b(g,y){var x=h(this._values,this._promise);if(x instanceof l){var w=(x=x._target())._bitField;if(this._values=x,(50397184&w)==0)return this._promise._setAsyncGuaranteed(),x._then(b,this._reject,void 0,this,y);if((33554432&w)==0)return(16777216&w)!=0?this._reject(x._reason()):this._cancel();x=x._value()}if((x=p.asArray(x))!==null)x.length!==0?this._iterate(x):y===-5?this._resolveEmptyArray():this._resolve(function(S){switch(y){case-2:return[];case-3:return{};case-6:return new Map}}());else{var C=f("expecting an array or an iterable object but got "+p.classString(x)).reason();this._promise._rejectCallback(C,!1)}},d.prototype._iterate=function(b){var g=this.getActualLength(b.length);this._length=g,this._values=this.shouldCopyValues()?new Array(g):this._values;for(var y=this._promise,x=!1,w=null,C=0;C<g;++C){var S=h(b[C],y);w=S instanceof l?(S=S._target())._bitField:null,x?w!==null&&S.suppressUnhandledRejections():w!==null?(50397184&w)==0?(S._proxy(this,C),this._values[C]=S):x=(33554432&w)!=0?this._promiseFulfilled(S._value(),C):(16777216&w)!=0?this._promiseRejected(S._reason(),C):this._promiseCancelled(C):x=this._promiseFulfilled(S,C)}x||y._setAsyncGuaranteed()},d.prototype._isResolved=function(){return this._values===null},d.prototype._resolve=function(b){this._values=null,this._promise._fulfill(b)},d.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},d.prototype._reject=function(b){this._values=null,this._promise._rejectCallback(b,!1)},d.prototype._promiseFulfilled=function(b,g){return this._values[g]=b,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},d.prototype._promiseCancelled=function(){return this._cancel(),!0},d.prototype._promiseRejected=function(b){return this._totalResolved++,this._reject(b),!0},d.prototype._resultCancelled=function(){if(!this._isResolved()){var b=this._values;if(this._cancel(),b instanceof l)b.cancel();else for(var g=0;g<b.length;++g)b[g]instanceof l&&b[g].cancel()}},d.prototype.shouldCopyValues=function(){return!0},d.prototype.getActualLength=function(b){return b},d}},{"./util":36}],24:[function(o,a,c){a.exports=function(l,u){var h={},f=o("./util"),m=o("./nodeback"),p=f.withAppended,d=f.maybeWrapAsError,b=f.canEvaluate,g=o("./errors").TypeError,y={__isPromisified__:!0},x=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),w=function(D){return f.isIdentifier(D)&&D.charAt(0)!=="_"&&D!=="constructor"};function C(D){return!x.test(D)}function S(D){try{return D.__isPromisified__===!0}catch{return!1}}function E(D,H,B){var V=f.getDataPropertyOrDefault(D,H+B,y);return!!V&&S(V)}function T(D,H,B,V){for(var $=f.inheritedDataKeys(D),U=[],K=0;K<$.length;++K){var L=$[K],O=D[L],A=V===w||w(L);typeof O!="function"||S(O)||E(D,L,H)||!V(L,O,D,A)||U.push(L,O)}return function(Y,M,N){for(var q=0;q<Y.length;q+=2){var X=Y[q];if(N.test(X)){for(var Q=X.replace(N,""),_=0;_<Y.length;_+=2)if(Y[_]===Q)throw new g(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",M))}}}(U,H,B),U}var I=function(D){return D.replace(/([$])/,"\\$")},P=b?void 0:function(D,H,B,V,$,U){var K=function(){return this}(),L=D;function O(){var A=H;H===h&&(A=this);var Y=new l(u);Y._captureStackTrace();var M=typeof L=="string"&&this!==K?this[L]:D,N=m(Y,U);try{M.apply(A,p(arguments,N))}catch(q){Y._rejectCallback(d(q),!0,!0)}return Y._isFateSealed()||Y._setAsyncGuaranteed(),Y}return typeof L=="string"&&(D=V),f.notEnumerableProp(O,"__isPromisified__",!0),O};function R(D,H,B,V,$){for(var U=new RegExp(I(H)+"$"),K=T(D,H,U,B),L=0,O=K.length;L<O;L+=2){var A=K[L],Y=K[L+1],M=A+H;if(V===P)D[M]=P(A,h,A,Y,H,$);else{var N=V(Y,function(){return P(A,h,A,Y,H,$)});f.notEnumerableProp(N,"__isPromisified__",!0),D[M]=N}}return f.toFastProperties(D),D}l.promisify=function(D,H){if(typeof D!="function")throw new g("expecting a function but got "+f.classString(D));if(S(D))return D;var B=(H=Object(H)).context===void 0?h:H.context,V=!!H.multiArgs,$=function(U,K,L){return P(U,K,void 0,U,null,V)}(D,B);return f.copyDescriptors(D,$,C),$},l.promisifyAll=function(D,H){if(typeof D!="function"&&typeof D!="object")throw new g(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);var B=!!(H=Object(H)).multiArgs,V=H.suffix;typeof V!="string"&&(V="Async");var $=H.filter;typeof $!="function"&&($=w);var U=H.promisifier;if(typeof U!="function"&&(U=P),!f.isIdentifier(V))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var K=f.inheritedDataKeys(D),L=0;L<K.length;++L){var O=D[K[L]];K[L]!=="constructor"&&f.isClass(O)&&(R(O.prototype,V,$,U,B),R(O,V,$,U,B))}return R(D,V,$,U,B)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(o,a,c){a.exports=function(l,u,h,f){var m,p=o("./util"),d=p.isObject,b=o("./es5");typeof Map=="function"&&(m=Map);var g=function(){var w=0,C=0;function S(E,T){this[w]=E,this[w+C]=T,w++}return function(E){C=E.size,w=0;var T=new Array(2*E.size);return E.forEach(S,T),T}}();function y(w){var C,S=!1;if(m!==void 0&&w instanceof m)C=g(w),S=!0;else{var E=b.keys(w),T=E.length;C=new Array(2*T);for(var I=0;I<T;++I){var P=E[I];C[I]=w[P],C[I+T]=P}}this.constructor$(C),this._isMap=S,this._init$(void 0,S?-6:-3)}function x(w){var C,S=h(w);return d(S)?(C=S instanceof l?S._then(l.props,void 0,void 0,void 0,void 0):new y(S).promise(),S instanceof l&&C._propagateFrom(S,2),C):f(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`)}p.inherits(y,u),y.prototype._init=function(){},y.prototype._promiseFulfilled=function(w,C){if(this._values[C]=w,++this._totalResolved>=this._length){var S;if(this._isMap)S=function(P){for(var R=new m,D=P.length/2|0,H=0;H<D;++H){var B=P[D+H],V=P[H];R.set(B,V)}return R}(this._values);else{S={};for(var E=this.length(),T=0,I=this.length();T<I;++T)S[this._values[T+E]]=this._values[T]}return this._resolve(S),!0}return!1},y.prototype.shouldCopyValues=function(){return!1},y.prototype.getActualLength=function(w){return w>>1},l.prototype.props=function(){return x(this)},l.props=function(w){return x(w)}}},{"./es5":13,"./util":36}],26:[function(o,a,c){function l(u){this._capacity=u,this._length=0,this._front=0}l.prototype._willBeOverCapacity=function(u){return this._capacity<u},l.prototype._pushOne=function(u){var h=this.length();this._checkCapacity(h+1),this[this._front+h&this._capacity-1]=u,this._length=h+1},l.prototype.push=function(u,h,f){var m=this.length()+3;if(this._willBeOverCapacity(m))return this._pushOne(u),this._pushOne(h),void this._pushOne(f);var p=this._front+m-3;this._checkCapacity(m);var d=this._capacity-1;this[p+0&d]=u,this[p+1&d]=h,this[p+2&d]=f,this._length=m},l.prototype.shift=function(){var u=this._front,h=this[u];return this[u]=void 0,this._front=u+1&this._capacity-1,this._length--,h},l.prototype.length=function(){return this._length},l.prototype._checkCapacity=function(u){this._capacity<u&&this._resizeTo(this._capacity<<1)},l.prototype._resizeTo=function(u){var h=this._capacity;this._capacity=u,function(f,m,p,d,b){for(var g=0;g<b;++g)p[g+d]=f[g+0],f[g+0]=void 0}(this,0,this,h,this._front+this._length&h-1)},a.exports=l},{}],27:[function(o,a,c){a.exports=function(l,u,h,f){var m=o("./util"),p=function(b){return b.then(function(g){return d(g,b)})};function d(b,g){var y=h(b);if(y instanceof l)return p(y);if((b=m.asArray(b))===null)return f("expecting an array or an iterable object but got "+m.classString(b));var x=new l(u);g!==void 0&&x._propagateFrom(g,3);for(var w=x._fulfill,C=x._reject,S=0,E=b.length;S<E;++S){var T=b[S];(T!==void 0||S in b)&&l.cast(T)._then(w,C,void 0,x,null)}return x}l.race=function(b){return d(b,void 0)},l.prototype.race=function(){return d(this,void 0)}}},{"./util":36}],28:[function(o,a,c){a.exports=function(l,u,h,f,m,p){var d=l._getDomain,b=o("./util"),g=b.tryCatch;function y(E,T,I,P){this.constructor$(E);var R=d();this._fn=R===null?T:b.domainBind(R,T),I!==void 0&&(I=l.resolve(I))._attachCancellationCallback(this),this._initialValue=I,this._currentCancellable=null,this._eachValues=P===m?Array(this._length):P===0?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function x(E,T){this.isFulfilled()?T._resolve(E):T._reject(E)}function w(E,T,I,P){return typeof T!="function"?h("expecting a function but got "+b.classString(T)):new y(E,T,I,P).promise()}function C(E){this.accum=E,this.array._gotAccum(E);var T=f(this.value,this.array._promise);return T instanceof l?(this.array._currentCancellable=T,T._then(S,void 0,void 0,this,void 0)):S.call(this,T)}function S(E){var T,I=this.array,P=I._promise,R=g(I._fn);P._pushContext(),(T=I._eachValues!==void 0?R.call(P._boundValue(),E,this.index,this.length):R.call(P._boundValue(),this.accum,E,this.index,this.length))instanceof l&&(I._currentCancellable=T);var D=P._popContext();return p.checkForgottenReturns(T,D,I._eachValues!==void 0?"Promise.each":"Promise.reduce",P),T}b.inherits(y,u),y.prototype._gotAccum=function(E){this._eachValues!==void 0&&this._eachValues!==null&&E!==m&&this._eachValues.push(E)},y.prototype._eachComplete=function(E){return this._eachValues!==null&&this._eachValues.push(E),this._eachValues},y.prototype._init=function(){},y.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},y.prototype.shouldCopyValues=function(){return!1},y.prototype._resolve=function(E){this._promise._resolveCallback(E),this._values=null},y.prototype._resultCancelled=function(E){if(E===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof l&&this._currentCancellable.cancel(),this._initialValue instanceof l&&this._initialValue.cancel())},y.prototype._iterate=function(E){var T,I;this._values=E;var P=E.length;if(this._initialValue!==void 0?(T=this._initialValue,I=0):(T=l.resolve(E[0]),I=1),this._currentCancellable=T,!T.isRejected())for(;I<P;++I){var R={accum:null,value:E[I],index:I,length:P,array:this};T=T._then(C,void 0,void 0,R,void 0)}this._eachValues!==void 0&&(T=T._then(this._eachComplete,void 0,void 0,this,void 0)),T._then(x,x,void 0,T,this)},l.prototype.reduce=function(E,T){return w(this,E,T,null)},l.reduce=function(E,T,I,P){return w(E,T,I,P)}}},{"./util":36}],29:[function(o,a,c){var l,u=o("./util"),h=u.getNativePromise();if(u.isNode&&typeof MutationObserver>"u"){var f=s.setImmediate,m=i.nextTick;l=u.isRecentNode?function(d){f.call(s,d)}:function(d){m.call(i,d)}}else if(typeof h=="function"&&typeof h.resolve=="function"){var p=h.resolve();l=function(d){p.then(d)}}else l=typeof MutationObserver>"u"||typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova)?r!==void 0?function(d){r(d)}:typeof setTimeout<"u"?function(d){setTimeout(d,0)}:function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}:function(){var d=document.createElement("div"),b={attributes:!0},g=!1,y=document.createElement("div");return new MutationObserver(function(){d.classList.toggle("foo"),g=!1}).observe(y,b),function(x){var w=new MutationObserver(function(){w.disconnect(),x()});w.observe(d,b),g||(g=!0,y.classList.toggle("foo"))}}();a.exports=l},{"./util":36}],30:[function(o,a,c){a.exports=function(l,u,h){var f=l.PromiseInspection;function m(p){this.constructor$(p)}o("./util").inherits(m,u),m.prototype._promiseResolved=function(p,d){return this._values[p]=d,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},m.prototype._promiseFulfilled=function(p,d){var b=new f;return b._bitField=33554432,b._settledValueField=p,this._promiseResolved(d,b)},m.prototype._promiseRejected=function(p,d){var b=new f;return b._bitField=16777216,b._settledValueField=p,this._promiseResolved(d,b)},l.settle=function(p){return h.deprecated(".settle()",".reflect()"),new m(p).promise()},l.prototype.settle=function(){return l.settle(this)}}},{"./util":36}],31:[function(o,a,c){a.exports=function(l,u,h){var f=o("./util"),m=o("./errors").RangeError,p=o("./errors").AggregateError,d=f.isArray,b={};function g(x){this.constructor$(x),this._howMany=0,this._unwrap=!1,this._initialized=!1}function y(x,w){if((0|w)!==w||w<0)return h(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var C=new g(x),S=C.promise();return C.setHowMany(w),C.init(),S}f.inherits(g,u),g.prototype._init=function(){if(this._initialized)if(this._howMany!==0){this._init$(void 0,-5);var x=d(this._values);!this._isResolved()&&x&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},g.prototype.init=function(){this._initialized=!0,this._init()},g.prototype.setUnwrap=function(){this._unwrap=!0},g.prototype.howMany=function(){return this._howMany},g.prototype.setHowMany=function(x){this._howMany=x},g.prototype._promiseFulfilled=function(x){return this._addFulfilled(x),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},g.prototype._promiseRejected=function(x){return this._addRejected(x),this._checkOutcome()},g.prototype._promiseCancelled=function(){return this._values instanceof l||this._values==null?this._cancel():(this._addRejected(b),this._checkOutcome())},g.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var x=new p,w=this.length();w<this._values.length;++w)this._values[w]!==b&&x.push(this._values[w]);return x.length>0?this._reject(x):this._cancel(),!0}return!1},g.prototype._fulfilled=function(){return this._totalResolved},g.prototype._rejected=function(){return this._values.length-this.length()},g.prototype._addRejected=function(x){this._values.push(x)},g.prototype._addFulfilled=function(x){this._values[this._totalResolved++]=x},g.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},g.prototype._getRangeError=function(x){var w="Input array must contain at least "+this._howMany+" items but contains only "+x+" items";return new m(w)},g.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},l.some=function(x,w){return y(x,w)},l.prototype.some=function(x){return y(this,x)},l._SomePromiseArray=g}},{"./errors":12,"./util":36}],32:[function(o,a,c){a.exports=function(l){function u(g){g!==void 0?(g=g._target(),this._bitField=g._bitField,this._settledValueField=g._isFateSealed()?g._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}u.prototype._settledValue=function(){return this._settledValueField};var h=u.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},f=u.prototype.error=u.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},m=u.prototype.isFulfilled=function(){return(33554432&this._bitField)!=0},p=u.prototype.isRejected=function(){return(16777216&this._bitField)!=0},d=u.prototype.isPending=function(){return(50397184&this._bitField)==0},b=u.prototype.isResolved=function(){return(50331648&this._bitField)!=0};u.prototype.isCancelled=function(){return(8454144&this._bitField)!=0},l.prototype.__isCancelled=function(){return(65536&this._bitField)==65536},l.prototype._isCancelled=function(){return this._target().__isCancelled()},l.prototype.isCancelled=function(){return(8454144&this._target()._bitField)!=0},l.prototype.isPending=function(){return d.call(this._target())},l.prototype.isRejected=function(){return p.call(this._target())},l.prototype.isFulfilled=function(){return m.call(this._target())},l.prototype.isResolved=function(){return b.call(this._target())},l.prototype.value=function(){return h.call(this._target())},l.prototype.reason=function(){var g=this._target();return g._unsetRejectionIsUnhandled(),f.call(g)},l.prototype._value=function(){return this._settledValue()},l.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},l.PromiseInspection=u}},{}],33:[function(o,a,c){a.exports=function(l,u){var h=o("./util"),f=h.errorObj,m=h.isObject,p={}.hasOwnProperty;return function(d,b){if(m(d)){if(d instanceof l)return d;var g=function(x){try{return function(w){return w.then}(x)}catch(w){return f.e=w,f}}(d);if(g===f){b&&b._pushContext();var y=l.reject(g.e);return b&&b._popContext(),y}if(typeof g=="function")return function(x){try{return p.call(x,"_promise0")}catch{return!1}}(d)?(y=new l(u),d._then(y._fulfill,y._reject,void 0,y,null),y):function(x,w,C){var S=new l(u),E=S;C&&C._pushContext(),S._captureStackTrace(),C&&C._popContext();var T=!0,I=h.tryCatch(w).call(x,function(P){S&&(S._resolveCallback(P),S=null)},function(P){S&&(S._rejectCallback(P,T,!0),S=null)});return T=!1,S&&I===f&&(S._rejectCallback(I.e,!0,!0),S=null),E}(d,g,b)}return d}}},{"./util":36}],34:[function(o,a,c){a.exports=function(l,u,h){var f=o("./util"),m=l.TimeoutError;function p(x){this.handle=x}p.prototype._resultCancelled=function(){clearTimeout(this.handle)};var d=function(x){return b(+this).thenReturn(x)},b=l.delay=function(x,w){var C,S;return w!==void 0?(C=l.resolve(w)._then(d,null,null,x,void 0),h.cancellation()&&w instanceof l&&C._setOnCancel(w)):(C=new l(u),S=setTimeout(function(){C._fulfill()},+x),h.cancellation()&&C._setOnCancel(new p(S)),C._captureStackTrace()),C._setAsyncGuaranteed(),C};function g(x){return clearTimeout(this.handle),x}function y(x){throw clearTimeout(this.handle),x}l.prototype.delay=function(x){return b(x,this)},l.prototype.timeout=function(x,w){var C,S;x=+x;var E=new p(setTimeout(function(){C.isPending()&&function(T,I,P){var R;R=typeof I!="string"?I instanceof Error?I:new m("operation timed out"):new m(I),f.markAsOriginatingFromRejection(R),T._attachExtraTrace(R),T._reject(R),P!=null&&P.cancel()}(C,w,S)},x));return h.cancellation()?(S=this.then(),(C=S._then(g,y,void 0,E,void 0))._setOnCancel(E)):C=this._then(g,y,void 0,E,void 0),C}}},{"./util":36}],35:[function(o,a,c){a.exports=function(l,u,h,f,m,p){var d=o("./util"),b=o("./errors").TypeError,g=o("./util").inherits,y=d.errorObj,x=d.tryCatch,w={};function C(R){setTimeout(function(){throw R},0)}function S(R,D){var H=0,B=R.length,V=new l(m);return function $(){if(H>=B)return V._fulfill();var U=function(K){var L=h(K);return L!==K&&typeof K._isDisposable=="function"&&typeof K._getDisposer=="function"&&K._isDisposable()&&L._setDisposable(K._getDisposer()),L}(R[H++]);if(U instanceof l&&U._isDisposable()){try{U=h(U._getDisposer().tryDispose(D),R.promise)}catch(K){return C(K)}if(U instanceof l)return U._then($,C,null,null,null)}$()}(),V}function E(R,D,H){this._data=R,this._promise=D,this._context=H}function T(R,D,H){this.constructor$(R,D,H)}function I(R){return E.isDisposer(R)?(this.resources[this.index]._setDisposable(R),R.promise()):R}function P(R){this.length=R,this.promise=null,this[R-1]=null}E.prototype.data=function(){return this._data},E.prototype.promise=function(){return this._promise},E.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():w},E.prototype.tryDispose=function(R){var D=this.resource(),H=this._context;H!==void 0&&H._pushContext();var B=D!==w?this.doDispose(D,R):null;return H!==void 0&&H._popContext(),this._promise._unsetDisposable(),this._data=null,B},E.isDisposer=function(R){return R!=null&&typeof R.resource=="function"&&typeof R.tryDispose=="function"},g(T,E),T.prototype.doDispose=function(R,D){return this.data().call(R,R,D)},P.prototype._resultCancelled=function(){for(var R=this.length,D=0;D<R;++D){var H=this[D];H instanceof l&&H.cancel()}},l.using=function(){var R=arguments.length;if(R<2)return u("you must pass at least 2 arguments to Promise.using");var D,H=arguments[R-1];if(typeof H!="function")return u("expecting a function but got "+d.classString(H));var B=!0;R===2&&Array.isArray(arguments[0])?(R=(D=arguments[0]).length,B=!1):(D=arguments,R--);for(var V=new P(R),$=0;$<R;++$){var U=D[$];if(E.isDisposer(U)){var K=U;(U=U.promise())._setDisposable(K)}else{var L=h(U);L instanceof l&&(U=L._then(I,null,null,{resources:V,index:$},void 0))}V[$]=U}var O=new Array(V.length);for($=0;$<O.length;++$)O[$]=l.resolve(V[$]).reflect();var A=l.all(O).then(function(M){for(var N=0;N<M.length;++N){var q=M[N];if(q.isRejected())return y.e=q.error(),y;if(!q.isFulfilled())return void A.cancel();M[N]=q.value()}Y._pushContext(),H=x(H);var X=B?H.apply(void 0,M):H(M),Q=Y._popContext();return p.checkForgottenReturns(X,Q,"Promise.using",Y),X}),Y=A.lastly(function(){var M=new l.PromiseInspection(A);return S(V,M)});return V.promise=Y,Y._setOnCancel(V),Y},l.prototype._setDisposable=function(R){this._bitField=131072|this._bitField,this._disposer=R},l.prototype._isDisposable=function(){return(131072&this._bitField)>0},l.prototype._getDisposer=function(){return this._disposer},l.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},l.prototype.disposer=function(R){if(typeof R=="function")return new T(R,this,f());throw new b}}},{"./errors":12,"./util":36}],36:[function(o,a,c){var l,u=o("./es5"),h=typeof navigator>"u",f={e:{}},m=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:this!==void 0?this:null;function p(){try{var B=l;return l=null,B.apply(this,arguments)}catch(V){return f.e=V,f}}function d(B){return B==null||B===!0||B===!1||typeof B=="string"||typeof B=="number"}function b(B,V,$){if(d(B))return B;var U={value:$,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(B,V,U),B}var g=function(){var B=[Array.prototype,Object.prototype,Function.prototype],V=function(K){for(var L=0;L<B.length;++L)if(B[L]===K)return!0;return!1};if(u.isES5){var $=Object.getOwnPropertyNames;return function(K){for(var L=[],O=Object.create(null);K!=null&&!V(K);){var A;try{A=$(K)}catch{return L}for(var Y=0;Y<A.length;++Y){var M=A[Y];if(!O[M]){O[M]=!0;var N=Object.getOwnPropertyDescriptor(K,M);N!=null&&N.get==null&&N.set==null&&L.push(M)}}K=u.getPrototypeOf(K)}return L}}var U={}.hasOwnProperty;return function(K){if(V(K))return[];var L=[];t:for(var O in K)if(U.call(K,O))L.push(O);else{for(var A=0;A<B.length;++A)if(U.call(B[A],O))continue t;L.push(O)}return L}}(),y=/this\s*\.\s*\S+\s*=/,x=/^[a-z$_][a-z$_0-9]*$/i;function w(B){try{return B+""}catch{return"[no string representation]"}}function C(B){return B instanceof Error||B!==null&&typeof B=="object"&&typeof B.message=="string"&&typeof B.name=="string"}function S(B){return C(B)&&u.propertyIsWritable(B,"stack")}var E="stack"in new Error?function(B){return S(B)?B:new Error(w(B))}:function(B){if(S(B))return B;try{throw new Error(w(B))}catch(V){return V}};function T(B){return{}.toString.call(B)}var I=function(B){return u.isArray(B)?B:null};if(typeof Symbol<"u"&&Symbol.iterator){var P=typeof Array.from=="function"?function(B){return Array.from(B)}:function(B){for(var V,$=[],U=B[Symbol.iterator]();!(V=U.next()).done;)$.push(V.value);return $};I=function(B){return u.isArray(B)?B:B!=null&&typeof B[Symbol.iterator]=="function"?P(B):null}}var R=i!==void 0&&T(i).toLowerCase()==="[object process]",D=i!==void 0&&i.env!==void 0,H={isClass:function(B){try{if(typeof B=="function"){var V=u.names(B.prototype),$=u.isES5&&V.length>1,U=V.length>0&&!(V.length===1&&V[0]==="constructor"),K=y.test(B+"")&&u.names(B).length>0;if($||U||K)return!0}return!1}catch{return!1}},isIdentifier:function(B){return x.test(B)},inheritedDataKeys:g,getDataPropertyOrDefault:function(B,V,$){if(!u.isES5)return{}.hasOwnProperty.call(B,V)?B[V]:void 0;var U=Object.getOwnPropertyDescriptor(B,V);return U!=null?U.get==null&&U.set==null?U.value:$:void 0},thrower:function(B){throw B},isArray:u.isArray,asArray:I,notEnumerableProp:b,isPrimitive:d,isObject:function(B){return typeof B=="function"||typeof B=="object"&&B!==null},isError:C,canEvaluate:h,errorObj:f,tryCatch:function(B){return l=B,p},inherits:function(B,V){var $={}.hasOwnProperty;function U(){for(var K in this.constructor=B,this.constructor$=V,V.prototype)$.call(V.prototype,K)&&K.charAt(K.length-1)!=="$"&&(this[K+"$"]=V.prototype[K])}return U.prototype=V.prototype,B.prototype=new U,B.prototype},withAppended:function(B,V){var $,U=B.length,K=new Array(U+1);for($=0;$<U;++$)K[$]=B[$];return K[$]=V,K},maybeWrapAsError:function(B){return d(B)?new Error(w(B)):B},toFastProperties:function(B){return B},filledRange:function(B,V,$){for(var U=new Array(B),K=0;K<B;++K)U[K]=V+K+$;return U},toString:w,canAttachTrace:S,ensureErrorObject:E,originatesFromRejection:function(B){return B!=null&&(B instanceof Error.__BluebirdErrorTypes__.OperationalError||B.isOperational===!0)},markAsOriginatingFromRejection:function(B){try{b(B,"isOperational",!0)}catch{}},classString:T,copyDescriptors:function(B,V,$){for(var U=u.names(B),K=0;K<U.length;++K){var L=U[K];if($(L))try{u.defineProperty(V,L,u.getDescriptor(B,L))}catch{}}},hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:R,hasEnvVariables:D,env:function(B){return D?i.env[B]:void 0},global:m,getNativePromise:function(){if(typeof Promise=="function")try{var B=new Promise(function(){});if({}.toString.call(B)==="[object Promise]")return Promise}catch{}},domainBind:function(B,V){return B.bind(V)}};H.isRecentNode=H.isNode&&function(){var B=i.versions.node.split(".").map(Number);return B[0]===0&&B[1]>10||B[0]>0}(),H.isNode&&H.toFastProperties(i);try{throw new Error}catch(B){H.lastLineError=B}a.exports=H},{"./es5":13}]},{},[4])(4),typeof window<"u"&&window!==null?window.P=window.Promise:typeof self<"u"&&self!==null&&(self.P=self.Promise)}).call(this,e(4),e(0),e(11).setImmediate)},function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(i,s){if(!s.eol&&i){for(var r=0,o=i.length;r<o;r++)if(i[r]==="\r"){if(i[r+1]===`
`){s.eol=`\r
`;break}if(i[r+1]){s.eol="\r";break}}else if(i[r]===`
`){s.eol=`
`;break}}return s.eol||`
`}},function(n,t,e){var i=e(65),s=e(73);n.exports=function(r,o){var a=s(r,o);return i(a)?a:void 0}},function(n,t,e){var i=e(19).Symbol;n.exports=i},function(n,t,e){var i=e(67),s=typeof self=="object"&&self&&self.Object===Object&&self,r=i||s||Function("return this")();n.exports=r},function(n,t){n.exports=function(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}},function(n,t){var e=Array.isArray;n.exports=e},function(n,t,e){var i=e(30),s=e(76);n.exports=function(r){return typeof r=="symbol"||s(r)&&i(r)=="[object Symbol]"}},function(n,t,e){(function(i,s){var r=e(6);n.exports=w;var o,a=e(37);w.ReadableState=x,e(12).EventEmitter;var c=function(O,A){return O.listeners(A).length},l=e(24),u=e(7).Buffer,h=i.Uint8Array||function(){},f=e(5);f.inherits=e(2);var m=e(41),p=void 0;p=m&&m.debuglog?m.debuglog("stream"):function(){};var d,b=e(42),g=e(25);f.inherits(w,l);var y=["error","close","destroy","pause","resume"];function x(O,A){o=o||e(1),O=O||{};var Y=A instanceof o;this.objectMode=!!O.objectMode,Y&&(this.objectMode=this.objectMode||!!O.readableObjectMode);var M=O.highWaterMark,N=O.readableHighWaterMark,q=this.objectMode?16:16384;this.highWaterMark=M||M===0?M:Y&&(N||N===0)?N:q,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=O.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,O.encoding&&(d||(d=e(26).StringDecoder),this.decoder=new d(O.encoding),this.encoding=O.encoding)}function w(O){if(o=o||e(1),!(this instanceof w))return new w(O);this._readableState=new x(O,this),this.readable=!0,O&&(typeof O.read=="function"&&(this._read=O.read),typeof O.destroy=="function"&&(this._destroy=O.destroy)),l.call(this)}function C(O,A,Y,M,N){var q,X=O._readableState;return A===null?(X.reading=!1,function(Q,_){if(!_.ended){if(_.decoder){var v=_.decoder.end();v&&v.length&&(_.buffer.push(v),_.length+=_.objectMode?1:v.length)}_.ended=!0,I(Q)}}(O,X)):(N||(q=function(Q,_){var v;return function(k){return u.isBuffer(k)||k instanceof h}(_)||typeof _=="string"||_===void 0||Q.objectMode||(v=new TypeError("Invalid non-string/buffer chunk")),v}(X,A)),q?O.emit("error",q):X.objectMode||A&&A.length>0?(typeof A=="string"||X.objectMode||Object.getPrototypeOf(A)===u.prototype||(A=function(Q){return u.from(Q)}(A)),M?X.endEmitted?O.emit("error",new Error("stream.unshift() after end event")):S(O,X,A,!0):X.ended?O.emit("error",new Error("stream.push() after EOF")):(X.reading=!1,X.decoder&&!Y?(A=X.decoder.write(A),X.objectMode||A.length!==0?S(O,X,A,!1):R(O,X)):S(O,X,A,!1))):M||(X.reading=!1)),function(Q){return!Q.ended&&(Q.needReadable||Q.length<Q.highWaterMark||Q.length===0)}(X)}function S(O,A,Y,M){A.flowing&&A.length===0&&!A.sync?(O.emit("data",Y),O.read(0)):(A.length+=A.objectMode?1:Y.length,M?A.buffer.unshift(Y):A.buffer.push(Y),A.needReadable&&I(O)),R(O,A)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(O){this._readableState&&(this._readableState.destroyed=O)}}),w.prototype.destroy=g.destroy,w.prototype._undestroy=g.undestroy,w.prototype._destroy=function(O,A){this.push(null),A(O)},w.prototype.push=function(O,A){var Y,M=this._readableState;return M.objectMode?Y=!0:typeof O=="string"&&((A=A||M.defaultEncoding)!==M.encoding&&(O=u.from(O,A),A=""),Y=!0),C(this,O,A,!1,Y)},w.prototype.unshift=function(O){return C(this,O,null,!0,!1)},w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(O){return d||(d=e(26).StringDecoder),this._readableState.decoder=new d(O),this._readableState.encoding=O,this};var E=8388608;function T(O,A){return O<=0||A.length===0&&A.ended?0:A.objectMode?1:O!=O?A.flowing&&A.length?A.buffer.head.data.length:A.length:(O>A.highWaterMark&&(A.highWaterMark=function(Y){return Y>=E?Y=E:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}(O)),O<=A.length?O:A.ended?A.length:(A.needReadable=!0,0))}function I(O){var A=O._readableState;A.needReadable=!1,A.emittedReadable||(p("emitReadable",A.flowing),A.emittedReadable=!0,A.sync?r.nextTick(P,O):P(O))}function P(O){p("emit readable"),O.emit("readable"),V(O)}function R(O,A){A.readingMore||(A.readingMore=!0,r.nextTick(D,O,A))}function D(O,A){for(var Y=A.length;!A.reading&&!A.flowing&&!A.ended&&A.length<A.highWaterMark&&(p("maybeReadMore read 0"),O.read(0),Y!==A.length);)Y=A.length;A.readingMore=!1}function H(O){p("readable nexttick read 0"),O.read(0)}function B(O,A){A.reading||(p("resume read 0"),O.read(0)),A.resumeScheduled=!1,A.awaitDrain=0,O.emit("resume"),V(O),A.flowing&&!A.reading&&O.read(0)}function V(O){var A=O._readableState;for(p("flow",A.flowing);A.flowing&&O.read()!==null;);}function $(O,A){return A.length===0?null:(A.objectMode?Y=A.buffer.shift():!O||O>=A.length?(Y=A.decoder?A.buffer.join(""):A.buffer.length===1?A.buffer.head.data:A.buffer.concat(A.length),A.buffer.clear()):Y=function(M,N,q){var X;return M<N.head.data.length?(X=N.head.data.slice(0,M),N.head.data=N.head.data.slice(M)):X=M===N.head.data.length?N.shift():q?function(Q,_){var v=_.head,k=1,j=v.data;for(Q-=j.length;v=v.next;){var F=v.data,z=Q>F.length?F.length:Q;if(z===F.length?j+=F:j+=F.slice(0,Q),(Q-=z)==0){z===F.length?(++k,v.next?_.head=v.next:_.head=_.tail=null):(_.head=v,v.data=F.slice(z));break}++k}return _.length-=k,j}(M,N):function(Q,_){var v=u.allocUnsafe(Q),k=_.head,j=1;for(k.data.copy(v),Q-=k.data.length;k=k.next;){var F=k.data,z=Q>F.length?F.length:Q;if(F.copy(v,v.length-Q,0,z),(Q-=z)==0){z===F.length?(++j,k.next?_.head=k.next:_.head=_.tail=null):(_.head=k,k.data=F.slice(z));break}++j}return _.length-=j,v}(M,N),X}(O,A.buffer,A.decoder),Y);var Y}function U(O){var A=O._readableState;if(A.length>0)throw new Error('"endReadable()" called on non-empty stream');A.endEmitted||(A.ended=!0,r.nextTick(K,A,O))}function K(O,A){O.endEmitted||O.length!==0||(O.endEmitted=!0,A.readable=!1,A.emit("end"))}function L(O,A){for(var Y=0,M=O.length;Y<M;Y++)if(O[Y]===A)return Y;return-1}w.prototype.read=function(O){p("read",O),O=parseInt(O,10);var A=this._readableState,Y=O;if(O!==0&&(A.emittedReadable=!1),O===0&&A.needReadable&&(A.length>=A.highWaterMark||A.ended))return p("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?U(this):I(this),null;if((O=T(O,A))===0&&A.ended)return A.length===0&&U(this),null;var M,N=A.needReadable;return p("need readable",N),(A.length===0||A.length-O<A.highWaterMark)&&p("length less than watermark",N=!0),A.ended||A.reading?p("reading or ended",N=!1):N&&(p("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(O=T(Y,A))),(M=O>0?$(O,A):null)===null?(A.needReadable=!0,O=0):A.length-=O,A.length===0&&(A.ended||(A.needReadable=!0),Y!==O&&A.ended&&U(this)),M!==null&&this.emit("data",M),M},w.prototype._read=function(O){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(O,A){var Y=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=O;break;case 1:M.pipes=[M.pipes,O];break;default:M.pipes.push(O)}M.pipesCount+=1,p("pipe count=%d opts=%j",M.pipesCount,A);var N=A&&A.end===!1||O===s.stdout||O===s.stderr?z:q;function q(){p("onend"),O.end()}M.endEmitted?r.nextTick(N):Y.once("end",N),O.on("unpipe",function Z(nt,at){p("onunpipe"),nt===Y&&at&&at.hasUnpiped===!1&&(at.hasUnpiped=!0,p("cleanup"),O.removeListener("close",j),O.removeListener("finish",F),O.removeListener("drain",X),O.removeListener("error",k),O.removeListener("unpipe",Z),Y.removeListener("end",q),Y.removeListener("end",z),Y.removeListener("data",v),Q=!0,!M.awaitDrain||O._writableState&&!O._writableState.needDrain||X())});var X=function(Z){return function(){var nt=Z._readableState;p("pipeOnDrain",nt.awaitDrain),nt.awaitDrain&&nt.awaitDrain--,nt.awaitDrain===0&&c(Z,"data")&&(nt.flowing=!0,V(Z))}}(Y);O.on("drain",X);var Q=!1,_=!1;function v(Z){p("ondata"),_=!1,O.write(Z)!==!1||_||((M.pipesCount===1&&M.pipes===O||M.pipesCount>1&&L(M.pipes,O)!==-1)&&!Q&&(p("false write response, pause",Y._readableState.awaitDrain),Y._readableState.awaitDrain++,_=!0),Y.pause())}function k(Z){p("onerror",Z),z(),O.removeListener("error",k),c(O,"error")===0&&O.emit("error",Z)}function j(){O.removeListener("finish",F),z()}function F(){p("onfinish"),O.removeListener("close",j),z()}function z(){p("unpipe"),Y.unpipe(O)}return Y.on("data",v),function(Z,nt,at){if(typeof Z.prependListener=="function")return Z.prependListener(nt,at);Z._events&&Z._events[nt]?a(Z._events[nt])?Z._events[nt].unshift(at):Z._events[nt]=[at,Z._events[nt]]:Z.on(nt,at)}(O,"error",k),O.once("close",j),O.once("finish",F),O.emit("pipe",Y),M.flowing||(p("pipe resume"),Y.resume()),O},w.prototype.unpipe=function(O){var A=this._readableState,Y={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return O&&O!==A.pipes?this:(O||(O=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,O&&O.emit("unpipe",this,Y),this);if(!O){var M=A.pipes,N=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var q=0;q<N;q++)M[q].emit("unpipe",this,Y);return this}var X=L(A.pipes,O);return X===-1?this:(A.pipes.splice(X,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),O.emit("unpipe",this,Y),this)},w.prototype.on=function(O,A){var Y=l.prototype.on.call(this,O,A);if(O==="data")this._readableState.flowing!==!1&&this.resume();else if(O==="readable"){var M=this._readableState;M.endEmitted||M.readableListening||(M.readableListening=M.needReadable=!0,M.emittedReadable=!1,M.reading?M.length&&I(this):r.nextTick(H,this))}return Y},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var O=this._readableState;return O.flowing||(p("resume"),O.flowing=!0,function(A,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,r.nextTick(B,A,Y))}(this,O)),this},w.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(O){var A=this,Y=this._readableState,M=!1;for(var N in O.on("end",function(){if(p("wrapped end"),Y.decoder&&!Y.ended){var X=Y.decoder.end();X&&X.length&&A.push(X)}A.push(null)}),O.on("data",function(X){p("wrapped data"),Y.decoder&&(X=Y.decoder.write(X)),(!Y.objectMode||X!=null)&&(Y.objectMode||X&&X.length)&&(A.push(X)||(M=!0,O.pause()))}),O)this[N]===void 0&&typeof O[N]=="function"&&(this[N]=function(X){return function(){return O[X].apply(O,arguments)}}(N));for(var q=0;q<y.length;q++)O.on(y[q],this.emit.bind(this,y[q]));return this._read=function(X){p("wrapped _read",X),M&&(M=!1,O.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=$}).call(this,e(0),e(4))},function(n,t,e){n.exports=e(12).EventEmitter},function(n,t,e){var i=e(6);function s(r,o){r.emit("error",o)}n.exports={destroy:function(r,o){var a=this,c=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return c||l?(o?o(r):!r||this._writableState&&this._writableState.errorEmitted||i.nextTick(s,this,r),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(u){!o&&u?(i.nextTick(s,a,u),a._writableState&&(a._writableState.errorEmitted=!0)):o&&o(u)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(n,t,e){var i=e(7).Buffer,s=i.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(p){var d;switch(this.encoding=function(b){var g=function(y){if(!y)return"utf8";for(var x;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(x)return;y=(""+y).toLowerCase(),x=!0}}(b);if(typeof g!="string"&&(i.isEncoding===s||!s(b)))throw new Error("Unknown encoding: "+b);return g||b}(p),this.encoding){case"utf16le":this.text=c,this.end=l,d=4;break;case"utf8":this.fillLast=a,d=4;break;case"base64":this.text=u,this.end=h,d=3;break;default:return this.write=f,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(d)}function o(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function a(p){var d=this.lastTotal-this.lastNeed,b=function(g,y,x){if((192&y[0])!=128)return g.lastNeed=0,"�";if(g.lastNeed>1&&y.length>1){if((192&y[1])!=128)return g.lastNeed=1,"�";if(g.lastNeed>2&&y.length>2&&(192&y[2])!=128)return g.lastNeed=2,"�"}}(this,p);return b!==void 0?b:this.lastNeed<=p.length?(p.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,d,0,p.length),void(this.lastNeed-=p.length))}function c(p,d){if((p.length-d)%2==0){var b=p.toString("utf16le",d);if(b){var g=b.charCodeAt(b.length-1);if(g>=55296&&g<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",d,p.length-1)}function l(p){var d=p&&p.length?this.write(p):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return d+this.lastChar.toString("utf16le",0,b)}return d}function u(p,d){var b=(p.length-d)%3;return b===0?p.toString("base64",d):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",d,p.length-b))}function h(p){var d=p&&p.length?this.write(p):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function f(p){return p.toString(this.encoding)}function m(p){return p&&p.length?this.write(p):""}t.StringDecoder=r,r.prototype.write=function(p){if(p.length===0)return"";var d,b;if(this.lastNeed){if((d=this.fillLast(p))===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<p.length?d?d+this.text(p,b):this.text(p,b):d||""},r.prototype.end=function(p){var d=p&&p.length?this.write(p):"";return this.lastNeed?d+"�":d},r.prototype.text=function(p,d){var b=function(y,x,w){var C=x.length-1;if(C<w)return 0;var S=o(x[C]);return S>=0?(S>0&&(y.lastNeed=S-1),S):--C<w||S===-2?0:(S=o(x[C]))>=0?(S>0&&(y.lastNeed=S-2),S):--C<w||S===-2?0:(S=o(x[C]))>=0?(S>0&&(S===2?S=0:y.lastNeed=S-3),S):0}(this,p,d);if(!this.lastNeed)return p.toString("utf8",d);this.lastTotal=b;var g=p.length-(b-this.lastNeed);return p.copy(this.lastChar,0,g),p.toString("utf8",d,g)},r.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},function(n,t,e){n.exports=r;var i=e(1),s=e(5);function r(c){if(!(this instanceof r))return new r(c);i.call(this,c),this._transformState={afterTransform:(function(l,u){var h=this._transformState;h.transforming=!1;var f=h.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));h.writechunk=null,h.writecb=null,u!=null&&this.push(u),f(l);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}).bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",o)}function o(){var c=this;typeof this._flush=="function"?this._flush(function(l,u){a(c,l,u)}):a(this,null,null)}function a(c,l,u){if(l)return c.emit("error",l);if(u!=null&&c.push(u),c._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}s.inherits=e(2),s.inherits(r,i),r.prototype.push=function(c,l){return this._transformState.needTransform=!1,i.prototype.push.call(this,c,l)},r.prototype._transform=function(c,l,u){throw new Error("_transform() is not implemented")},r.prototype._write=function(c,l,u){var h=this._transformState;if(h.writecb=u,h.writechunk=c,h.writeencoding=l,!h.transforming){var f=this._readableState;(h.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},r.prototype._read=function(c){var l=this._transformState;l.writechunk!==null&&l.writecb&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},r.prototype._destroy=function(c,l){var u=this;i.prototype._destroy.call(this,c,function(h){l(h),u.emit("close")})}},function(n,t,e){(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.bufFromString=function(s){var r=i.byteLength(s),o=i.allocUnsafe?i.allocUnsafe(r):new i(r);return o.write(s),o},t.emptyBuffer=function(){return i.allocUnsafe?i.allocUnsafe(0):new i(0)},t.filterArray=function(s,r){for(var o=[],a=0;a<s.length;a++)r.indexOf(a)>-1&&o.push(s[a]);return o},t.trimLeft=String.prototype.trimLeft?function(s){return s.trimLeft()}:function(s){return s.replace(/^\s+/,"")},t.trimRight=String.prototype.trimRight?function(s){return s.trimRight()}:function(s){return s.replace(/\s+$/,"")}}).call(this,e(3).Buffer)},function(n,t,e){var i=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)a.hasOwnProperty(c)&&(o[c]=a[c])};return function(o,a){function c(){this.constructor=o}r(o,a),o.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=function(r){function o(a,c,l){var u=r.call(this,"Error: "+a+". JSON Line number: "+c+(l?" near: "+l:""))||this;return u.err=a,u.line=c,u.extra=l,u.name="CSV Parse Error",u}return i(o,r),o.column_mismatched=function(a,c){return new o("column_mismatched",a,c)},o.unclosed_quote=function(a,c){return new o("unclosed_quote",a,c)},o.fromJSON=function(a){return new o(a.err,a.line,a.extra)},o.prototype.toJSON=function(){return{err:this.err,line:this.line,extra:this.extra}},o}(Error);t.default=s},function(n,t,e){var i=e(18),s=e(68),r=e(69),o=i?i.toStringTag:void 0;n.exports=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":o&&o in Object(a)?s(a):r(a)}},function(n,t){n.exports=function(e,i){return e===i||e!=e&&i!=i}},function(n,t,e){n.exports=e(33)},function(n,t,e){var i=e(34),s=function(r,o){return new i.Converter(r,o)};s.csv=s,s.Converter=i.Converter,n.exports=s},function(n,t,e){(function(i){var s=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var b in d)d.hasOwnProperty(b)&&(p[b]=d[b])};return function(p,d){function b(){this.constructor=p}m(p,d),p.prototype=d===null?Object.create(d):(b.prototype=d.prototype,new b)}}(),r=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0});var o=e(36),a=e(50),c=e(51),l=r(e(15)),u=e(52),h=e(105),f=function(m){function p(d,b){b===void 0&&(b={});var g=m.call(this,b)||this;return g.options=b,g.params=a.mergeParams(d),g.runtime=c.initParseRuntime(g),g.result=new h.Result(g),g.processor=new u.ProcessorLocal(g),g.once("error",function(y){i(function(){g.result.processError(y),g.emit("done",y)})}),g.once("done",function(){g.processor.destroy()}),g}return s(p,m),p.prototype.preRawData=function(d){return this.runtime.preRawDataHook=d,this},p.prototype.preFileLine=function(d){return this.runtime.preFileLineHook=d,this},p.prototype.subscribe=function(d,b,g){return this.parseRuntime.subscribe={onNext:d,onError:b,onCompleted:g},this},p.prototype.fromFile=function(d,b){var g=this,y=e(!function(){var x=new Error("Cannot find module 'fs'");throw x.code="MODULE_NOT_FOUND",x}());return y.exists(d,function(x){x?y.createReadStream(d,b).pipe(g):g.emit("error",new Error("File does not exist. Check to make sure the file path to your csv is correct."))}),this},p.prototype.fromStream=function(d){return d.pipe(this),this},p.prototype.fromString=function(d){d.toString();var b=new o.Readable,g=0;return b._read=function(y){if(g>=d.length)this.push(null);else{var x=d.substr(g,y);this.push(x),g+=y}},this.fromStream(b)},p.prototype.then=function(d,b){var g=this;return new l.default(function(y,x){g.parseRuntime.then={onfulfilled:function(w){y(d?d(w):w)},onrejected:function(w){b?y(b(w)):x(w)}}})},Object.defineProperty(p.prototype,"parseParam",{get:function(){return this.params},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"parseRuntime",{get:function(){return this.runtime},enumerable:!0,configurable:!0}),p.prototype._transform=function(d,b,g){var y=this;this.processor.process(d).then(function(x){if(x.length>0)return y.runtime.started=!0,y.result.processResult(x)}).then(function(){y.emit("drained"),g()},function(x){y.runtime.hasError=!0,y.runtime.error=x,y.emit("error",x),g()})},p.prototype._flush=function(d){var b=this;this.processor.flush().then(function(g){if(g.length>0)return b.result.processResult(g)}).then(function(){b.processEnd(d)},function(g){b.emit("error",g),d()})},p.prototype.processEnd=function(d){this.result.endProcess(),this.emit("done"),d()},Object.defineProperty(p.prototype,"parsedLineNumber",{get:function(){return this.runtime.parsedLineNumber},enumerable:!0,configurable:!0}),p}(o.Transform);t.Converter=f}).call(this,e(11).setImmediate)},function(n,t,e){(function(i,s){(function(r,o){if(!r.setImmediate){var a,c=1,l={},u=!1,h=r.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(r);f=f&&f.setTimeout?f:r,{}.toString.call(r.process)==="[object process]"?a=function(d){s.nextTick(function(){p(d)})}:function(){if(r.postMessage&&!r.importScripts){var d=!0,b=r.onmessage;return r.onmessage=function(){d=!1},r.postMessage("","*"),r.onmessage=b,d}}()?function(){var d="setImmediate$"+Math.random()+"$",b=function(g){g.source===r&&typeof g.data=="string"&&g.data.indexOf(d)===0&&p(+g.data.slice(d.length))};r.addEventListener?r.addEventListener("message",b,!1):r.attachEvent("onmessage",b),a=function(g){r.postMessage(d+g,"*")}}():r.MessageChannel?function(){var d=new MessageChannel;d.port1.onmessage=function(b){p(b.data)},a=function(b){d.port2.postMessage(b)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var d=h.documentElement;a=function(b){var g=h.createElement("script");g.onreadystatechange=function(){p(b),g.onreadystatechange=null,d.removeChild(g),g=null},d.appendChild(g)}}():a=function(d){setTimeout(p,0,d)},f.setImmediate=function(d){typeof d!="function"&&(d=new Function(""+d));for(var b=new Array(arguments.length-1),g=0;g<b.length;g++)b[g]=arguments[g+1];var y={callback:d,args:b};return l[c]=y,a(c),c++},f.clearImmediate=m}function m(d){delete l[d]}function p(d){if(u)setTimeout(p,0,d);else{var b=l[d];if(b){u=!0;try{(function(g){var y=g.callback,x=g.args;switch(x.length){case 0:y();break;case 1:y(x[0]);break;case 2:y(x[0],x[1]);break;case 3:y(x[0],x[1],x[2]);break;default:y.apply(o,x)}})(b)}finally{m(d),u=!1}}}}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,e(0),e(4))},function(n,t,e){n.exports=s;var i=e(12).EventEmitter;function s(){i.call(this)}e(2)(s,i),s.Readable=e(13),s.Writable=e(46),s.Duplex=e(47),s.Transform=e(48),s.PassThrough=e(49),s.Stream=s,s.prototype.pipe=function(r,o){var a=this;function c(d){r.writable&&r.write(d)===!1&&a.pause&&a.pause()}function l(){a.readable&&a.resume&&a.resume()}a.on("data",c),r.on("drain",l),r._isStdio||o&&o.end===!1||(a.on("end",h),a.on("close",f));var u=!1;function h(){u||(u=!0,r.end())}function f(){u||(u=!0,typeof r.destroy=="function"&&r.destroy())}function m(d){if(p(),i.listenerCount(this,"error")===0)throw d}function p(){a.removeListener("data",c),r.removeListener("drain",l),a.removeListener("end",h),a.removeListener("close",f),a.removeListener("error",m),r.removeListener("error",m),a.removeListener("end",p),a.removeListener("close",p),r.removeListener("close",p)}return a.on("error",m),r.on("error",m),a.on("end",p),a.on("close",p),r.on("close",p),r.emit("pipe",a),r}},function(n,t){var e={}.toString;n.exports=Array.isArray||function(i){return e.call(i)=="[object Array]"}},function(n,t,e){t.byteLength=function(f){var m=l(f),p=m[0],d=m[1];return 3*(p+d)/4-d},t.toByteArray=function(f){for(var m,p=l(f),d=p[0],b=p[1],g=new r(3*(d+b)/4-b),y=0,x=b>0?d-4:d,w=0;w<x;w+=4)m=s[f.charCodeAt(w)]<<18|s[f.charCodeAt(w+1)]<<12|s[f.charCodeAt(w+2)]<<6|s[f.charCodeAt(w+3)],g[y++]=m>>16&255,g[y++]=m>>8&255,g[y++]=255&m;return b===2&&(m=s[f.charCodeAt(w)]<<2|s[f.charCodeAt(w+1)]>>4,g[y++]=255&m),b===1&&(m=s[f.charCodeAt(w)]<<10|s[f.charCodeAt(w+1)]<<4|s[f.charCodeAt(w+2)]>>2,g[y++]=m>>8&255,g[y++]=255&m),g},t.fromByteArray=function(f){for(var m,p=f.length,d=p%3,b=[],g=0,y=p-d;g<y;g+=16383)b.push(h(f,g,g+16383>y?y:g+16383));return d===1?(m=f[p-1],b.push(i[m>>2]+i[m<<4&63]+"==")):d===2&&(m=(f[p-2]<<8)+f[p-1],b.push(i[m>>10]+i[m>>4&63]+i[m<<2&63]+"=")),b.join("")};for(var i=[],s=[],r=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)i[a]=o[a],s[o.charCodeAt(a)]=a;function l(f){var m=f.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=f.indexOf("=");return p===-1&&(p=m),[p,p===m?0:4-p%4]}function u(f){return i[f>>18&63]+i[f>>12&63]+i[f>>6&63]+i[63&f]}function h(f,m,p){for(var d,b=[],g=m;g<p;g+=3)d=(f[g]<<16&16711680)+(f[g+1]<<8&65280)+(255&f[g+2]),b.push(u(d));return b.join("")}s[45]=62,s[95]=63},function(n,t){t.read=function(e,i,s,r,o){var a,c,l=8*o-r-1,u=(1<<l)-1,h=u>>1,f=-7,m=s?o-1:0,p=s?-1:1,d=e[i+m];for(m+=p,a=d&(1<<-f)-1,d>>=-f,f+=l;f>0;a=256*a+e[i+m],m+=p,f-=8);for(c=a&(1<<-f)-1,a>>=-f,f+=r;f>0;c=256*c+e[i+m],m+=p,f-=8);if(a===0)a=1-h;else{if(a===u)return c?NaN:1/0*(d?-1:1);c+=Math.pow(2,r),a-=h}return(d?-1:1)*c*Math.pow(2,a-r)},t.write=function(e,i,s,r,o,a){var c,l,u,h=8*a-o-1,f=(1<<h)-1,m=f>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,b=r?1:-1,g=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(l=isNaN(i)?1:0,c=f):(c=Math.floor(Math.log(i)/Math.LN2),i*(u=Math.pow(2,-c))<1&&(c--,u*=2),(i+=c+m>=1?p/u:p*Math.pow(2,1-m))*u>=2&&(c++,u/=2),c+m>=f?(l=0,c=f):c+m>=1?(l=(i*u-1)*Math.pow(2,o),c+=m):(l=i*Math.pow(2,m-1)*Math.pow(2,o),c=0));o>=8;e[s+d]=255&l,d+=b,l/=256,o-=8);for(c=c<<o|l,h+=o;h>0;e[s+d]=255&c,d+=b,c/=256,h-=8);e[s+d-b]|=128*g}},function(n,t){var e={}.toString;n.exports=Array.isArray||function(i){return e.call(i)=="[object Array]"}},function(n,t){},function(n,t,e){var i=e(7).Buffer,s=e(43);function r(o,a,c){o.copy(a,c)}n.exports=function(){function o(){(function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(a){var c={data:a,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length},o.prototype.unshift=function(a){var c={data:a,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length},o.prototype.shift=function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(a){if(this.length===0)return"";for(var c=this.head,l=""+c.data;c=c.next;)l+=a+c.data;return l},o.prototype.concat=function(a){if(this.length===0)return i.alloc(0);if(this.length===1)return this.head.data;for(var c=i.allocUnsafe(a>>>0),l=this.head,u=0;l;)r(l.data,c,u),u+=l.data.length,l=l.next;return c},o}(),s&&s.inspect&&s.inspect.custom&&(n.exports.prototype[s.inspect.custom]=function(){var o=s.inspect({length:this.length});return this.constructor.name+" "+o})},function(n,t){},function(n,t,e){(function(i){function s(r){try{if(!i.localStorage)return!1}catch{return!1}var o=i.localStorage[r];return o!=null&&String(o).toLowerCase()==="true"}n.exports=function(r,o){if(s("noDeprecation"))return r;var a=!1;return function(){if(!a){if(s("throwDeprecation"))throw new Error(o);s("traceDeprecation")?console.trace(o):console.warn(o),a=!0}return r.apply(this,arguments)}}}).call(this,e(0))},function(n,t,e){n.exports=r;var i=e(27),s=e(5);function r(o){if(!(this instanceof r))return new r(o);i.call(this,o)}s.inherits=e(2),s.inherits(r,i),r.prototype._transform=function(o,a,c){c(null,o)}},function(n,t,e){n.exports=e(14)},function(n,t,e){n.exports=e(1)},function(n,t,e){n.exports=e(13).Transform},function(n,t,e){n.exports=e(13).PassThrough},function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.mergeParams=function(i){var s={delimiter:",",ignoreColumns:void 0,includeColumns:void 0,quote:'"',trim:!0,checkType:!1,ignoreEmpty:!1,noheader:!1,headers:void 0,flatKeys:!1,maxRowLength:0,checkColumn:!1,escape:'"',colParser:{},eol:void 0,alwaysSplitAtEOL:!1,output:"json",nullObject:!1,downstreamFormat:"line",needEmitAll:!0};for(var r in i||(i={}),i)i.hasOwnProperty(r)&&(Array.isArray(i[r])?s[r]=[].concat(i[r]):s[r]=i[r]);return s}},function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.initParseRuntime=function(i){var s=i.parseParam,r={needProcessIgnoreColumn:!1,needProcessIncludeColumn:!1,selectedColumns:void 0,ended:!1,hasError:!1,error:void 0,delimiter:i.parseParam.delimiter,eol:i.parseParam.eol,columnConv:[],headerType:[],headerTitle:[],headerFlag:[],headers:void 0,started:!1,parsedLineNumber:0,columnValueSetter:[]};return s.ignoreColumns&&(r.needProcessIgnoreColumn=!0),s.includeColumns&&(r.needProcessIncludeColumn=!0),r}},function(n,t,e){(function(i){var s=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var x in y)y.hasOwnProperty(x)&&(g[x]=y[x])};return function(g,y){function x(){this.constructor=g}b(g,y),g.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}}(),r=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0});var o=e(53),a=r(e(15)),c=e(54),l=r(e(16)),u=e(57),h=e(28),f=e(58),m=r(e(59)),p=r(e(29)),d=function(b){function g(){var y=b!==null&&b.apply(this,arguments)||this;return y.rowSplit=new f.RowSplit(y.converter),y.eolEmitted=!1,y._needEmitEol=void 0,y.headEmitted=!1,y._needEmitHead=void 0,y}return s(g,b),g.prototype.flush=function(){var y=this;if(this.runtime.csvLineBuffer&&this.runtime.csvLineBuffer.length>0){var x=this.runtime.csvLineBuffer;return this.runtime.csvLineBuffer=void 0,this.process(x,!0).then(function(w){return y.runtime.csvLineBuffer&&y.runtime.csvLineBuffer.length>0?a.default.reject(p.default.unclosed_quote(y.runtime.parsedLineNumber,y.runtime.csvLineBuffer.toString())):a.default.resolve(w)})}return a.default.resolve([])},g.prototype.destroy=function(){return a.default.resolve()},Object.defineProperty(g.prototype,"needEmitEol",{get:function(){return this._needEmitEol===void 0&&(this._needEmitEol=this.converter.listeners("eol").length>0),this._needEmitEol},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"needEmitHead",{get:function(){return this._needEmitHead===void 0&&(this._needEmitHead=this.converter.listeners("header").length>0),this._needEmitHead},enumerable:!0,configurable:!0}),g.prototype.process=function(y,x){var w,C=this;return x===void 0&&(x=!1),w=x?y.toString():c.prepareData(y,this.converter.parseRuntime),a.default.resolve().then(function(){return C.runtime.preRawDataHook?C.runtime.preRawDataHook(w):w}).then(function(S){return S&&S.length>0?C.processCSV(S,x):a.default.resolve([])})},g.prototype.processCSV=function(y,x){var w=this,C=this.params,S=this.runtime;S.eol||l.default(y,S),this.needEmitEol&&!this.eolEmitted&&S.eol&&(this.converter.emit("eol",S.eol),this.eolEmitted=!0),C.ignoreEmpty&&!S.started&&(y=h.trimLeft(y));var E=u.stringToLines(y,S);return x?(E.lines.push(E.partial),E.partial=""):this.prependLeftBuf(h.bufFromString(E.partial)),E.lines.length>0?(S.preFileLineHook?this.runPreLineHook(E.lines):a.default.resolve(E.lines)).then(function(T){return S.started||w.runtime.headers?w.processCSVBody(T):w.processDataWithHead(T)}):a.default.resolve([])},g.prototype.processDataWithHead=function(y){if(this.params.noheader)this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=[];else{for(var x="",w=[];y.length;){var C=x+y.shift(),S=this.rowSplit.parse(C);if(S.closed){w=S.cells,x="";break}x=C+l.default(C,this.runtime)}if(this.prependLeftBuf(h.bufFromString(x)),w.length===0)return[];this.params.headers?this.runtime.headers=this.params.headers:this.runtime.headers=w}return(this.runtime.needProcessIgnoreColumn||this.runtime.needProcessIncludeColumn)&&this.filterHeader(),this.needEmitHead&&!this.headEmitted&&(this.converter.emit("header",this.runtime.headers),this.headEmitted=!0),this.processCSVBody(y)},g.prototype.filterHeader=function(){if(this.runtime.selectedColumns=[],this.runtime.headers){for(var y=this.runtime.headers,x=0;x<y.length;x++)if(this.params.ignoreColumns)if(this.params.ignoreColumns.test(y[x])){if(!this.params.includeColumns||!this.params.includeColumns.test(y[x]))continue;this.runtime.selectedColumns.push(x)}else this.runtime.selectedColumns.push(x);else this.params.includeColumns?this.params.includeColumns.test(y[x])&&this.runtime.selectedColumns.push(x):this.runtime.selectedColumns.push(x);this.runtime.headers=h.filterArray(this.runtime.headers,this.runtime.selectedColumns)}},g.prototype.processCSVBody=function(y){if(this.params.output==="line")return y;var x=this.rowSplit.parseMultiLines(y);return this.prependLeftBuf(h.bufFromString(x.partial)),this.params.output==="csv"?x.rowsCells:m.default(x.rowsCells,this.converter)},g.prototype.prependLeftBuf=function(y){y&&(this.runtime.csvLineBuffer?this.runtime.csvLineBuffer=i.concat([y,this.runtime.csvLineBuffer]):this.runtime.csvLineBuffer=y)},g.prototype.runPreLineHook=function(y){var x=this;return new a.default(function(w,C){(function S(E,T,I,P){if(I>=E.length)P();else if(T.preFileLineHook){var R=E[I],D=T.preFileLineHook(R,T.parsedLineNumber+I);if(I++,D&&D.then)D.then(function(H){E[I-1]=H,S(E,T,I,P)});else{for(E[I-1]=D;I<E.length;)E[I]=T.preFileLineHook(E[I],T.parsedLineNumber+I),I++;P()}}else P()})(y,x.runtime,0,function(S){S?C(S):w(y)})})},g}(o.Processor);t.ProcessorLocal=d}).call(this,e(3).Buffer)},function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0});var i=function(s){this.converter=s,this.params=s.parseParam,this.runtime=s.parseRuntime};t.Processor=i},function(n,t,e){(function(i){var s=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0});var r=s(e(55));t.prepareData=function(o,a){var c=function(u,h){return h.csvLineBuffer&&h.csvLineBuffer.length>0?i.concat([h.csvLineBuffer,u]):u}(o,a);a.csvLineBuffer=void 0;var l=function(u,h){var f=u.length-1;if((128&u[f])!=0){for(;(192&u[f])==128;)f--;f--}return f!=u.length-1?(h.csvLineBuffer=u.slice(f+1),u.slice(0,f+1)):u}(c,a).toString("utf8");return a.started===!1?r.default(l):l}}).call(this,e(3).Buffer)},function(n,t,e){(function(i){var s=e(56);n.exports=function(r){return typeof r=="string"&&r.charCodeAt(0)===65279?r.slice(1):i.isBuffer(r)&&s(r)&&r[0]===239&&r[1]===187&&r[2]===191?r.slice(3):r}}).call(this,e(3).Buffer)},function(n,t){n.exports=function(e){for(var i=0;i<e.length;)if(e[i]==9||e[i]==10||e[i]==13||32<=e[i]&&e[i]<=126)i+=1;else if(194<=e[i]&&e[i]<=223&&128<=e[i+1]&&e[i+1]<=191)i+=2;else if(e[i]==224&&160<=e[i+1]&&e[i+1]<=191&&128<=e[i+2]&&e[i+2]<=191||(225<=e[i]&&e[i]<=236||e[i]==238||e[i]==239)&&128<=e[i+1]&&e[i+1]<=191&&128<=e[i+2]&&e[i+2]<=191||e[i]==237&&128<=e[i+1]&&e[i+1]<=159&&128<=e[i+2]&&e[i+2]<=191)i+=3;else{if(!(e[i]==240&&144<=e[i+1]&&e[i+1]<=191&&128<=e[i+2]&&e[i+2]<=191&&128<=e[i+3]&&e[i+3]<=191||241<=e[i]&&e[i]<=243&&128<=e[i+1]&&e[i+1]<=191&&128<=e[i+2]&&e[i+2]<=191&&128<=e[i+3]&&e[i+3]<=191||e[i]==244&&128<=e[i+1]&&e[i+1]<=143&&128<=e[i+2]&&e[i+2]<=191&&128<=e[i+3]&&e[i+3]<=191))return!1;i+=4}return!0}},function(n,t,e){var i=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(e(16));t.stringToLines=function(r,o){var a=s.default(r,o),c=r.split(a);return{lines:c,partial:c.pop()||""}}},function(n,t,e){var i=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(e(16)),r=e(28),o=[",","|","	",";",":"],a=function(){function c(l){this.conv=l,this.cachedRegExp={},this.delimiterEmitted=!1,this._needEmitDelimiter=void 0,this.quote=l.parseParam.quote,this.trim=l.parseParam.trim,this.escape=l.parseParam.escape}return Object.defineProperty(c.prototype,"needEmitDelimiter",{get:function(){return this._needEmitDelimiter===void 0&&(this._needEmitDelimiter=this.conv.listeners("delimiter").length>0),this._needEmitDelimiter},enumerable:!0,configurable:!0}),c.prototype.parse=function(l){if(l.length===0||this.conv.parseParam.ignoreEmpty&&l.trim().length===0)return{cells:[],closed:!0};var u=this.quote,h=this.trim;this.escape,(this.conv.parseRuntime.delimiter instanceof Array||this.conv.parseRuntime.delimiter.toLowerCase()==="auto")&&(this.conv.parseRuntime.delimiter=this.getDelimiter(l)),this.needEmitDelimiter&&!this.delimiterEmitted&&(this.conv.emit("delimiter",this.conv.parseRuntime.delimiter),this.delimiterEmitted=!0);var f=this.conv.parseRuntime.delimiter,m=l.split(f);if(u==="off"){if(h)for(var p=0;p<m.length;p++)m[p]=m[p].trim();return{cells:m,closed:!0}}return this.toCSVRow(m,h,u,f)},c.prototype.toCSVRow=function(l,u,h,f){for(var m=[],p=!1,d="",b=0,g=l.length;b<g;b++){var y=l[b];!p&&u&&(y=r.trimLeft(y));var x=y.length;if(p)this.isQuoteClose(y)?(p=!1,d+=f+(y=y.substr(0,x-1)),d=this.escapeQuote(d),u&&(d=r.trimRight(d)),m.push(d),d=""):d+=f+y;else{if(x===2&&y===this.quote+this.quote){m.push("");continue}if(this.isQuoteOpen(y)){if(y=y.substr(1),this.isQuoteClose(y)){y=y.substring(0,y.lastIndexOf(h)),y=this.escapeQuote(y),m.push(y);continue}if(y.indexOf(h)!==-1){for(var w=0,C="",S=0,E=y;S<E.length;S++){var T=E[S];T===h&&C!==this.escape?(w++,C=""):C=T}if(w%2==1){u&&(y=r.trimRight(y)),m.push(h+y);continue}p=!0,d+=y;continue}p=!0,d+=y;continue}u&&(y=r.trimRight(y)),m.push(y)}}return{cells:m,closed:!p}},c.prototype.getDelimiter=function(l){var u;if(this.conv.parseParam.delimiter==="auto")u=o;else{if(!(this.conv.parseParam.delimiter instanceof Array))return this.conv.parseParam.delimiter;u=this.conv.parseParam.delimiter}var h=0,f=",";return u.forEach(function(m){var p=l.split(m).length;p>h&&(f=m,h=p)}),f},c.prototype.isQuoteOpen=function(l){var u=this.quote,h=this.escape;return l[0]===u&&(l[1]!==u||l[1]===h&&(l[2]===u||l.length===2))},c.prototype.isQuoteClose=function(l){var u=this.quote,h=this.escape;this.conv.parseParam.trim&&(l=r.trimRight(l));for(var f=0,m=l.length-1;l[m]===u||l[m]===h;)m--,f++;return f%2!=0},c.prototype.escapeQuote=function(l){var u="es|"+this.quote+"|"+this.escape;this.cachedRegExp[u]===void 0&&(this.cachedRegExp[u]=new RegExp("\\"+this.escape+"\\"+this.quote,"g"));var h=this.cachedRegExp[u];return l.replace(h,this.quote)},c.prototype.parseMultiLines=function(l){for(var u=[],h="";l.length;){var f=h+l.shift(),m=this.parse(f);m.cells.length===0&&this.conv.parseParam.ignoreEmpty||(m.closed||this.conv.parseParam.alwaysSplitAtEOL?(this.conv.parseRuntime.selectedColumns?u.push(r.filterArray(m.cells,this.conv.parseRuntime.selectedColumns)):u.push(m.cells),h=""):h=f+(s.default(f,this.conv.parseRuntime)||`
`))}return{rowsCells:u,partial:h}},c}();t.RowSplit=a},function(n,t,e){var i=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(e(29)),r=i(e(60)),o=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/;function a(g,y,x){if(y.parseParam.checkColumn&&y.parseRuntime.headers&&g.length!==y.parseRuntime.headers.length)throw s.default.column_mismatched(y.parseRuntime.parsedLineNumber+x);return function(w,C,S){for(var E=!1,T={},I=0,P=w.length;I<P;I++){var R=w[I];if(!S.parseParam.ignoreEmpty||R!==""){E=!0;var D=C[I];D&&D!==""||(D=C[I]="field"+(I+1));var H=l(D,I,S);if(H){var B=H(R,D,T,w,I);B!==void 0&&u(T,D,B,S,I)}else S.parseParam.checkType&&(R=m(R,D,I,S)(R)),R!==void 0&&u(T,D,R,S,I)}}return E?T:null}(g,y.parseRuntime.headers||[],y)||null}t.default=function(g,y){for(var x=[],w=0,C=g.length;w<C;w++){var S=a(g[w],y,w);S&&x.push(S)}return x};var c={string:d,number:p,omit:function(){}};function l(g,y,x){if(x.parseRuntime.columnConv[y]!==void 0)return x.parseRuntime.columnConv[y];var w=x.parseParam.colParser[g];if(w===void 0)return x.parseRuntime.columnConv[y]=null;if(typeof w=="object"&&(w=w.cellParser||"string"),typeof w=="string"){w=w.trim().toLowerCase();var C=c[w];return x.parseRuntime.columnConv[y]=C||null}return x.parseRuntime.columnConv[y]=typeof w=="function"?w:null}function u(g,y,x,w,C){if(!w.parseRuntime.columnValueSetter[C])if(w.parseParam.flatKeys)w.parseRuntime.columnValueSetter[C]=h;else if(y.indexOf(".")>-1){for(var S=y.split("."),E=!0;S.length>0;)if(S.shift().length===0){E=!1;break}!E||w.parseParam.colParser[y]&&w.parseParam.colParser[y].flat?w.parseRuntime.columnValueSetter[C]=h:w.parseRuntime.columnValueSetter[C]=f}else w.parseRuntime.columnValueSetter[C]=h;w.parseParam.nullObject===!0&&x==="null"&&(x=null),w.parseRuntime.columnValueSetter[C](g,y,x)}function h(g,y,x){g[y]=x}function f(g,y,x){r.default(g,y,x)}function m(g,y,x,w){return w.parseRuntime.headerType[x]?w.parseRuntime.headerType[x]:y.indexOf("number#!")>-1?w.parseRuntime.headerType[x]=p:y.indexOf("string#!")>-1?w.parseRuntime.headerType[x]=d:w.parseParam.checkType?w.parseRuntime.headerType[x]=b:w.parseRuntime.headerType[x]=d}function p(g){var y=parseFloat(g);return isNaN(y)?g:y}function d(g){return g.toString()}function b(g){var y=g.trim();return y===""?d(g):o.test(y)?p(g):y.length===5&&y.toLowerCase()==="false"||y.length===4&&y.toLowerCase()==="true"?function(x){var w=x.trim();return w.length!==5||w.toLowerCase()!=="false"}(g):y[0]==="{"&&y[y.length-1]==="}"||y[0]==="["&&y[y.length-1]==="]"?function(x){try{return JSON.parse(x)}catch{return x}}(g):d(g)}},function(n,t,e){var i=e(61);n.exports=function(s,r,o){return s==null?s:i(s,r,o)}},function(n,t,e){var i=e(62),s=e(74),r=e(103),o=e(20),a=e(104);n.exports=function(c,l,u,h){if(!o(c))return c;for(var f=-1,m=(l=s(l,c)).length,p=m-1,d=c;d!=null&&++f<m;){var b=a(l[f]),g=u;if(f!=p){var y=d[b];(g=h?h(y,b,d):void 0)===void 0&&(g=o(y)?y:r(l[f+1])?[]:{})}i(d,b,g),d=d[b]}return c}},function(n,t,e){var i=e(63),s=e(31),r=Object.prototype.hasOwnProperty;n.exports=function(o,a,c){var l=o[a];r.call(o,a)&&s(l,c)&&(c!==void 0||a in o)||i(o,a,c)}},function(n,t,e){var i=e(64);n.exports=function(s,r,o){r=="__proto__"&&i?i(s,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):s[r]=o}},function(n,t,e){var i=e(17),s=function(){try{var r=i(Object,"defineProperty");return r({},"",{}),r}catch{}}();n.exports=s},function(n,t,e){var i=e(66),s=e(70),r=e(20),o=e(72),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,h=l.hasOwnProperty,f=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(m){return!(!r(m)||s(m))&&(i(m)?f:a).test(o(m))}},function(n,t,e){var i=e(30),s=e(20);n.exports=function(r){if(!s(r))return!1;var o=i(r);return o=="[object Function]"||o=="[object GeneratorFunction]"||o=="[object AsyncFunction]"||o=="[object Proxy]"}},function(n,t,e){(function(i){var s=typeof i=="object"&&i&&i.Object===Object&&i;n.exports=s}).call(this,e(0))},function(n,t,e){var i=e(18),s=Object.prototype,r=s.hasOwnProperty,o=s.toString,a=i?i.toStringTag:void 0;n.exports=function(c){var l=r.call(c,a),u=c[a];try{c[a]=void 0;var h=!0}catch{}var f=o.call(c);return h&&(l?c[a]=u:delete c[a]),f}},function(n,t){var e=Object.prototype.toString;n.exports=function(i){return e.call(i)}},function(n,t,e){var i=e(71),s=function(){var r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();n.exports=function(r){return!!s&&s in r}},function(n,t,e){var i=e(19)["__core-js_shared__"];n.exports=i},function(n,t){var e=Function.prototype.toString;n.exports=function(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}},function(n,t){n.exports=function(e,i){return e==null?void 0:e[i]}},function(n,t,e){var i=e(21),s=e(75),r=e(77),o=e(100);n.exports=function(a,c){return i(a)?a:s(a,c)?[a]:r(o(a))}},function(n,t,e){var i=e(21),s=e(22),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;n.exports=function(a,c){if(i(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!s(a))||o.test(a)||!r.test(a)||c!=null&&a in Object(c)}},function(n,t){n.exports=function(e){return e!=null&&typeof e=="object"}},function(n,t,e){var i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,r=e(78)(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(i,function(c,l,u,h){a.push(u?h.replace(s,"$1"):l||c)}),a});n.exports=r},function(n,t,e){var i=e(79);n.exports=function(s){var r=i(s,function(a){return o.size===500&&o.clear(),a}),o=r.cache;return r}},function(n,t,e){var i=e(80),s="Expected a function";function r(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new TypeError(s);var c=function(){var l=arguments,u=a?a.apply(this,l):l[0],h=c.cache;if(h.has(u))return h.get(u);var f=o.apply(this,l);return c.cache=h.set(u,f)||h,f};return c.cache=new(r.Cache||i),c}r.Cache=i,n.exports=r},function(n,t,e){var i=e(81),s=e(95),r=e(97),o=e(98),a=e(99);function c(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var f=l[u];this.set(f[0],f[1])}}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=r,c.prototype.has=o,c.prototype.set=a,n.exports=c},function(n,t,e){var i=e(82),s=e(88),r=e(94);n.exports=function(){this.size=0,this.__data__={hash:new i,map:new(r||s),string:new i}}},function(n,t,e){var i=e(83),s=e(84),r=e(85),o=e(86),a=e(87);function c(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var f=l[u];this.set(f[0],f[1])}}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=r,c.prototype.has=o,c.prototype.set=a,n.exports=c},function(n,t,e){var i=e(8);n.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(n,t){n.exports=function(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}},function(n,t,e){var i=e(8),s=Object.prototype.hasOwnProperty;n.exports=function(r){var o=this.__data__;if(i){var a=o[r];return a==="__lodash_hash_undefined__"?void 0:a}return s.call(o,r)?o[r]:void 0}},function(n,t,e){var i=e(8),s=Object.prototype.hasOwnProperty;n.exports=function(r){var o=this.__data__;return i?o[r]!==void 0:s.call(o,r)}},function(n,t,e){var i=e(8);n.exports=function(s,r){var o=this.__data__;return this.size+=this.has(s)?0:1,o[s]=i&&r===void 0?"__lodash_hash_undefined__":r,this}},function(n,t,e){var i=e(89),s=e(90),r=e(91),o=e(92),a=e(93);function c(l){var u=-1,h=l==null?0:l.length;for(this.clear();++u<h;){var f=l[u];this.set(f[0],f[1])}}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=r,c.prototype.has=o,c.prototype.set=a,n.exports=c},function(n,t){n.exports=function(){this.__data__=[],this.size=0}},function(n,t,e){var i=e(9),s=Array.prototype.splice;n.exports=function(r){var o=this.__data__,a=i(o,r);return!(a<0||(a==o.length-1?o.pop():s.call(o,a,1),--this.size,0))}},function(n,t,e){var i=e(9);n.exports=function(s){var r=this.__data__,o=i(r,s);return o<0?void 0:r[o][1]}},function(n,t,e){var i=e(9);n.exports=function(s){return i(this.__data__,s)>-1}},function(n,t,e){var i=e(9);n.exports=function(s,r){var o=this.__data__,a=i(o,s);return a<0?(++this.size,o.push([s,r])):o[a][1]=r,this}},function(n,t,e){var i=e(17)(e(19),"Map");n.exports=i},function(n,t,e){var i=e(10);n.exports=function(s){var r=i(this,s).delete(s);return this.size-=r?1:0,r}},function(n,t){n.exports=function(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}},function(n,t,e){var i=e(10);n.exports=function(s){return i(this,s).get(s)}},function(n,t,e){var i=e(10);n.exports=function(s){return i(this,s).has(s)}},function(n,t,e){var i=e(10);n.exports=function(s,r){var o=i(this,s),a=o.size;return o.set(s,r),this.size+=o.size==a?0:1,this}},function(n,t,e){var i=e(101);n.exports=function(s){return s==null?"":i(s)}},function(n,t,e){var i=e(18),s=e(102),r=e(21),o=e(22),a=i?i.prototype:void 0,c=a?a.toString:void 0;n.exports=function l(u){if(typeof u=="string")return u;if(r(u))return s(u,l)+"";if(o(u))return c?c.call(u):"";var h=u+"";return h=="0"&&1/u==-1/0?"-0":h}},function(n,t){n.exports=function(e,i){for(var s=-1,r=e==null?0:e.length,o=Array(r);++s<r;)o[s]=i(e[s],s,e);return o}},function(n,t){var e=/^(?:0|[1-9]\d*)$/;n.exports=function(i,s){var r=typeof i;return!!(s=s??9007199254740991)&&(r=="number"||r!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<s}},function(n,t,e){var i=e(22);n.exports=function(s){if(typeof s=="string"||i(s))return s;var r=s+"";return r=="0"&&1/s==-1/0?"-0":r}},function(n,t,e){var i=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(e(15)),r=e(106),o=function(){function c(l){this.converter=l,this.finalResult=[]}return Object.defineProperty(c.prototype,"needEmitLine",{get:function(){return!!this.converter.parseRuntime.subscribe&&!!this.converter.parseRuntime.subscribe.onNext||this.needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"needPushDownstream",{get:function(){return this._needPushDownstream===void 0&&(this._needPushDownstream=this.converter.listeners("data").length>0||this.converter.listeners("readable").length>0),this._needPushDownstream},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"needEmitAll",{get:function(){return!!this.converter.parseRuntime.then&&this.converter.parseParam.needEmitAll},enumerable:!0,configurable:!0}),c.prototype.processResult=function(l){var u=this,h=this.converter.parseRuntime.parsedLineNumber;return this.needPushDownstream&&this.converter.parseParam.downstreamFormat==="array"&&h===0&&a(this.converter,"["+r.EOL),new s.default(function(f,m){u.needEmitLine?function p(d,b,g,y,x){if(g>=d.length)x();else if(b.parseRuntime.subscribe&&b.parseRuntime.subscribe.onNext){var w=b.parseRuntime.subscribe.onNext,C=d[g],S=w(C,b.parseRuntime.parsedLineNumber+g);if(g++,S&&S.then)S.then(function(){(function(T,I,P,R,D,H,B){D&&a(P,B),p(T,P,R,D,H)})(d,0,b,g,y,x,C)},x);else{for(y&&a(b,C);g<d.length;){var E=d[g];w(E,b.parseRuntime.parsedLineNumber+g),g++,y&&a(b,E)}x()}}else{if(y)for(;g<d.length;)E=d[g++],a(b,E);x()}}(l,u.converter,0,u.needPushDownstream,function(p){p?m(p):(u.appendFinalResult(l),f())}):(u.appendFinalResult(l),f())})},c.prototype.appendFinalResult=function(l){this.needEmitAll&&(this.finalResult=this.finalResult.concat(l)),this.converter.parseRuntime.parsedLineNumber+=l.length},c.prototype.processError=function(l){this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onError&&this.converter.parseRuntime.subscribe.onError(l),this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onrejected&&this.converter.parseRuntime.then.onrejected(l)},c.prototype.endProcess=function(){this.converter.parseRuntime.then&&this.converter.parseRuntime.then.onfulfilled&&(this.needEmitAll?this.converter.parseRuntime.then.onfulfilled(this.finalResult):this.converter.parseRuntime.then.onfulfilled([])),this.converter.parseRuntime.subscribe&&this.converter.parseRuntime.subscribe.onCompleted&&this.converter.parseRuntime.subscribe.onCompleted(),this.needPushDownstream&&this.converter.parseParam.downstreamFormat==="array"&&a(this.converter,"]"+r.EOL)},c}();function a(c,l){if(typeof l!="object"||c.options.objectMode)c.push(l);else{var u=JSON.stringify(l);c.push(u+(c.parseParam.downstreamFormat==="array"?","+r.EOL:r.EOL),"utf8")}}t.Result=o},function(n,t){t.endianness=function(){return"LE"},t.hostname=function(){return typeof location<"u"?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return typeof navigator<"u"?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL=`
`,t.homedir=function(){return"/"}}])),Kn}var uh=ch();const hh=lh(uh);function fh(n){const t=document.querySelector("#table"),e=document.querySelector("#saveCsv"),i=new FileReader;i.onload=o=>{const c=o.target.result.split(`
`),l=document.createElement("tbody");c.forEach((u,h)=>{const f=u.split(/,(?![\d])/),m=document.createElement("tr");f.forEach(p=>{const d=document.createElement("td"),b=document.createElement("input");b.type="text",b.value=p,d.appendChild(b),m.appendChild(d)}),l.appendChild(m)}),t.innerHTML="",t.appendChild(l)},i.readAsText(n);const s=document.getElementById("myChart"),r=hh({noheader:!0,output:"csv"}).fromString(n);console.log(r),new Xt(s,{type:"bar",data:{labels:["Red","Blue","Yellow","Green","Purple","Orange"],datasets:[{label:"# of Votes",data:[12,19,3,5,2,3],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}}),e.addEventListener("click",()=>{const o=t.querySelectorAll("tr");let a="";o.forEach(h=>{const f=h.querySelectorAll("input"),m=Array.from(f).map(p=>p.value);a+=m.join(",")+`
`});const c=new Blob([a],{type:"text/csv"}),l=URL.createObjectURL(c),u=document.createElement("a");u.href=l,u.download="edited.csv",document.body.appendChild(u),u.click(),document.body.removeChild(u)})}class dh extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.init()}init(){this.shadowRoot.innerHTML=`
    <style>
        :host {
            display: block;
            padding: 20px;
            position: absolute;
            backdrop-filter: blur(7.199999809265137px);
            background-color: var(--overlay);
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        .wrap-container {
            display: flex;
            border-radius: 30px;
            padding: 20px 16px;
            width: 342px;
            background-color: var(--border-color);
            margin: 0 auto;
        }
        .container {
            border-radius: 22px;
            padding: 12px 13px;
            width: 100%;
            background: linear-gradient(180deg, rgba(95, 92, 240, 0.6) 0%, rgba(221, 220, 252, 0.6) 100%);
        }
        .form {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            flex: 1;
            gap: 15px;
        }
        .form-title {
            font-family: var(--font-family);
            font-weight: 600;
            font-size: 20px;
            text-align: center;
            color: var(--white);
            margin: 0;
        }
        .form-text {
            font-family: var(--font-family);
            font-weight: 300;
            font-size: 14px;
            text-align: center;
            color: var(--white);
            margin: 7px 0 0;
        }
        .btn-custom {
            border-radius: 30px;
            padding: 16px 86px;
            width: 100%;
            height: 56px;
            background-color: var(--accent);
            cursor: pointer;
            font-family: var(--font-family);
            font-weight: 500;
            font-size: 20px;
            color: var(--white);
        }
        .btn-custom_disabled {
            background-color: var(--disabled);
            pointer-events: none;
        }
        .btn-custom:hover {
            opacity: 0.8;
        }
        .file-name {
            border: 1px solid var(--accent);
            border-radius: 10px;
            padding: 6px 9px;
            box-sizing: border-box;
            width: 100%;
            height: 35px;
        }
        .drop-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid var(--grey);
            border-radius: 30px;
            padding: 39px 27px 17px 27px;
            box-sizing: border-box;
            background-color: var(--frame-background);
            width: 100%;
            min-height: 230px;
        }
        .img-drop-area {
            width: 100%;
            pointer-events: none;
        }
        .drop-area-text {
            font-family: var(--font-family);
            font-weight: 600;
            font-size: 14px;
            text-align: center;
            color: var(--accent);
        }
        .drop-area-success {
            color: var(--accent);
            pointer-events: none;
        }
        .wrap-cross-button {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }
        .cross-button {
            background-color: transparent;
            border: transparent;
            cursor: pointer;
        }
        .cross-button-svg {
            fill: white;
        }
        .cross-button:hover > svg {
            fill: #5f5cf0;
        }
        .uploaded-success {
            font-family: var(--font-family);
            font-weight: 300;
            font-size: 14px;
            color: var(--white);
            text-align: center;
        }
        .mask-loader {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px 0;
            box-sizing: border-box;
        }
        .loader {
            width: 50px;
            height: 50px;
            border: 10px solid transparent;
            border-radius: 100%;
            border-left-color: var(--accent);
            border-top-color: var(--accent);
            animation: loader 1s linear infinite;
            box-shadow: 0 4px 4px 0 var(--for-docs-pic-text-color), inset 0 -5px 4px 0 var(--for-docs-pic-white);
        }
        @keyframes loader {
            100% {
                transform: rotate(360deg);
            }
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
    <div class="wrap-container">
        <div class="container">
            <div class="wrap-cross-button">
                <button class="cross-button" id="cross-button">
                    <svg class="cross-button-svg" width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="34" height="34" rx="17" fill="#CCCCCE" fill-opacity="0.28" />
                <path d="M10.071 24.0711C9.40831 23.4084 9.40831 22.3339 10.071 21.6712L21.8133 9.92898C22.476 9.26627 23.5504 9.26627 24.2132 9.92898V9.92898C24.8759 10.5917 24.8759 11.6661 24.2132 12.3289L12.4709 24.0711C11.8082 24.7338 10.7337 24.7338 10.071 24.0711V24.0711ZM10.071 12.3289C9.40831 11.6661 9.40831 10.5917 10.071 9.92898V9.92898C10.7337 9.26627 11.8082 9.26627 12.4709 9.92898L24.2132 21.6712C24.8759 22.3339 24.8759 23.4084 24.2132 24.0711V24.0711C23.5504 24.7338 22.476 24.7338 21.8133 24.0711L10.071 12.3289Z" />
                    </svg>
                </button>
            </div>
            <form class="form" id="form" action="">
                <div>
                    <p class="form-title">Загрузочное окно</p>
                    <p class="form-text" id="form-text">Перед загрузкой дайте имя файлу</p>
                </div>
                <input type="text" id="file-name" class="file-name" placeholder="Название_файла" required />
                <div id="drop-area" class="drop-area" accept=".csv">
                    <img class="img-drop-area" src="drop.webp" alt="drop" />
                    <p class="drop-area-text">Перенесите ваш в файл сюда</p>
                </div>
                <button id="loadButton" class="btn-custom btn-custom_disabled" type="submit">Загрузить</button>
            </form>
        </div>
    </div>
    `,this.dropArea=this.shadowRoot.getElementById("drop-area"),this.crossButton=this.shadowRoot.getElementById("cross-button"),this.loadButton=this.shadowRoot.getElementById("loadButton"),this.form=this.shadowRoot.getElementById("form"),this.formText=this.shadowRoot.getElementById("form-text"),this.fileName=this.shadowRoot.getElementById("file-name"),this.crossButton.addEventListener("click",()=>{this.init(),this.style.display="none"}),this.dropArea.addEventListener("dragover",t=>{t.stopPropagation(),t.preventDefault(),t.target.style.border="1px dashed",t.target.style.opacity="0.8"}),this.dropArea.addEventListener("dragleave",t=>{t.stopPropagation(),t.preventDefault(),t.target.style.border="1px solid var(--grey)",t.target.style.opacity="1"}),this.dropArea.addEventListener("drop",t=>{t.stopPropagation(),t.preventDefault(),this.fileList=t.dataTransfer.files[0],t.target.style.border="1px solid var(--grey)",t.target.style.opacity="1",this.type=this.fileList.type,this.size=this.fileList.size,this.name=this.fileList.name;const e={day:"numeric",month:"numeric",year:"numeric"};this.date=new Date().toLocaleString("en-US",e),this.type=="text/csv"&&this.size<1073741824&&(this.form.parentElement.style.background="linear-gradient(180deg, rgba(95, 92, 240, 0.6) 0%, rgba(221, 220, 252, 0.6) 100%)",t.target.style.padding="20px",this.formText.innerText="Перед загрузкой дайте имя файлу",this.dropArea.innerHTML=`
        <div class="drop-area-success">
            <h2>Успешно добавлен</h2>
            <div>
                <p>${this.name}</p>
                <p>Размер файла: ${Math.round(this.size/1024)}КБ</p>
                <p>Дата изменения: ${this.date}</p>
            </div>
        </div>
        `,this.loadButton.classList.remove("btn-custom_disabled"),this.loadButton.addEventListener("click",i=>{i.preventDefault(),this.fileName.value&&(this.form.parentElement.style.background="linear-gradient(180deg, rgba(95, 92, 240, 0.6) 0%, rgba(221, 220, 252, 0.6) 100%)",this.loadCsv(i)),this.fileName.value||(this.form.parentElement.style.background="linear-gradient(180deg, #f05c5c 0%, #8f8df4 82.21%)",this.formText.innerHTML="Ошибка при добавлении:</br>Отсутствует название файла")})),this.type!=="text/csv"&&(this.form.parentElement.style.background="linear-gradient(180deg, #f05c5c 0%, #8f8df4 82.21%)",this.formText.innerHTML="Ошибка при добавлении:</br>Неправильный формат файла",this.dropArea.innerHTML=`
          <img class="img-drop-area" src="drop.webp" alt="drop" />
          <p class="drop-area-text">Перенесите ваш в файл сюда</p>
          `),this.type=="text/csv"&&this.size>1073741824&&(this.form.parentElement.style.background="linear-gradient(180deg, #f05c5c 0%, #8f8df4 82.21%)",this.formText.innerHTML="Ошибка при добавлении:</br>Размер файла превышен (> 1Гб)",this.dropArea.innerHTML=`
        <img class="img-drop-area" src="drop.webp" alt="drop" />
        <p class="drop-area-text">Перенесите ваш в файл сюда</p>
        `)})}loadCsv(t){t.preventDefault();const e=this.fileList,i=this.fileName.value;fh(e);const s=new FormData;s.append("file",e),s.append("name",i),this.form.innerHTML=`
      <div class="uploaded-success">
          <h2>Загрузка файла</h2>
          <div class="mask-loader">
              <div class="loader"></div>
          </div>
      </div>
    `,fetch("https://file-upload-server-mc26.onrender.com/api/v1/upload/",{method:"POST",body:s}).then(r=>{if(!r.ok)throw r.json().then(o=>{this.form.innerHTML=`
              <div class="uploaded-success">
                  <h2>Ошибка в загрузке файла </h2>
                  <div>
                      <p>Error: ${o.error}</p>
                  </div>
              </div>
              `}),new Error("Сетевая ошибка");return r.json()}).then(r=>{this.form.innerHTML=`
        <div class="uploaded-success">
            <h2>Файл успешно загружен</h2>
            <div>
                <p>filename: ${r.filename}</p>
                <p>name: ${r.name}</p>
                <p>timestamp: ${r.timestamp}</p>
                <p>message: ${r.message}</p>
            </div>
        </div>
        `}).catch(r=>{console.error("Ошибка:",r)})}}customElements.define("csv-editor",dh);
